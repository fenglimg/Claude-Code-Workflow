# Requirement (non-leaky): /cli:cli-init

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/cli/cli-init.md`

## Command Identity

- group: cli
- name: cli-init
- description: Generate .gemini/ and .qwen/ config directories with settings.json and ignore files based on workspace technology detection
- argument-hint: [--tool gemini|qwen|all] [--output path] [--preview]
- allowed-tools: Bash(*), Read(*), Write(*), Glob(*)

## Structure Hints (Headings Only)

- CLI Initialization Command (/cli:cli-init)
  - Overview
  - Core Functionality
    - Configuration Generation
    - Generated Files
      - Configuration Directories
      - Ignore Files
    - Supported Technology Stacks
      - Frontend Technologies
      - Backend Technologies
      - Database & Infrastructure
    - Generated Rules Structure
      - Base Rules (Always Included)
- Version Control
- OS Files
- IDE Files
- Logs
      - Technology-Specific Rules
- Node.js
- Python
- Java
  - Command Options
    - Tool Selection
    - Preview Mode
    - Custom Output Path
    - Combined Options
  - EXECUTION INSTRUCTIONS - START HERE
    - Step 1: Parse Tool Selection
- Extract --tool flag (default: all)
- Options: gemini, qwen, all
    - Step 2: Workspace Analysis (MANDATORY FIRST)
- Analyze workspace structure
    - Step 3: Technology Detection
- Check for common tech stack indicators
    - Step 4: Generate Configuration Files
- Create .gemini/ directory and settings.json
- Create .geminiignore file with detected technology rules
- Backup existing files if present
- Create .qwen/ directory and settings.json
- Create .qwenignore file with detected technology rules
- Backup existing files if present
    - Step 5: Validation
- Verify generated files are valid
  - Implementation Process (Technical Details)
    - Phase 1: Tool Selection
    - Phase 2: Workspace Analysis
    - Phase 3: Technology Detection
- Technology detection logic
    - Phase 4: Configuration Generation
    - Phase 5: Ignore Rules Generation
    - Phase 6: File Creation
  - Generated File Format
    - Configuration Files
    - Ignore Files
- .geminiignore / .qwenignore
- Generated by Claude Code /cli:cli-init command
- Creation date: 2024-01-15 10:30:00
- Detected technologies: Node.js, Python, Docker
- This file uses gitignore syntax to filter files for CLI tool analysis
- Edit this file to customize filtering rules for your project
- ============================================================================
- Base Rules (Always Applied)
- ============================================================================
- Version Control
- ============================================================================
- Node.js (Detected: package.json found)
- ============================================================================
- ============================================================================
- Python (Detected: requirements.txt, *.py files found)
- ============================================================================
- ============================================================================
- Docker (Detected: Dockerfile found)
- ============================================================================
- ============================================================================
- Custom Rules (Add your project-specific rules below)
- ============================================================================
  - Error Handling
    - Missing Dependencies
    - Write Permissions
    - Backup Existing Files
  - Integration Points
    - Workflow Commands
    - CLI Tool Integration
  - Usage Examples
    - Basic Project Setup
- Initialize all CLI tools (Gemini + Qwen)
- Initialize only Gemini
- Initialize only Qwen
- Preview what would be generated
- Generate in subdirectory
    - Technology Migration
- After adding new tech stack (e.g., Docker)
- Check what changed
- Update only Qwen configuration
    - Tool-Specific Initialization
- Setup for Gemini-only workflow
- Setup for Qwen-only workflow
- Setup both with preview
  - Tool Selection Guide

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
