# Requirement (non-leaky): /workflow:workflow:collaborative-plan-with-file

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/collaborative-plan-with-file.md`

## Command Identity

- group: workflow
- name: workflow:collaborative-plan-with-file
- description: Collaborative planning with Plan Note - Understanding agent creates shared plan-note.md template, parallel agents fill pre-allocated sections, conflict detection without merge. Outputs executable plan-note.md.
- argument-hint: [-y|--yes] <task description> [--max-agents=5]
- allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Bash(*), Write(*), Glob(*), Grep(*), mcp__ace-tool__search_context(*)

## Structure Hints (Headings Only)

  - Auto Mode
- Collaborative Planning Command
  - Quick Start
- Basic usage
- With options
  - Output Artifacts
    - Phase 1: Understanding Agent
    - Phase 2: Per Sub-Agent
    - Phase 3: Final Output
  - Overview
  - Output Structure
  - Implementation
    - Session Initialization
    - Phase 1: Understanding & Template Creation
  - Mission: Create Plan Note Template
    - Key Guidelines
    - Input Requirements
    - Tasks
    - Output Files
    - Success Criteria
    - Phase 2: Parallel Sub-Agent Execution
  - Sub-Agent Context
  - Dual Output Tasks
    - Task 1: Generate Complete plan.json
    - Task 2: Sync Summary to plan-note.md
  - Execution Steps
  - Important
    - Phase 3: Conflict Detection
    - Phase 4: Completion
  - Configuration
  - Error Handling
  - Best Practices

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
