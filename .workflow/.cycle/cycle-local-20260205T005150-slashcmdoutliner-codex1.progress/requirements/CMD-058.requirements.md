# Requirement (non-leaky): /workflow:code-validation-gate

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/tools/code-validation-gate.md`

## Command Identity

- group: workflow
- name: code-validation-gate
- description: Validate AI-generated code for common errors (imports, variables, types) before test execution
- argument-hint: --session WFS-test-session-id [--fix] [--strict]
- allowed-tools: TBD

## Structure Hints (Headings Only)

- Code Validation Gate Command
  - Overview
  - Core Philosophy
  - Target Error Categories
    - L0.1: Compilation Errors
    - L0.2: Import Errors
    - L0.3: Variable Errors
    - L0.4: Type Errors (TypeScript)
    - L0.5: AI-Specific Patterns
  - Execution Process
  - Execution Lifecycle
    - Phase 1: Context Loading
    - Phase 2: Validation Execution
      - L0.1: TypeScript Compilation
- Primary check - catches most fundamental errors
- Parse output for errors
- Critical: Any compilation error blocks further validation
      - L0.2: Import Validation
- Check for circular dependencies
- ESLint import rules
      - L0.3: Variable Validation
- ESLint variable rules
      - L0.4: Type Validation
- TypeScript strict checks
- Check for any abuse
      - L0.5: AI-Specific Checks
- Check for placeholder code
- Check for mock code in production files
    - Phase 3: Result Analysis
    - Phase 4: Auto-Fix (Optional)
- Safe fixes only
- Re-run validation after fixes
- Report what was fixed vs what remains
    - Phase 5: Gate Decision
  - Output Artifacts
    - Validation Report
- Code Validation Report
  - Summary
  - Critical Issues (Must Fix)
    - Import Errors
    - Variable Conflicts
  - Errors (Should Fix)
  - Warnings (Consider Fixing)
  - Auto-Fix Applied
  - Remaining Issues Requiring Manual Fix
  - Next Steps
    - JSON Report (Machine-Readable)
  - Command Options
  - Integration
    - Command Chain
    - Task JSON Integration
  - Error Handling
  - Best Practices
  - Related Commands

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
