# Requirement (non-leaky): /issue:issue:discover-by-prompt

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/issue/discover-by-prompt.md`

## Command Identity

- group: issue
- name: issue:discover-by-prompt
- description: Discover issues from user prompt with Gemini-planned iterative multi-agent exploration. Uses ACE semantic search for context gathering and supports cross-module comparison (e.g., frontend vs backend API contracts).
- argument-hint: [-y|--yes] <prompt> [--scope=src/**] [--depth=standard|deep] [--max-iterations=5]
- allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), AskUserQuestion(*), Glob(*), Grep(*), mcp__ace-tool__search_context(*), mcp__exa__search(*)

## Structure Hints (Headings Only)

  - Auto Mode
- Issue Discovery by Prompt
  - Quick Start
- Discover issues based on user description
- Compare specific modules
- Deep exploration with more iterations
- Focused backend-frontend contract check
  - What & Why
    - Core Concept
    - Value Proposition
    - Use Cases
  - How It Works
    - Execution Flow
    - Exploration Dimensions
    - Iteration Strategy
  - Core Responsibilities
    - Phase 1: Prompt Analysis & Initialization
    - Phase 1.5: ACE Context Gathering
    - Phase 2: Gemini Strategy Planning
  - Codebase Context (from ACE semantic search)
    - Phase 3: Iterative Agent Exploration (with ACE)
    - Phase 4: Cross-Analysis & Synthesis
    - Phase 5: Issue Generation & Summary
  - Output File Structure
  - Schema References
  - Configuration Options
  - Examples
    - Example 1: Single Module Deep Dive
    - Example 2: API Contract Comparison
    - Example 3: Multi-Module Audit
    - Example 4: Plan Only Mode
  - Related Commands
- After discovery, plan solutions
- View all discoveries
- Standard perspective-based discovery
  - Best Practices

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
