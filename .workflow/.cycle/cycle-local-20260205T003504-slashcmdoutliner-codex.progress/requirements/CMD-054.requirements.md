# Requirement (non-leaky): /workflow:tdd-plan

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/tdd-plan.md`

## Command Identity

- group: workflow
- name: tdd-plan
- description: TDD workflow planning with Red-Green-Refactor task chain generation, test-first development structure, and cycle tracking
- argument-hint: \"feature description\"|file.md
- allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*)

## Structure Hints (Headings Only)

- TDD Workflow Plan Command (/workflow:tdd-plan)
  - Coordinator Role
  - Core Rules
  - TDD Compliance Requirements
    - The Iron Law
    - TDD Compliance Checkpoint
    - Core TDD Principles (from ref skills)
  - 6-Phase Execution (with Conflict Resolution)
    - Phase 1: Session Discovery
    - Phase 2: Context Gathering
    - Phase 3: Test Coverage Analysis
    - Phase 4: Conflict Resolution (Optional - auto-triggered by conflict risk)
    - Phase 5: TDD Task Generation
    - Phase 6: TDD Structure Validation & Action Plan Verification (RECOMMENDED)
- Verify session artifacts exist
- Count generated artifacts
- Sample task structure verification (first task)
  - TodoWrite Pattern
    - Key Principles
    - TDD-Specific Features
  - Execution Flow Diagram
  - Input Processing
  - Error Handling
    - TDD Warning Patterns
    - Non-Blocking Warning Policy
    - Error Handling Quick Reference
  - Related Commands
  - Next Steps Decision Table
    - TDD Workflow State Transitions

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
