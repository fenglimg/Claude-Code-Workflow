# Requirement (non-leaky): /ccw-debug

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/ccw-debug.md`

## Command Identity

- group: (none)
- name: ccw-debug
- description: Debug coordinator - analyze issue, select debug strategy, execute debug workflow in main process
- argument-hint: [--mode cli|debug|test|bidirectional] [--yes|-y] \"bug description\"
- allowed-tools: Skill(*), TodoWrite(*), AskUserQuestion(*), Read(*), Bash(*)

## Structure Hints (Headings Only)

- CCW-Debug Command - Debug Coordinator
  - Core Concept: Debug Units (调试单元)
  - Execution Model
  - 5-Phase Workflow
    - Phase 1: Analyze Issue
      - Mode Detection (Priority Order)
    - Phase 1.5: Issue Clarification (if clarity < 2)
    - Phase 2: Select Debug Strategy & Build Command Chain
      - Command Chain Mapping
    - Phase 3: User Confirmation
    - Phase 4: Setup TODO Tracking & Status File
    - Phase 5: Execute Debug Chain
      - For Bidirectional Mode (Parallel Execution)
      - For Sequential Modes (cli, debug, test)
      - Error Handling Pattern
      - CLI Mode Escalation
  - Execution Flow Summary
  - Debug Pipeline Examples
  - State Management
    - Dual Tracking System
  - Key Design Principles
  - Usage
- Auto-select mode
- Explicit mode selection
- Auto mode (skip confirmations)
- Resume or escalate from previous session
  - Mode Selection Decision Tree

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
