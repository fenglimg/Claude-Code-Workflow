# Requirement (non-leaky): /memory:update-full

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/memory/update-full.md`

## Command Identity

- group: memory
- name: update-full
- description: Update all CLAUDE.md files using layer-based execution (Layer 3→1) with batched agents (4 modules/agent) and gemini→qwen→codex fallback, <20 modules uses direct parallel
- argument-hint: [--tool gemini|qwen|codex] [--path <directory>]
- allowed-tools: TBD

## Structure Hints (Headings Only)

- Full Documentation Update (/memory:update-full)
  - Overview
  - 3-Layer Architecture & Auto-Strategy Selection
    - Layer Definition & Strategy Assignment
    - Strategy Details
      - Multi-Layer Strategy (Layer 3 Only)
      - Single-Layer Strategy (Layers 1-2)
    - Example Flow
  - Core Execution Rules
  - Tool Fallback Hierarchy
  - Execution Phases
    - Phase 1: Discovery & Analysis
    - Phase 2: Plan Presentation
    - Phase 3A: Direct Execution (<20 modules)
    - Phase 3B: Agent Batch Execution (≥20 modules)
    - Phase 4: Safety Verification
  - Error Handling
  - Usage Examples
- Full project update (auto-strategy selection)
- Target specific directory
- Use specific tool
  - Key Advantages

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
