# Requirement (non-leaky): /memory:update-related

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/memory/update-related.md`

## Command Identity

- group: memory
- name: update-related
- description: Update CLAUDE.md for git-changed modules using batched agent execution (4 modules/agent) with gemini→qwen→codex fallback, <15 modules uses direct execution
- argument-hint: [--tool gemini|qwen|codex]
- allowed-tools: TBD

## Structure Hints (Headings Only)

- Related Documentation Update (/memory:update-related)
  - Overview
  - Core Rules
  - Tool Fallback Hierarchy
  - Phase 1: Change Detection & Analysis
  - Phase 2: Plan Presentation
  - Phase 3A: Direct Execution (<15 modules)
  - Phase 3B: Agent Batch Execution (≥15 modules)
    - Batching Strategy
    - Coordinator Orchestration
    - Batch Worker Prompt Template
  - Phase 4: Safety Verification
  - Execution Summary
  - Error Handling
  - Tool Reference
  - Usage Examples
- Daily development update
- After feature work with specific tool
- Code quality review after implementation
  - Key Advantages
  - Coordinator Checklist
  - Comparison with Full Update

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
