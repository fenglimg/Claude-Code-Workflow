# Requirement (non-leaky): /workflow:execute

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/execute.md`

## Command Identity

- group: workflow
- name: execute
- description: Coordinate agent execution for workflow tasks with automatic session discovery, parallel task processing, and status tracking
- argument-hint: [-y|--yes] [--resume-session=\"session-id\"] [--with-commit]
- allowed-tools: TBD

## Structure Hints (Headings Only)

- Workflow Execute Command
  - Overview
  - Usage
- Interactive mode (with confirmations)
- Auto mode (skip confirmations, use defaults)
- With auto-commit (commit after each task completion)
  - Auto Mode Defaults
  - Performance Optimization Strategy
  - Core Rules
  - Core Responsibilities
  - Execution Philosophy
  - Execution Process
  - Execution Lifecycle
    - Phase 1: Discovery
      - Step 1.1: Count Active Sessions
      - Step 1.2: Handle Session Selection
      - Step 1.3: Load Session Metadata
    - Phase 2: Planning Document Validation
    - Phase 3: TodoWrite Generation
- Update session status (idempotent - safe to run if already active)
    - Phase 4: Execution Strategy Selection & Task Execution
    - Phase 5: Completion
    - Post-Completion Expansion
  - Execution Strategy (IMPL_PLAN-Driven)
    - Strategy Priority
    - Execution Models
      - 1. Sequential Execution
      - 2. Parallel Execution
      - 3. Phased Execution
      - 4. Intelligent Fallback
    - Task Status Logic
  - TodoWrite Coordination
    - TodoWrite Rules (Unified)
    - TodoWrite Tool Usage
  - Agent Execution Pattern
    - Flow Control Execution
    - Agent Prompt Template
    - Agent Assignment Rules
  - Workflow File Structure Reference
  - Error Handling & Recovery
    - Common Errors & Recovery
    - Error Prevention
  - Auto-Commit Mode (--with-commit)
- 1. Read summary from .summaries/{task-id}-summary.md
- 2. Extract files from "Files Modified" section
- 3. Commit: git add <files> && git commit -m "{type}: {title} - {summary}"

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
