# Requirement (non-leaky): /issue:convert-to-plan

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/issue/convert-to-plan.md`

## Command Identity

- group: issue
- name: convert-to-plan
- description: Convert planning artifacts (lite-plan, workflow session, markdown) to issue solutions
- argument-hint: [-y|--yes] [--issue <id>] [--supplement] <SOURCE>
- allowed-tools: TodoWrite(*), Bash(*), Read(*), Write(*), Glob(*), AskUserQuestion(*)

## Structure Hints (Headings Only)

  - Auto Mode
- Issue Convert-to-Plan Command (/issue:convert-to-plan)
  - Overview
  - Quick Reference
- Convert lite-plan to new issue (auto-creates issue)
- Convert workflow session to existing issue
- Supplement existing solution with additional tasks
- Auto mode - skip confirmations
  - Command Options
  - Core Data Access Principle
  - Solution Schema Reference
  - Implementation
    - Phase 1: Parse Arguments & Detect Source Type
    - Phase 2: Extract Data Using Format-Specific Extractor
      - Extractor: Lite-Plan
      - Extractor: Workflow Session
      - Extractor: Markdown (AI-Assisted via Gemini)
      - Extractor: JSON File
    - Phase 3: Normalize Task IDs
    - Phase 4: Resolve Issue (Create or Find)
    - Phase 5: Generate Solution
    - Phase 6: Confirm & Persist
  - Conversion Summary
    - Tasks:
    - Phase 7: Summary
  - Done
    - Next Steps:
  - Error Handling
  - Related Commands

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
