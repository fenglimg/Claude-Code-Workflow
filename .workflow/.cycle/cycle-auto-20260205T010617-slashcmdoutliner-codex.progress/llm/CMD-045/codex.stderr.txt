Reading prompt from stdin...
OpenAI Codex v0.93.0 (research preview)
--------
workdir: C:\Project\Claude-Code-Workflow
model: gpt-5.2
provider: codex
approval: never
sandbox: danger-full-access
reasoning effort: high
reasoning summaries: auto
session id: 019c2c6a-1100-7940-994e-6b8bd58d0dc5
--------
user
Use the repo skill: slash-command-outliner (path: .codex/skills/slash-command-outliner).

Cycle: cycle-auto-20260205T010617-slashcmdoutliner-codex
Command: CMD-045

Input requirement doc (non-leaky): `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md`

Write the following output files (create directories as needed) under `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs`:
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md`

Hard rules (P0):
- Follow templates: .codex/skills/slash-command-outliner/templates/*
- Follow gates: .codex/skills/slash-command-outliner/specs/quality-gates.md
- Evidence tables MUST pass: node .codex/skills/slash-command-outliner/scripts/verify-evidence.js
- Never label a pointer as Existing unless it is verifiable in the repo now.
- For ANY pointer row, provide dual-source evidence:
  - docs: .claude/commands/**.md / <real heading text>
  - ts: ccw/src/** / <literal anchor string present in file>
- Avoid placeholders like TBD/N/A in evidence rows; if unsure, mark as Planned and add Verify steps.

Keep the written files concise; do not write extra files unless necessary.

deprecated: `[features].web_search_request` is deprecated. Use `web_search` instead.
  Set `web_search` to `"live"`, `"cached"`, or `"disabled"` in config.toml.
mcp: ace-tool starting
mcp: ccw-tools starting
mcp: exa starting
mcp: ccw-tools ready
mcp: ace-tool ready
mcp: exa ready
mcp startup: ready: ccw-tools, ace-tool, exa

thinking
**Organizing task requirements**

I‚Äôm planning to list out steps to print the requirements document using a shell command. It seems like using search_context to look for "slash-command-outliner templates spec.json" might not be necessary, so I'll skip that. I really want to keep things straightforward and focused, so I‚Äôll just proceed with the shell command for the requirements doc. Let‚Äôs keep the momentum going!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001>$null; Get-Content -Raw .codex/skills/slash-command-outliner/SKILL.md' in C:\Project\Claude-Code-Workflow succeeded in 303ms:
---
name: slash-command-outliner
description: Codex version of slash-command-outliner. Generate CCW-aligned slash command development outlines from a requirement/spec doc, validated via corpus-wide iteration and non-regression. Triggers on "slash command outliner", "slash ÂëΩ‰ª§Â§ßÁ∫≤", "slash ÂëΩ‰ª§ÁîüÊàêÂô®", "ÂëΩ‰ª§Â§ßÁ∫≤".
allowed-tools: Read, Write, AskUserQuestion, Task, Bash, TodoWrite, mcp__ace-tool__search_context
---

# Slash Command Outliner (Codex)

Input a **slash command requirement/spec document**. Output a **CCW-aligned, end-to-end development outline** (Slash MD outline + Agent MD outline) plus a **gap-report** that compares against reference implementations and CCW server/tooling corpus. Improve quality by iterating across **all** existing commands with **non-regression snapshots**.

This skill is designed to be **precise** (no fluff) and **stable** (non-regression gate).

## Canonical Workflow (Phases)

1) `phases/01-collect-spec.md`  
2) `phases/02-retrieve-and-rank-references.md`  
3) `phases/03-generate-outlines.md`  
4) `phases/04-gap-report-and-iterate.md`  
5) `phases/05-regression-and-closure.md`

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001>$null; Get-ChildItem -Recurse -File .codex/skills/slash-command-outliner/templates | Select-Object FullName' in C:\Project\Claude-Code-Workflow succeeded in 330ms:

[32;1mFullName[0m
[32;1m--------[0m
C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\templates\agent-outline.md
C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\templates\gap-report.md
C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\templates\slash-command-outline.md

Parameter format not correct - 65001>
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001>$null; Get-Content -Raw .codex/skills/slash-command-outliner/specs/quality-gates.md' in C:\Project\Claude-Code-Workflow succeeded in 304ms:
# Quality Gates (Non-regression First)

## P0 Gates (Must Pass)

P0 failure means ‚Äúnot CCW-aligned‚Äù and blocks completion.

1) **Frontmatter completeness**
   - `name`, `description`, `allowed-tools` must exist
   - `argument-hint` optional but recommended for non-trivial commands
2) **Allowed-tools correctness**
   - no tools outside the supported CCW set for the intended workflow
   - no missing tools required by the described behavior
3) **Core sections present**
   - at least: `Overview`, `Usage`, `Execution Process`, `Output/Artifacts`, `Error Handling`
4) **No broken artifact references**
   - referenced paths must be either created by the command or explicitly documented as pre-existing

5) **Implementation pointers must be evidence-based (Existing vs Planned)**
   - Every implementation pointer (file/module/CLI subcommand/tool entry) MUST be labeled:
     - `Existing`: verifiable in repo now
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001>$null; Get-Content -Raw .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md' in C:\Project\Claude-Code-Workflow succeeded in 323ms:
# Requirement (non-leaky): /workflow:review-cycle-fix

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/review-cycle-fix.md`

## Command Identity

- group: workflow
- name: review-cycle-fix
- description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
- argument-hint: <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
- allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)

## Structure Hints (Headings Only)

- Workflow Review-Cycle-Fix Command
  - Quick Start
- Fix from exported findings file (session-based path)
- Fix from review directory (auto-discovers latest export)
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001>$null; Get-Content -Raw .codex/skills/slash-command-outliner/scripts/verify-evidence.js' in C:\Project\Claude-Code-Workflow succeeded in 310ms:
import fs from 'node:fs';
import path from 'node:path';
import { fileURLToPath } from 'node:url';

export function usage() {
  console.log(
    [
      'Usage:',
      '  node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<path.md> [--file=<path2.md> ...]',
      '',
      'Behavior:',
      '  - Extracts evidence tables from markdown (gap-report and/or outline)',
      '  - Enforces evidence-based gates:',
      '    - Each row must label Status as Existing or Planned',
      '    - Evidence must include BOTH docs and ts anchors:',
      '      - docs: .claude/commands/**.md / <section heading>',
      '      - ts: ccw/src/** / <function|case|pattern>',
      '    - Existing rows must point to verifiable pointers (paths must exist when pointer looks like a path)',
      '',
      'Notes:',



thinking
**Evaluating pointer rows and evidence**

I need to make sure that for each pointer row, a TypeScript (TS) file exists with the exact anchor string. It‚Äôs possible that an implementation might not even exist yet, especially for new commands. Even for planned pointer rows in the evidence table, it seems I'll need both documentation and TS evidence regardless of their status. For those planned modifications, I can reference a similar existing TS implementation as evidence, focusing on patterns instead of existence while ensuring the docs reference aligns with the command documentation.
thinking
**Finding existing commands for evidence**

I need to identify existing commands with orchestrator, such as /workflow:review and /workflow:fix. I'll start by scanning the `.claude/commands/workflow` directory using either smart_search or shell commands, specifically `Get-ChildItem`. The guidelines require that the evidence be based on exact documentation headings. I‚Äôll pull that from the oracle document and also generate both spec.json and references.json, which may have templates. Running scripts like generate-outline.js looks like the simplest solution, but I need to ensure everything passes verify-evidence.js. The derive specifications seem crucial for producing the needed files.
thinking
**Inspecting output requirements**

The user wants the spec.json and references.json files in a specific location, and while I know the scripts might generate something, I need to adapt them accordingly. I should take a closer look at the templates and the scripts to ensure the output format is correct. I'll read through the templates and check how the scripts are being used to gather all necessary details for producing these files. Getting this right is key!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/templates/slash-command-outline.md' in C:\Project\Claude-Code-Workflow succeeded in 326ms:
---
name: {{command.name}}
description: {{command.description}}
argument-hint: "{{command.argument_hint}}"
allowed-tools: {{command.allowed_tools_csv}}
group: {{command.group}}
---

# {{command.title}}

## Overview

- Goal: {{intent.primary_user_value}}
- Command: `/{{command.group}}:{{command.name}}`

## Usage

```bash
/{{command.group}}:{{command.name}} {{command.usage_args}}
```
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/templates/agent-outline.md' in C:\Project\Claude-Code-Workflow succeeded in 320ms:
# Agent Outline: {{command.group}}:{{command.name}}

## Purpose

Implement and/or evolve the slash command according to CCW conventions with minimal regressions.

## Execution Model

- Default: incremental, testable changes
- Use ACE-tool to find existing patterns before adding new abstractions

## State & Artifacts

- Session folder (if used): `.workflow/...`
- Required outputs:
  - Slash MD (command doc)
  - Any scripts/modules referenced by the command
  - Validation notes / regression snapshots

## Tooling
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .claude/commands/workflow/review-cycle-fix.md' in C:\Project\Claude-Code-Workflow succeeded in 317ms:
---
name: review-cycle-fix
description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
---

# Workflow Review-Cycle-Fix Command

## Quick Start

```bash
# Fix from exported findings file (session-based path)
/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json

# Fix from review directory (auto-discovers latest export)
/workflow:review-cycle-fix .workflow/active/WFS-123/.review/

# Resume interrupted fix session
/workflow:review-cycle-fix --resume
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/templates/gap-report.md' in C:\Project\Claude-Code-Workflow succeeded in 315ms:
# Gap Report: {{command.group}}:{{command.name}}

## Reference

- Selected reference: {{reference.slash}} (`{{reference.file_path}}`)

## P0 Gaps (Must Fix)

{{gaps.p0}}

## P1 Gaps (Should Fix)

{{gaps.p1}}

## P2 Gaps (Optional)

{{gaps.p2}}

## Implementation Pointers (Evidence)


thinking
**Searching for command registration**

I need to figure out how commands are registered. My plan is to use the mcp__ace-tool__search_context to find the code that handles slash command invocation. I‚Äôll search for the string "review-cycle-fix" in the repository as well as check the command documentation. I‚Äôm thinking of looking for TS anchors and similar existing commands too. Let‚Äôs go ahead and search for "review-cycle-fix" and maybe "workflow:" to get started!
tool ace-tool.search_context({"project_root_path":"C:/Project/Claude-Code-Workflow","query":"Find any implementation of the slash command /workflow:review-cycle-fix or the string \"review-cycle-fix\" in code and docs. Also locate where workflow slash commands are registered and dispatched. Keywords: review-cycle-fix, /workflow:, commands registry, dispatch, .claude/commands/workflow"})
ace-tool.search_context({"project_root_path":"C:/Project/Claude-Code-Workflow","query":"Find any implementation of the slash command /workflow:review-cycle-fix or the string \"review-cycle-fix\" in code and docs. Also locate where workflow slash commands are registered and dispatched. Keywords: review-cycle-fix, /workflow:, commands registry, dispatch, .claude/commands/workflow"}) success in 6.57s:
{
  "content": [
    {
      "text": "The following code sections were retrieved:\nPath: .claude\\commands\\workflow\\review-cycle-fix.md\n     1\t---\r\n     2\tname: review-cycle-fix\r\n     3\tdescription: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.\r\n     4\targument-hint: \"<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]\"\r\n     5\tallowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)\r\n     6\t---\r\n     7\t\r\n     8\t# Workflow Review-Cycle-Fix Command\r\n     9\t\r\n    10\t## Quick Start\r\n    11\t\r\n    12\t```bash\r\n    13\t# Fix from exported findings file (session-based path)\r\n    14\t/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json\r\n    15\t\r\n    16\t# Fix from review directory (auto-discovers latest export)\r\n    17\t/workflow:review-cycle-fix .workflow/active/WFS-123/.review/\r\n    18\t\r\n    19\t# Resume interrupted fix session\r\n    20\t/workflow:review-cycle-fix --resume\r\n    21\t\r\n    22\t# Custom max retry attempts per finding\r\n    23\t/workflow:review-cycle-fix .workflow/active/WFS-123/.review/ --max-iterations=5\r\n    24\t\r\n    25\t# Custom batch size for parallel planning (default: 5 findings per batch)\r\n    26\t/workflow:review-cycle-fix .workflow/active/WFS-123/.review/ --batch-size=3\r\n    27\t```\r\n    28\t\r\n    29\t**Fix Source**: Exported findings from review cycle dashboard\r\n    30\t**Output Directory**: `{review-dir}/fixes/{fix-session-id}/` (within session .review/)\r\n    31\t**Default Max Iterations**: 3 (per finding, adjustable)\r\n    32\t**Default Batch Size**: 5 (findings per planning batch, adjustable)\r\n    33\t**Max Parallel Agents**: 10 (concurrent planning agents)\r\n    34\t**CLI Tools**: @cli-planning-agent (planning), @cli-execute-agent (fixing)\r\n    35\t\r\n    36\t## What & Why\r\n...\n    40\t\r\n    41\t**Fix Process**:\r\n    42\t- **Batching Phase (1.5)**: Orchestrator groups findings by file+dimension similarity, creates batches\r\n    43\t- **Planning Phase (2)**: Up to 10 agents plan batches in parallel, generate partial plans, orchestrator aggregates\r\n    44\t- **Execution Phase (3)**: Main orchestrator coordinates agents per aggregated timeline stages\r\n    45\t- **Parallel Efficiency**: Customizable batch size (default: 5), MAX_PARALLEL=10 agents\r\n    46\t- **No rigid structure**: Adapts to task requirements, not bound to fixed JSON format\r\n    47\t\r\n    48\t**vs Manual Fixing**:\r\n    49\t- **Manual**: Developer reviews findings one-by-one, fixes sequentially\r\n    50\t- **Automated**: AI groups related issues, multiple agents plan in parallel, executes in optimal parallel/serial order with automatic test verification\r\n...\n    58\t\r\n    59\t### Orchestrator Boundary (CRITICAL)\r\n    60\t- **ONLY command** for automated review finding fixes\r\n    61\t- Manages: Intelligent batching (Phase 1.5), parallel planning coordination (launch N agents), plan aggregation, stage-based execution, agent scheduling, progress tracking\r\n    62\t- Delegates: Batch planning to @cli-planning-agent, fix execution to @cli-execute-agent\r\n    63\t\r\n    64\t\r\n    65\t### Execution Flow\r\n    66\t\r\n    67\t```\r\n    68\tPhase 1: Discovery & Initialization\r\n    69\t   ‚îî‚îÄ Validate export file, create fix session structure, initialize state files\r\n    70\t\r\n    71\tPhase 1.5: Intelligent Grouping & Batching\r\n    72\t   ‚îú‚îÄ Analyze findings metadata (file, dimension, severity)\r\n    73\t   ‚îú‚îÄ Group by semantic similarity (file proximity + dimension affinity)\r\n    74\t   ‚îú‚îÄ Create batches respecting --batch-size (default: 5)\r\n    75\t   ‚îî‚îÄ Output: Finding batches for parallel planning\r\n...\n   186\t\r\n   187\t// 2. Run tests\r\n   188\tconst result = await runTests(testPattern);\r\n   189\t\r\n   190\t// 3. Evaluate\r\n   191\tif (result.passRate < 100%) {\r\n   192\t  // Rollback\r\n   193\t  await gitCheckout(finding.file);\r\n   194\t\r\n   195\t  // Retry with failure context\r\n   196\t  if (attempts < maxIterations) {\r\n   197\t    const fixContext = analyzeFailure(result.stderr);\r\n   198\t    regenerateFix(finding, fixContext);\r\n   199\t    retry();\r\n   200\t  } else {\r\n   201\t    markFailed(finding.id);\r\n   202\t  }\r\n   203\t} else {\r\n   204\t  // Commit\r\n   205\t  await gitCommit(`Fix: ${finding.title} [${finding.id}]`);\r\n   206\t  markFixed(finding.id);\r\n   207\t}\r\n   208\t```\r\n   209\t\r\n   210\t**Pass Criteria**: 100% test pass rate (no partial fixes)\r\n   211\t\r\n   212\t## Core Responsibilities\r\n   213\t\r\n   214\t### Orchestrator\r\n   215\t\r\n   216\t**Phase 1: Discovery & Initialization**\r\n   217\t- Input validation: Check export file exists and is valid JSON\r\n   218\t- Auto-discovery: If review-dir provided, find latest `*-fix-export.json`\r\n   219\t- Session creation: Generate fix-session-id (`fix-{timestamp}`)\r\n   220\t- Directory structure: Create `{review-dir}/fixes/{fix-session-id}/` with subdirectories\r\n   221\t- State files: Initialize active-fix-session.json (session marker)\r\n   222\t- TodoWrite initialization: Set up 5-phase tracking (including Phase 1.5)\r\n...\n   290\t\r\n   291\t**File Producers**:\r\n   292\t- **Orchestrator**: Batches findings (Phase 1.5), aggregates partial plans ‚Üí `fix-plan.json` (Phase 2), launches parallel planning agents\r\n   293\t- **Planning Agents (N)**: Each outputs `partial-plan-{batch-id}.json` + initializes `fix-progress-*.json` for assigned groups\r\n   294\t- **Execution Agents (M)**: Update assigned `fix-progress-{N}.json` in real-time\r\n   295\t\r\n   296\t\r\n   297\t### Agent Invocation Template\r\n   298\t\r\n   299\t**Phase 1.5: Intelligent Batching** (Orchestrator):\r\n   300\t```javascript\r\n   301\t// Load findings\r\n   302\tconst findings = JSON.parse(Read(exportFile));\r\n   303\tconst batchSize = flags.batchSize || 5;\r\n   304\t\r\n   305\t// Semantic similarity analysis: group by file+dimension\r\n   306\tconst batches = [];\r\n   307\tconst grouped = new Map(); // key: \"${file}:${dimension}\"\r\n...\n   494\t```\r\n   495\t\r\n   496\t**Execution Agent** (per group):\r\n   497\t```javascript\r\n   498\tTask({\r\n   499\t  subagent_type: \"cli-execute-agent\",\r\n   500\t  description: `Fix ${group.findings.length} issues: ${group.group_name}`,\r\n   501\t  prompt: `\r\n   502\t## Task Objective\r\n   503\tExecute fixes for code review findings in group ${group.group_id}. Update progress file in real-time with flow control tracking.\r\n   504\t\r\n   505\t## Assignment\r\n   506\t- Group ID: ${group.group_id}\r\n   507\t- Group Name: ${group.group_name}\r\n   508\t- Progress File: ${sessionDir}/${group.progress_file}\r\n   509\t- Findings Count: ${group.findings.length}\r\n   510\t- Max Iterations: ${maxIterations} (per finding)\r\n   511\t\r\n   512\t## Fix Strategy\r\n   513\t${JSON.stringify(group.fix_strategy, null, 2)}\r\n   514\t\r\n   515\t## Risk Assessment\r\n   516\t${JSON.stringify(group.risk_assessment, null, 2)}\r\n   517\t\r\n   518\t## Execution Flow\r\n   519\t\r\n   520\t### Initialization (Before Starting)\r\n...\n\nPath: .claude\\commands\\workflow\\test-cycle-execute.md\n...\n   131\t\r\n   132\t### @cli-planning-agent\r\n   133\t- Execute CLI analysis with bug diagnosis template\r\n   134\t- Parse output for root causes and fix strategy\r\n   135\t- Generate IMPL-fix-N.json task definition\r\n   136\t- Detect affected tests for progressive testing\r\n   137\t- Save: analysis.md, cli-output.txt\r\n   138\t\r\n   139\t### @test-fix-agent\r\n   140\t- Execute tests, save results to test-results.json\r\n   141\t- Apply fixes from task.context.fix_strategy\r\n   142\t- Assign criticality to failures\r\n   143\t- Update task status\r\n   144\t\r\n   145\t## Reference\r\n   146\t\r\n   147\t### CLI Tool Configuration\r\n   148\t\r\n   149\t**Fallback Chain**: Gemini ‚Üí Qwen ‚Üí Codex\r\n   150\t**Template**: `~/.claude/workflows/cli-templates/prompts/analysis/01-diagnose-bug-root-cause.txt`\r\n   151\t**Timeout**: 40min (2400000ms)\r\n...\n\nPath: .claude\\commands\\workflow\\review-module-cycle.md\n     1\t---\r\n     2\tname: review-module-cycle\r\n     3\tdescription: Independent multi-dimensional code review for specified modules/files. Analyzes specific code paths across 7 dimensions with hybrid parallel-iterative execution, independent of workflow sessions.\r\n     4\targument-hint: \"<path-pattern> [--dimensions=security,architecture,...] [--max-iterations=N]\"\r\n     5\tallowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*)\r\n     6\t---\r\n     7\t\r\n     8\t# Workflow Review-Module-Cycle Command\r\n     9\t\r\n    10\t## Quick Start\r\n    11\t\r\n    12\t```bash\r\n    13\t# Review specific module (all 7 dimensions)\r\n    14\t/workflow:review-module-cycle src/auth/**\r\n    15\t\r\n    16\t# Review multiple modules\r\n    17\t/workflow:review-module-cycle src/auth/**,src/payment/**\r\n    18\t\r\n    19\t# Review with custom dimensions\r\n    20\t/workflow:review-module-cycle src/payment/** --dimensions=security,architecture,quality\r\n...\n   765\t\r\n   766\t# Step 2: Run automated fixes using dimension findings\r\n   767\t/workflow:review-cycle-fix .workflow/active/WFS-{session-id}/.review/\r\n   768\t```\r\n   769\t\r\n   770\tSee `/workflow:review-cycle-fix` for automated fixing with smart grouping, parallel execution, and test verification.\r\n   771\t\r\n...\n\nPath: .claude\\commands\\workflow\\lite-fix.md#chunk1of2\n     1\t---\r\n     2\tname: lite-fix\r\n     3\tdescription: Lightweight bug diagnosis and fix workflow with intelligent severity assessment and optional hotfix mode for production incidents\r\n     4\targument-hint: \"[-y|--yes] [--hotfix] \\\"bug description or issue reference\\\"\"\r\n     5\tallowed-tools: TodoWrite(*), Task(*), Skill(*), AskUserQuestion(*)\r\n     6\t---\r\n     7\t\r\n     8\t# Workflow Lite-Fix Command (/workflow:lite-fix)\r\n     9\t\r\n    10\t## Overview\r\n    11\t\r\n    12\tIntelligent lightweight bug fixing command with dynamic workflow adaptation based on severity assessment. Focuses on diagnosis phases (root cause analysis, impact assessment, fix planning, confirmation) and delegates execution to `/workflow:lite-execute`.\r\n...\n\nPath: .claude\\commands\\workflow\\test-fix-gen.md\n...\n    76\t\r\n    77\tPhase 1: Create Test Session\r\n    78\t   ‚îî‚îÄ /workflow:session:start --type test --new \"structured-description\"\r\n    79\t      ‚îî‚îÄ Output: testSessionId (WFS-test-xxx)\r\n    80\t\r\n    81\tPhase 2: Gather Test Context\r\n    82\t   ‚îú‚îÄ MODE=session ‚Üí /workflow:tools:test-context-gather --session testSessionId\r\n    83\t   ‚îî‚îÄ MODE=prompt  ‚Üí /workflow:tools:context-gather --session testSessionId \"description\"\r\n    84\t      ‚îî‚îÄ Output: contextPath (context-package.json)\r\n    85\t\r\n    86\tPhase 3: Test Generation Analysis\r\n    87\t   ‚îî‚îÄ /workflow:tools:test-concept-enhanced --session testSessionId --context contextPath\r\n    88\t      ‚îî‚îÄ Output: TEST_ANALYSIS_RESULTS.md (L0-L3 requirements)\r\n    89\t\r\n    90\tPhase 4: Generate Test Tasks\r\n    91\t   ‚îî‚îÄ /workflow:tools:test-task-generate --session testSessionId\r\n    92\t      ‚îî‚îÄ Output: IMPL_PLAN.md, IMPL-*.json (4+ tasks), TODO_LIST.md\r\n...\n   444\t\r\n   445\t```bash\r\n   446\t# Session Mode - test validation for completed implementation\r\n   447\t/workflow:test-fix-gen WFS-user-auth-v2\r\n   448\t\r\n   449\t# Prompt Mode - text description\r\n   450\t/workflow:test-fix-gen \"Test the user authentication API endpoints in src/auth/api.ts\"\r\n   451\t\r\n   452\t# Prompt Mode - file reference\r\n   453\t/workflow:test-fix-gen ./docs/api-requirements.md\r\n   454\t\r\n   455\t# With CLI tool preference (semantic detection)\r\n   456\t/workflow:test-fix-gen \"Test user registration, use Codex for automated fixes\"\r\n   457\t```\r\n   458\t\r\n   459\t---\r\n   460\t\r\n   461\t## Related Commands\r\n   462\t\r\n   463\t**Prerequisite Commands**:\r\n   464\t- `/workflow:plan` or `/workflow:execute` - Complete implementation (Session Mode)\r\n   465\t- None for Prompt Mode\r\n   466\t\r\n   467\t**Called by This Command** (5 phases):\r\n   468\t- `/workflow:session:start` - Phase 1: Create test workflow session\r\n   469\t- `/workflow:tools:test-context-gather` - Phase 2 (Session Mode): Analyze test coverage\r\n   470\t- `/workflow:tools:context-gather` - Phase 2 (Prompt Mode): Analyze codebase\r\n   471\t- `/workflow:tools:test-concept-enhanced` - Phase 3: Generate test requirements with Gemini\r\n   472\t- `/workflow:tools:test-task-generate` - Phase 4: Generate test task JSONs via action-planning-agent\r\n   473\t\r\n   474\t**Follow-up Commands**:\r\n   475\t- `/workflow:status` - Review generated tasks\r\n   476\t- `/workflow:test-cycle-execute` - Execute test workflow (REQUIRED next step)\r\n   477\t- `/workflow:execute` - Alternative: Standard task execution\r\n...\n\nPath: ccw\\src\\tools\\command-registry.ts\n...\n   118\t\r\n   119\t  /**\r\n   120\t   * Get single command metadata\r\n   121\t   * @param commandName Command name (e.g., \"lite-plan\" or \"/workflow:lite-plan\")\r\n   122\t   * @returns Command metadata or null\r\n   123\t   */\r\n   124\t  public getCommand(commandName: string): CommandMetadata | null {\r\n   125\t    if (!this.commandDir) {\r\n   126\t      console.error('ERROR: ~/.claude/commands/workflow directory not found');\r\n   127\t      return null;\r\n   128\t    }\r\n   129\t\r\n   130\t    // Normalize command name\r\n   131\t    const normalized = commandName.startsWith('/workflow:')\r\n   132\t      ? commandName.substring('/workflow:'.length)\r\n   133\t      : commandName;\r\n   134\t\r\n   135\t    // Check cache\r\n   136\t    const cached = this.cache.get(normalized);\r\n   137\t    if (cached) {\r\n   138\t      return cached;\r\n   139\t    }\r\n   140\t\r\n   141\t    // Read command file\r\n   142\t    const filePath = join(this.commandDir, `${normalized}.md`);\r\n   143\t    if (!existsSync(filePath)) {\r\n   144\t      return null;\r\n   145\t    }\r\n...\n   208\t\r\n   209\t    try {\r\n   210\t      const files = readdirSync(this.commandDir);\r\n   211\t\r\n   212\t      for (const file of files) {\r\n   213\t        // Skip _disabled directory\r\n   214\t        if (file === '_disabled') continue;\r\n   215\t\r\n   216\t        if (!file.endsWith('.md')) continue;\r\n   217\t\r\n   218\t        const filePath = join(this.commandDir, file);\r\n   219\t        const stat = statSync(filePath);\r\n   220\t\r\n   221\t        if (stat.isDirectory()) continue;\r\n   222\t\r\n   223\t        try {\r\n   224\t          const content = readFileSync(filePath, 'utf-8');\r\n   225\t          const header = this.parseYamlHeader(content);\r\n   226\t\r\n   227\t          if (header && header.name) {\r\n   228\t            const commandName = `/workflow:${header.name}`;\r\n   229\t            result.set(commandName, {\r\n   230\t              name: header.name,\r\n   231\t              description: header.description || ''\r\n   232\t            });\r\n   233\t          }\r\n   234\t        } catch (error) {\r\n   235\t          // Skip files that fail to read\r\n   236\t          continue;\r\n   237\t        }\r\n   238\t      }\r\n   239\t    } catch (error) {\r\n   240\t      // Return empty map if directory read fails\r\n   241\t      return result;\r\n   242\t    }\r\n   243\t\r\n   244\t    return result;\r\n   245\t  }\r\n...\n\nPath: ccw\\src\\core\\routes\\skills-routes.ts#chunk1of2\n...\n   726\t\r\n   727\t    // Create onOutput callback for real-time streaming\r\n   728\t    const onOutput = broadcastToClients\r\n   729\t      ? (unit: import('../../tools/cli-output-converter.js').CliOutputUnit) => {\r\n   730\t          // CliOutputUnit handler: use SmartContentFormatter for intelligent formatting (never returns null)\r\n   731\t          const content = SmartContentFormatter.format(unit.content, unit.type);\r\n   732\t          broadcastToClients({\r\n   733\t            type: 'CLI_OUTPUT',\r\n   734\t            payload: {\r\n   735\t              executionId,\r\n   736\t              chunkType: unit.type,\r\n   737\t              data: content\r\n   738\t            }\r\n   739\t          });\r\n   740\t        }\r\n   741\t      : undefined;\r\n   742\t\r\n   743\t    // Execute CLI tool (Claude) with write mode\r\n   744\t    const startTime = Date.now();\r\n   745\t    const result = await executeCliTool({\r\n   746\t      tool: 'claude',\r\n   747\t      prompt,\r\n   748\t      mode: 'write',\r\n   749\t      cd: baseDir,\r\n   750\t      timeout: 600000, // 10 minutes\r\n   751\t      category: 'internal',\r\n   752\t      id: executionId\r\n   753\t    }, onOutput);\r\n...\n\nPath: .claude\\commands\\workflow\\review-session-cycle.md\n...\n   776\t\r\n   777\t# Step 2: Run automated fixes using dimension findings\r\n   778\t/workflow:review-cycle-fix .workflow/active/WFS-{session-id}/.review/\r\n   779\t```\r\n   780\t\r\n   781\tSee `/workflow:review-cycle-fix` for automated fixing with smart grouping, parallel execution, and test verification.\r\n   782\t\r\n...\n\nPath: .claude\\skills\\slash-command-outliner\\scripts\\llm-regress-all.js\n...\n   306\t\n   307\t  for (const c of runList) {\n   308\t    processed += 1;\n   309\t    const cmdId = cmdIdFromOrdinal(c.ordinal);\n   310\t    const reqRel = toPosixPath(path.relative(repoRoot, path.join(reqDir, `${cmdId}.requirements.md`)));\n   311\t    if (!fileExists(repoRoot, reqRel)) {\n   312\t      c.llm = c.llm || {};\n   313\t      c.llm.status = 'failed';\n   314\t      c.llm.last_error = `missing requirement doc: ${reqRel}`;\n   315\t      failed += 1;\n   316\t      continue;\n   317\t    }\n   318\t\n   319\t    const runOutDirAbs = path.join(llmDir, cmdId, 'specs', 'outputs');\n   320\t    ensureDir(runOutDirAbs);\n   321\t    const outDirRel = toPosixPath(path.relative(repoRoot, runOutDirAbs));\n   322\t\n   323\t    const prompt = buildSkillPrompt({ cycleId, cmdId, reqRel, outDirRel }).replaceAll('{{SKILL_ROOT}}', skillRoot);\n   324\t    const llmRes = llmTool === 'codex'\n   325\t      ? runCodex({ prompt, model, timeoutMs })\n   326\t      : runClaude({ prompt, model, permissionMode, timeoutMs });\n...\n\nPath: .claude\\commands\\workflow\\execute.md\n...\n    11\t\r\n    12\t**Resume Mode**: When called with `--resume-session` flag, skips discovery phase and directly enters TodoWrite generation and agent execution for the specified session.\r\n    13\t\r\n    14\t## Usage\r\n    15\t\r\n    16\t```bash\r\n    17\t# Interactive mode (with confirmations)\r\n    18\t/workflow:execute\r\n    19\t/workflow:execute --resume-session=\"WFS-auth\"\r\n    20\t\r\n    21\t# Auto mode (skip confirmations, use defaults)\r\n    22\t/workflow:execute --yes\r\n    23\t/workflow:execute -y\r\n    24\t/workflow:execute -y --resume-session=\"WFS-auth\"\r\n    25\t\r\n    26\t# With auto-commit (commit after each task completion)\r\n    27\t/workflow:execute --with-commit\r\n    28\t/workflow:execute -y --with-commit\r\n    29\t/workflow:execute -y --with-commit --resume-session=\"WFS-auth\"\r\n    30\t```\r\n    31\t\r\n    32\t## Auto Mode Defaults\r\n...\n\nPath: .claude\\skills\\ccw-help\\index\\all-commands.json#chunk1of2\n...\n   442\t  {\r\n   443\t    \"name\": \"review-cycle-fix\",\r\n   444\t    \"command\": \"/workflow:review-cycle-fix\",\r\n   445\t    \"description\": \"Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.\",\r\n   446\t    \"arguments\": \"<export-file|review-dir> [--resume] [--max-iterations=N]\",\r\n   447\t    \"category\": \"workflow\",\r\n   448\t    \"subcategory\": null,\r\n   449\t    \"usage_scenario\": \"analysis\",\r\n   450\t    \"difficulty\": \"Intermediate\",\r\n   451\t    \"source\": \"../../../commands/workflow/review-cycle-fix.md\"\r\n   452\t  },\r\n...\n\nPath: ccw\\src\\core\\services\\flow-executor.ts#chunk1of2\n...\n   197\t\r\n   198\t  /**\r\n   199\t   * Execute a slash-command node\r\n   200\t   * Integrates with executeCliTool from cli-executor\r\n   201\t   */\r\n   202\t  private async runSlashCommand(node: FlowNode): Promise<NodeResult> {\r\n   203\t    const data = node.data as SlashCommandNodeData;\r\n   204\t\r\n   205\t    // Interpolate command and args\r\n   206\t    const command = interpolate(data.command, this.context.variables);\r\n   207\t    const args = data.args ? interpolate(data.args, this.context.variables) : '';\r\n   208\t    const contextHint = data.contextHint ? interpolate(data.contextHint, this.context.variables) : '';\r\n   209\t\r\n   210\t    // Build prompt: combine command, args, and context hint\r\n   211\t    let prompt = command;\r\n   212\t    if (args) {\r\n   213\t      prompt += ` ${args}`;\r\n   214\t    }\r\n   215\t    if (contextHint) {\r\n   216\t      prompt = `${contextHint}\\n\\n${prompt}`;\r\n   217\t    }\r\n...\n\nPath: .claude\\commands\\ccw.md\n...\n   259\t\r\n   260\t    'review-cycle-fix': [\r\n   261\t      // Unit: Code Review„Äêreview-session-cycle ‚Üí review-cycle-fix„Äë\r\n   262\t      { cmd: '/workflow:review-session-cycle', args: '', unit: 'code-review' },\r\n   263\t      { cmd: '/workflow:review-cycle-fix', args: '', unit: 'code-review' },\r\n   264\t      // Unit: Test Validation„Äêtest-fix-gen ‚Üí test-cycle-execute„Äë\r\n   265\t      { cmd: '/workflow:test-fix-gen', args: '', unit: 'test-validation' },\r\n   266\t      { cmd: '/workflow:test-cycle-execute', args: '', unit: 'test-validation' }\r\n   267\t    ],\r\n   268\t\r\n   269\t    'ui': [\r\n   270\t      { cmd: '/workflow:ui-design:explore-auto', args: `\"${analysis.goal}\"` },\r\n   271\t      // Unit: Planning + Execution„Äêplan ‚Üí execute„Äë\r\n   272\t      { cmd: '/workflow:plan', args: '', unit: 'plan-execute' },\r\n   273\t      { cmd: '/workflow:execute', args: '', unit: 'plan-execute' }\r\n   274\t    ],\r\n...\n\n",
      "type": "text"
    }
  ]
}
tool ace-tool.search_context({"project_root_path":"C:/Project/Claude-Code-Workflow","query":"Locate TypeScript code under ccw/src that loads, indexes, or validates .claude/commands markdown files (e.g., references to '.claude/commands', 'commandsDir', 'markdown', 'frontmatter', 'allowed-tools'). Also find command registry and help index generation. Keywords: .claude/commands, frontmatter, allowed-tools, command docs, markdown parser, all-commands.json"})
ace-tool.search_context({"project_root_path":"C:/Project/Claude-Code-Workflow","query":"Locate TypeScript code under ccw/src that loads, indexes, or validates .claude/commands markdown files (e.g., references to '.claude/commands', 'commandsDir', 'markdown', 'frontmatter', 'allowed-tools'). Also find command registry and help index generation. Keywords: .claude/commands, frontmatter, allowed-tools, command docs, markdown parser, all-commands.json"}) success in 6.03s:
{
  "content": [
    {
      "text": "The following code sections were retrieved:\nPath: .claude\\commands\\ccw-coordinator.md#chunk2of2\n...\n    65\t\r\n    66\t```javascript\r\n    67\timport { CommandRegistry } from 'ccw/tools/command-registry';\r\n    68\t\r\n    69\tconst registry = new CommandRegistry();\r\n    70\t\r\n    71\t// Get all commands\r\n    72\tconst allCommands = registry.getAllCommandsSummary();\r\n    73\t// Map<\"/workflow:lite-plan\" => {name, description}>\r\n    74\t\r\n    75\t// Get categorized\r\n    76\tconst byCategory = registry.getAllCommandsByCategory();\r\n    77\t// {planning, execution, testing, review, other}\r\n    78\t\r\n    79\t// Get single command metadata\r\n    80\tconst cmd = registry.getCommand('lite-plan');\r\n    81\t// {name, command, description, argumentHint, allowedTools, filePath}\r\n    82\t```\r\n    83\t\r\n    84\t## Universal Prompt Template\r\n    85\t\r\n    86\t### Standard Format\r\n    87\t\r\n    88\t```bash\r\n    89\tccw cli -p \"PROMPT_CONTENT\" --tool <tool> --mode <mode>\r\n    90\t```\r\n    91\t\r\n    92\t### Prompt Content Template\r\n    93\t\r\n    94\t```\r\n    95\t/workflow:<command> -y <command_parameters>\r\n    96\t\r\n    97\tTask: <task_description>\r\n...\n\nPath: ccw\\src\\tools\\command-registry.ts\n     1\t/**\r\n     2\t * Command Registry Tool\r\n     3\t *\r\n     4\t * Features:\r\n     5\t * 1. Scan and parse YAML headers from command files\r\n     6\t * 2. Read from global ~/.claude/commands/workflow directory\r\n     7\t * 3. Support on-demand extraction (not full scan)\r\n     8\t * 4. Cache parsed metadata for performance\r\n     9\t */\r\n    10\t\r\n    11\timport { existsSync, readdirSync, readFileSync, statSync } from 'fs';\r\n    12\timport { join } from 'path';\r\n    13\timport { homedir } from 'os';\r\n    14\t\r\n    15\texport interface CommandMetadata {\r\n    16\t  name: string;\r\n    17\t  command: string;\r\n    18\t  description: string;\r\n    19\t  argumentHint: string;\r\n    20\t  allowedTools: string[];\r\n    21\t  filePath: string;\r\n    22\t  group?: string;\r\n    23\t}\r\n    24\t\r\n    25\texport interface CommandSummary {\r\n    26\t  name: string;\r\n    27\t  description: string;\r\n    28\t}\r\n    29\t\r\n    30\texport class CommandRegistry {\r\n    31\t  private commandDir: string | null;\r\n    32\t  private cache: Map<string, CommandMetadata>;\r\n    33\t\r\n    34\t  constructor(commandDir?: string) {\r\n    35\t    this.cache = new Map();\r\n    36\t\r\n    37\t    if (commandDir) {\r\n    38\t      this.commandDir = commandDir;\r\n    39\t    } else {\r\n    40\t      this.commandDir = this.findCommandDir();\r\n    41\t    }\r\n    42\t  }\r\n    43\t\r\n    44\t  /**\r\n    45\t   * Auto-detect ~/.claude/commands/workflow directory\r\n    46\t   */\r\n    47\t  private findCommandDir(): string | null {\r\n    48\t    // Try relative to current working directory\r\n    49\t    const relativePath = join('.claude', 'commands', 'workflow');\r\n    50\t    if (existsSync(relativePath)) {\r\n    51\t      return relativePath;\r\n    52\t    }\r\n    53\t\r\n    54\t    // Try user home directory\r\n    55\t    const homeDir = homedir();\r\n    56\t    const homeCommandDir = join(homeDir, '.claude', 'commands', 'workflow');\r\n    57\t    if (existsSync(homeCommandDir)) {\r\n    58\t      return homeCommandDir;\r\n    59\t    }\r\n    60\t\r\n    61\t    return null;\r\n    62\t  }\r\n    63\t\r\n    64\t  /**\r\n    65\t   * Parse YAML header (simplified version)\r\n    66\t   *\r\n    67\t   * Limitations:\r\n    68\t   * - Only supports simple key: value pairs (single-line values)\r\n    69\t   * - No support for multi-line values, nested objects, complex lists\r\n    70\t   * - allowed-tools field converts comma-separated strings to arrays\r\n    71\t   */\r\n    72\t  private parseYamlHeader(content: string): Record<string, any> | null {\r\n    73\t    // Handle Windows line endings (\\r\\n)\r\n    74\t    const match = content.match(/^---[\\r\\n]+([\\s\\S]*?)[\\r\\n]+---/);\r\n    75\t    if (!match) return null;\r\n    76\t\r\n    77\t    const yamlContent = match[1];\r\n    78\t    const result: Record<string, any> = {};\r\n...\n   118\t\r\n   119\t  /**\r\n   120\t   * Get single command metadata\r\n   121\t   * @param commandName Command name (e.g., \"lite-plan\" or \"/workflow:lite-plan\")\r\n   122\t   * @returns Command metadata or null\r\n   123\t   */\r\n   124\t  public getCommand(commandName: string): CommandMetadata | null {\r\n   125\t    if (!this.commandDir) {\r\n   126\t      console.error('ERROR: ~/.claude/commands/workflow directory not found');\r\n   127\t      return null;\r\n   128\t    }\r\n   129\t\r\n   130\t    // Normalize command name\r\n   131\t    const normalized = commandName.startsWith('/workflow:')\r\n   132\t      ? commandName.substring('/workflow:'.length)\r\n   133\t      : commandName;\r\n   134\t\r\n   135\t    // Check cache\r\n   136\t    const cached = this.cache.get(normalized);\r\n   137\t    if (cached) {\r\n   138\t      return cached;\r\n   139\t    }\r\n   140\t\r\n   141\t    // Read command file\r\n   142\t    const filePath = join(this.commandDir, `${normalized}.md`);\r\n   143\t    if (!existsSync(filePath)) {\r\n   144\t      return null;\r\n   145\t    }\r\n   146\t\r\n   147\t    try {\r\n   148\t      const content = readFileSync(filePath, 'utf-8');\r\n   149\t      const header = this.parseYamlHeader(content);\r\n   150\t\r\n   151\t      if (header && header.name) {\r\n   152\t        const toolsStr = header['allowed-tools'] || '';\r\n   153\t        const allowedTools = toolsStr\r\n   154\t          .split(',')\r\n   155\t          .map((t: string) => t.trim())\r\n   156\t          .filter((t: string) => t);\r\n   157\t\r\n   158\t        const result: CommandMetadata = {\r\n   159\t          name: header.name,\r\n   160\t          command: `/workflow:${header.name}`,\r\n   161\t          description: header.description || '',\r\n   162\t          argumentHint: header['argument-hint'] || '',\r\n   163\t          allowedTools: allowedTools,\r\n   164\t          filePath: filePath,\r\n   165\t          group: header.group || undefined\r\n   166\t        };\r\n   167\t\r\n   168\t        // Cache result\r\n   169\t        this.cache.set(normalized, result);\r\n   170\t        return result;\r\n   171\t      }\r\n   172\t    } catch (error) {\r\n   173\t      const err = error as Error;\r\n   174\t      console.error(`Failed to read command ${filePath}:`, err.message);\r\n   175\t    }\r\n   176\t\r\n   177\t    return null;\r\n   178\t  }\r\n...\n   208\t\r\n   209\t    try {\r\n   210\t      const files = readdirSync(this.commandDir);\r\n   211\t\r\n   212\t      for (const file of files) {\r\n   213\t        // Skip _disabled directory\r\n   214\t        if (file === '_disabled') continue;\r\n   215\t\r\n   216\t        if (!file.endsWith('.md')) continue;\r\n   217\t\r\n   218\t        const filePath = join(this.commandDir, file);\r\n   219\t        const stat = statSync(filePath);\r\n   220\t\r\n   221\t        if (stat.isDirectory()) continue;\r\n   222\t\r\n   223\t        try {\r\n   224\t          const content = readFileSync(filePath, 'utf-8');\r\n   225\t          const header = this.parseYamlHeader(content);\r\n   226\t\r\n   227\t          if (header && header.name) {\r\n   228\t            const commandName = `/workflow:${header.name}`;\r\n   229\t            result.set(commandName, {\r\n   230\t              name: header.name,\r\n   231\t              description: header.description || ''\r\n   232\t            });\r\n   233\t          }\r\n   234\t        } catch (error) {\r\n   235\t          // Skip files that fail to read\r\n   236\t          continue;\r\n   237\t        }\r\n   238\t      }\r\n   239\t    } catch (error) {\r\n   240\t      // Return empty map if directory read fails\r\n   241\t      return result;\r\n   242\t    }\r\n   243\t\r\n   244\t    return result;\r\n   245\t  }\r\n...\n   280\t\r\n   281\t  /**\r\n   282\t   * Convert to JSON for serialization\r\n   283\t   */\r\n   284\t  public toJSON(): Record<string, any> {\r\n   285\t    const result: Record<string, CommandMetadata> = {};\r\n   286\t    for (const [key, value] of this.cache) {\r\n   287\t      result[`/workflow:${key}`] = value;\r\n   288\t    }\r\n   289\t    return result;\r\n   290\t  }\r\n   291\t\r\n   292\t  /**\r\n   293\t   * Clear the command cache\r\n   294\t   * Use this to invalidate cached commands after enable/disable operations\r\n   295\t   * @returns void\r\n   296\t   */\r\n   297\t  public clearCache(): void {\r\n   298\t    this.cache.clear();\r\n   299\t  }\r\n   300\t}\r\n   301\t\r\n   302\t/**\r\n   303\t * Export function for direct usage\r\n   304\t */\r\n   305\texport function createCommandRegistry(commandDir?: string): CommandRegistry {\r\n   306\t  return new CommandRegistry(commandDir);\r\n   307\t}\r\n   308\t\r\n   309\t/**\r\n   310\t * Export function to get all commands\r\n   311\t */\r\n   312\texport function getAllCommandsSync(): Map<string, CommandSummary> {\r\n   313\t  const registry = new CommandRegistry();\r\n   314\t  return registry.getAllCommandsSummary();\r\n   315\t}\r\n...\n\nPath: .claude\\skills\\ccw-help\\scripts\\analyze_commands.py\n...\n    20\t\n    21\tdef parse_frontmatter(content: str) -> Dict[str, Any]:\n    22\t    \"\"\"Extract YAML frontmatter from markdown content.\"\"\"\n    23\t    frontmatter = {}\n    24\t    if content.startswith('---'):\n    25\t        lines = content.split('\\n')\n    26\t        for i, line in enumerate(lines[1:], 1):\n    27\t            if line.strip() == '---':\n    28\t                break\n    29\t            if ':' in line:\n    30\t                key, value = line.split(':', 1)\n    31\t                frontmatter[key.strip()] = value.strip().strip('\"')\n    32\t    return frontmatter\n    33\t\n    34\tdef categorize_command(file_path: Path) -> tuple:\n    35\t    \"\"\"Determine category and subcategory from file path.\"\"\"\n    36\t    parts = file_path.relative_to(COMMANDS_DIR).parts\n    37\t\n    38\t    if len(parts) == 1:\n    39\t        return \"general\", None\n    40\t\n    41\t    category = parts[0]  # cli, memory, task, workflow\n    42\t    subcategory = parts[1].replace('.md', '') if len(parts) > 2 else None\n    43\t\n    44\t    return category, subcategory\n...\n   269\t\n   270\t    print(f\"\\nAnalyzed {len(all_commands)} commands, {len(all_agents)} agents\")\n   271\t\n   272\t    # Generate index files\n   273\t    INDEX_DIR.mkdir(parents=True, exist_ok=True)\n   274\t\n   275\t    # 1. all-commands.json\n   276\t    all_commands_path = INDEX_DIR / \"all-commands.json\"\n   277\t    with open(all_commands_path, 'w', encoding='utf-8') as f:\n   278\t        json.dump(all_commands, f, indent=2, ensure_ascii=False)\n   279\t    print(f\"\\nOK Generated {all_commands_path.name} ({os.path.getsize(all_commands_path)} bytes)\")\n   280\t\n   281\t    # 2. all-agents.json\n   282\t    all_agents_path = INDEX_DIR / \"all-agents.json\"\n   283\t    with open(all_agents_path, 'w', encoding='utf-8') as f:\n   284\t        json.dump(all_agents, f, indent=2, ensure_ascii=False)\n   285\t    print(f\"OK Generated {all_agents_path.name} ({os.path.getsize(all_agents_path)} bytes)\")\n   286\t\n   287\t    # 3. by-category.json\n   288\t    by_category = defaultdict(lambda: defaultdict(list))\n   289\t    for cmd in all_commands:\n   290\t        cat = cmd['category']\n   291\t        subcat = cmd['subcategory'] or '_root'\n   292\t        by_category[cat][subcat].append(cmd)\n   293\t\n   294\t    by_category_path = INDEX_DIR / \"by-category.json\"\n   295\t    with open(by_category_path, 'w', encoding='utf-8') as f:\n   296\t        json.dump(dict(by_category), f, indent=2, ensure_ascii=False)\n   297\t    print(f\"OK Generated {by_category_path.name} ({os.path.getsize(by_category_path)} bytes)\")\n   298\t\n   299\t    # 4. by-use-case.json\n   300\t    by_use_case = defaultdict(list)\n   301\t    for cmd in all_commands:\n   302\t        by_use_case[cmd['usage_scenario']].append(cmd)\n...\n\nPath: ccw\\src\\core\\routes\\commands-routes.ts\n...\n    80\t\r\n    81\t\r\n    82\t/**\r\n    83\t * Parse YAML frontmatter from command file\r\n    84\t */\r\n    85\tfunction parseCommandFrontmatter(content: string): CommandMetadata {\r\n    86\t  const result: CommandMetadata = {\r\n    87\t    name: '',\r\n    88\t    description: '',\r\n    89\t    group: 'other'  // Default group\r\n    90\t  };\r\n    91\t\r\n    92\t  // Check for YAML frontmatter\r\n    93\t  if (content.startsWith('---')) {\r\n    94\t    const endIndex = content.indexOf('---', 3);\r\n    95\t    if (endIndex > 0) {\r\n    96\t      const frontmatter = content.substring(3, endIndex).trim();\r\n    97\t\r\n    98\t      // Parse frontmatter lines\r\n    99\t      const lines = frontmatter.split(/[\\r\\n]+/);\r\n   100\t      for (const line of lines) {\r\n   101\t        const colonIndex = line.indexOf(':');\r\n   102\t        if (colonIndex > 0) {\r\n   103\t          const key = line.substring(0, colonIndex).trim().toLowerCase();\r\n   104\t          const value = line.substring(colonIndex + 1).trim().replace(/^[\"']|[\"']$/g, '');\r\n   105\t\r\n   106\t          if (key === 'name') {\r\n   107\t            result.name = value;\r\n   108\t          } else if (key === 'description') {\r\n   109\t            result.description = value;\r\n   110\t          } else if (key === 'group') {\r\n   111\t            result.group = value || 'other';\r\n   112\t          } else if (key === 'argument-hint') {\r\n   113\t            result.argumentHint = value;\r\n   114\t          } else if (key === 'allowed-tools') {\r\n   115\t            result.allowedTools = value\r\n   116\t              .replace(/^\\[|\\]$/g, '')\r\n   117\t              .split(',')\r\n   118\t              .map(t => t.trim())\r\n   119\t              .filter(Boolean);\r\n   120\t          }\r\n   121\t        }\r\n   122\t      }\r\n   123\t    }\r\n   124\t  }\r\n   125\t\r\n   126\t  return result;\r\n   127\t}\r\n...\n   237\t\r\n   238\t        if (isEnabled || isDisabled) {\r\n   239\t          try {\r\n   240\t            const content = readFileSync(fullPath, 'utf8');\r\n   241\t            const metadata = parseCommandFrontmatter(content);\r\n   242\t\r\n   243\t            // For disabled files, remove .disabled from relativePath for consistency\r\n   244\t            if (isDisabled) {\r\n   245\t              relativePath = relativePath.replace(/\\.disabled$/, '');\r\n   246\t            }\r\n   247\t\r\n   248\t            const commandName = metadata.name || basename(relativePath, '.md');\r\n   249\t\r\n   250\t            // Get group from external config (not from frontmatter)\r\n   251\t            const group = getCommandGroup(commandName, relativePath, location, projectPath);\r\n   252\t\r\n   253\t            results.push({\r\n   254\t              name: commandName,\r\n   255\t              description: metadata.description,\r\n   256\t              group,\r\n   257\t              enabled: isEnabled,\r\n   258\t              location,\r\n   259\t              path: fullPath,\r\n   260\t              relativePath,\r\n   261\t              argumentHint: metadata.argumentHint,\r\n   262\t              allowedTools: metadata.allowedTools\r\n   263\t            });\r\n...\n\nPath: .claude\\skills\\slash-command-outliner\\scripts\\lib\\command-md.js\n     1\timport fs from 'node:fs';\r\n     2\timport path from 'node:path';\r\n     3\t\r\n     4\t/**\r\n     5\t * Parse the first YAML frontmatter block (--- ... ---) into a simple key/value map.\r\n     6\t * This intentionally supports only the subset used by CCW command markdown files.\r\n     7\t */\r\n     8\texport function parseYamlHeader(markdown) {\r\n     9\t  const match = markdown.match(/^---\\s*\\r?\\n([\\s\\S]*?)\\r?\\n---\\s*\\r?\\n/);\r\n    10\t  if (!match) return { header: null, body: markdown };\r\n    11\t\r\n    12\t  const raw = match[1];\r\n    13\t  const header = {};\r\n    14\t  for (const line of raw.split(/\\r?\\n/)) {\r\n    15\t    const m = line.match(/^\\s*([A-Za-z0-9_-]+)\\s*:\\s*(.*?)\\s*$/);\r\n    16\t    if (!m) continue;\r\n    17\t    const key = m[1];\r\n    18\t    let value = m[2];\r\n    19\t    // strip surrounding quotes\r\n    20\t    const q = value.match(/^\"(.*)\"$/);\r\n    21\t    if (q) value = q[1];\r\n    22\t    header[key] = value;\r\n    23\t  }\r\n    24\t\r\n    25\t  return { header, body: markdown.slice(match[0].length) };\r\n    26\t}\r\n...\n\nPath: CHANGELOG.md#chunk1of2\n...\n   588\t\r\n   589\t**5-Index Command System**:\r\n   590\t- ‚ú® **all-commands.json** (30KB) - Complete catalog of 69 commands with full metadata\r\n   591\t- ‚ú® **by-category.json** (33KB) - Hierarchical organization (workflow/cli/memory/task/general)\r\n   592\t- ‚ú® **by-use-case.json** (32KB) - Grouped by 10 usage scenarios\r\n   593\t- ‚ú® **essential-commands.json** (5.8KB) - Top 14 most-used commands for quick reference\r\n   594\t- ‚ú® **command-relationships.json** (13KB) - Workflow guidance with next-steps and dependencies\r\n   595\t\r\n   596\t**Issue Templates**:\r\n   597\t- ‚ú® **Bug Report Template** - Standardized bug reporting with environment info\r\n   598\t- ‚ú® **Feature Request Template** - Structured feature proposals with use cases\r\n   599\t- ‚ú® **Question Template** - Help request format for user support\r\n   600\t\r\n   601\t#### üîÑ Changed\r\n...\n\nPath: .codex\\skills\\slash-command-outliner\\scripts\\lib\\command-md.js\n     1\timport fs from 'node:fs';\r\n     2\timport path from 'node:path';\r\n     3\t\r\n     4\t/**\r\n     5\t * Parse the first YAML frontmatter block (--- ... ---) into a simple key/value map.\r\n     6\t * This intentionally supports only the subset used by CCW command markdown files.\r\n     7\t */\r\n     8\texport function parseYamlHeader(markdown) {\r\n     9\t  const match = markdown.match(/^---\\s*\\r?\\n([\\s\\S]*?)\\r?\\n---\\s*\\r?\\n/);\r\n    10\t  if (!match) return { header: null, body: markdown };\r\n    11\t\r\n    12\t  const raw = match[1];\r\n    13\t  const header = {};\r\n    14\t  for (const line of raw.split(/\\r?\\n/)) {\r\n    15\t    const m = line.match(/^\\s*([A-Za-z0-9_-]+)\\s*:\\s*(.*?)\\s*$/);\r\n    16\t    if (!m) continue;\r\n    17\t    const key = m[1];\r\n    18\t    let value = m[2];\r\n    19\t    // strip surrounding quotes\r\n    20\t    const q = value.match(/^\"(.*)\"$/);\r\n    21\t    if (q) value = q[1];\r\n    22\t    header[key] = value;\r\n    23\t  }\r\n    24\t\r\n    25\t  return { header, body: markdown.slice(match[0].length) };\r\n    26\t}\r\n...\n\nPath: ccw\\tests\\integration\\help-routes.test.ts\n...\n    78\t\r\n    79\t    writeFileSync(\r\n    80\t      join(indexDir, 'all-commands.json'),\r\n    81\t      JSON.stringify(\r\n    82\t        [\r\n    83\t          { name: 'Issue Next', command: 'ccw issue next', description: 'Fetch next item', category: 'issue', subcategory: 'queue' },\r\n    84\t          { name: 'Serve', command: 'ccw serve', description: 'Start dashboard server', category: 'core' },\r\n    85\t        ],\r\n    86\t        null,\r\n    87\t        2,\r\n    88\t      ),\r\n    89\t      'utf8',\r\n    90\t    );\r\n    91\t\r\n    92\t    writeFileSync(\r\n    93\t      join(indexDir, 'command-relationships.json'),\r\n    94\t      JSON.stringify({ workflows: [{ name: 'Issue Queue', commands: ['ccw issue next', 'ccw issue done'] }] }, null, 2),\r\n    95\t      'utf8',\r\n    96\t    );\r\n    97\t\r\n    98\t    writeFileSync(\r\n    99\t      join(indexDir, 'by-category.json'),\r\n   100\t      JSON.stringify({ issue: ['ccw issue next'], core: ['ccw serve'] }, null, 2),\r\n   101\t      'utf8',\r\n   102\t    );\r\n   103\t\r\n   104\t    mod = await import(helpRoutesUrl.href);\r\n   105\t  });\r\n...\n\nPath: ccw\\src\\tools\\command-registry.test.ts\n...\n   178\t\r\n   179\t# Another comment\r\n   180\tdescription: Test\r\n   181\t\r\n   182\t---`;\r\n   183\t\r\n   184\t      const registry = new CommandRegistry('/fake/path');\r\n   185\t      const result = (registry as any).parseYamlHeader(yaml);\r\n   186\t\r\n   187\t      expect(result).toEqual({\r\n   188\t        name: 'test-command',\r\n   189\t        description: 'Test'\r\n   190\t      });\r\n   191\t    });\r\n   192\t\r\n   193\t    it('should return null for missing YAML markers', () => {\r\n   194\t      const yaml = `name: test-command\r\n   195\tdescription: Test`;\r\n   196\t\r\n   197\t      const registry = new CommandRegistry('/fake/path');\r\n   198\t      const result = (registry as any).parseYamlHeader(yaml);\r\n   199\t\r\n   200\t      expect(result).toBeNull();\r\n   201\t    });\r\n   202\t\r\n   203\t    it('should return null for malformed YAML', () => {\r\n   204\t      const yaml = `---\r\n   205\tinvalid yaml content without colons\r\n   206\t---`;\r\n   207\t\r\n   208\t      const registry = new CommandRegistry('/fake/path');\r\n   209\t      const result = (registry as any).parseYamlHeader(yaml);\r\n   210\t\r\n   211\t      expect(result).toEqual({});\r\n   212\t    });\r\n   213\t  });\r\n...\n\n",
      "type": "text"
    }
  ]
}


thinking
**Analyzing code implementations**

I‚Äôm considering how pointers should indicate code locations for implementation. It seems like the slash command might not need changes in TypeScript. In the outline, I could look into verifying `ccw` indexes, but the quality gate says artifact references aren‚Äôt broken, even when linking to runtime-generated `.workflow` paths. My outputs, like spec.json and references.json, might be meta. Evidence scripts only check markdown files passed, so I‚Äôll ensure the evidence tables in our markdown files pass verification.
thinking
**Evaluating evidence table requirements**

I see that the agent outline template doesn‚Äôt include evidence tables, so I shouldn't pass it to the script. The evidence rules indicate that any pointer row should be in evidence tables. I plan to include the evidence table in the slash outline and gap report, which should be sufficient. The verify script needs at least one evidence table per markdown file, so running it on the agent outline could lead to failure. However, since the user wants a generated-agent-outline.md without evidence tables, that works! Now, I need to generate references.json and spec.json. Let's check the skill scripts for the outputs.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-ChildItem -File .codex/skills/slash-command-outliner/scripts | Select-Object Name,FullName' in C:\Project\Claude-Code-Workflow succeeded in 329ms:

[32;1mName                   [0m[32;1m FullName[0m
[32;1m----                   [0m [32;1m--------[0m
derive-spec.js          C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\scripts\derive-spec.js
gap-report.js           C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\scripts\gap-report.js
generate-outline.js     C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\scripts\generate-outline.‚Ä¶
README.md               C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\scripts\README.md
regress-all.js          C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\scripts\regress-all.js
scan-corpus.js          C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\scripts\scan-corpus.js
verify-evidence.js      C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\scripts\verify-evidence.js
verify-evidence.test.js C:\Project\Claude-Code-Workflow\.codex\skills\slash-command-outliner\scripts\verify-evidence.t‚Ä¶

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/scripts/README.md' in C:\Project\Claude-Code-Workflow succeeded in 317ms:
# Slash Command Outliner Scripts

All scripts are deterministic (no LLM). They exist to prove corpus coverage and enforce non-regression.

## Common

Run from repo root.

## Scan corpus (rebuild a command list)

```bash
node .codex/skills/slash-command-outliner/scripts/scan-corpus.js --root=.claude/commands --out=.workflow/.scratchpad/commands.json
```

## Regress all commands (cycle mode)

```bash
node .codex/skills/slash-command-outliner/scripts/regress-all.js --cycle-id=cycle-v1-20260203T001806-slashcmdoutliner-qmhuep
```


thinking
**Evaluating script requirements**

I‚Äôm thinking about how the scripts are deterministic, but the LLM outputs are necessary. Maybe I can use derive-spec.js and generate-outline.js for scaffolding, but I must follow templates and ensure the evidence criteria are met. I wonder if these scripts consider evidence rules effectively. It might be easier to manually craft the outputs based on templates and requirements. I'll need to check spec.json and references.json and inspect derive-spec.js for the required formats.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/scripts/derive-spec.js' in C:\Project\Claude-Code-Workflow succeeded in 318ms:
import { deriveSpecFromCommandFile, writeJson } from './lib/pipeline.js';

function usage() {
  console.log(
    [
      'Usage:',
      '  node .codex/skills/slash-command-outliner/scripts/derive-spec.js --command=.claude/commands/workflow/plan.md --out=spec.json',
      '',
      'Produces a minimal, non-leaky spec JSON (frontmatter + headings only).',
    ].join('\n')
  );
}

function parseArgs(argv) {
  const args = {};
  for (const a of argv) {
    if (!a.startsWith('--')) continue;
    const [k, v] = a.split('=');
    args[k] = v ?? true;
  }

thinking
**Inspecting spec generation**

I'm trying to derive the minimum specification from the command file's frontmatter and headings. The user gave me a requirements document, not a command document, but I do have the command file available. I'll run the `derive-spec` function on the specific command file to produce `spec.json`, as the user requested it in the output directory. I also need to think about `references.json`, which probably comes from the retrieve-and-rank phase, so I should check that as well.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/scripts/generate-outline.js' in C:\Project\Claude-Code-Workflow succeeded in 314ms:
import fs from 'node:fs';
import path from 'node:path';

import { renderOutlineFromSpec, writeText } from './lib/pipeline.js';
import { findImplementationHints } from './lib/implementation-hints.js';

function usage() {
  console.log(
    [
      'Usage:',
      '  node .codex/skills/slash-command-outliner/scripts/generate-outline.js --spec=spec.json --out=outline.md',
      '    [--tooling-manifest=tooling.json]',
      '',
      'Generates a CCW-aligned slash command outline deterministically (no LLM).',
    ].join('\n')
  );
}

function parseArgs(argv) {
  const args = {};

thinking
**Examining outline generation**

I'm exploring how the deterministic outline generation works, specifically through `renderOutlineFromSpec` and related templates. I notice that the evidence table in the template still shows `TBD`, which could lead to a failure when verifying evidence. Maybe we can modify the output after generating it to address this. I also think I need to check the gap-report script and the spec structure in `lib/pipeline.js` to assist with outline rendering.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/scripts/lib/pipeline.js' in C:\Project\Claude-Code-Workflow succeeded in 310ms:
import fs from 'node:fs';
import path from 'node:path';

import { extractHeadings, parseYamlHeader, readCommandFile, toPosixPath } from './command-md.js';
import { findImplementationHints } from './implementation-hints.js';

export function splitCsv(s) {
  return String(s || '')
    .split(',')
    .map((x) => x.trim())
    .filter(Boolean);
}

function inferGroupFromCommandPath(commandPath, headerGroup) {
  if (headerGroup && String(headerGroup).trim().length > 0) return String(headerGroup).trim();
  const p = toPosixPath(String(commandPath || ''));
  const marker = '.claude/commands/';
  const idx = p.indexOf(marker);
  if (idx === -1) return '';
  const rel = p.slice(idx + marker.length);




thinking
**Organizing file pointers**

I'm focusing on the anchor string in `ccw/src/tools/command-registry.ts`: "const relativePath = join('.claude', 'commands', 'workflow');". I need to ensure this matches exactly, including spacing, so I‚Äôll choose a smaller substring like "join('.claude', 'commands', 'workflow')" to keep it stable. I plan to find and check the actual TS file content for anchor strings, keeping the number of pointers limited yet comprehensive. I'll create an evidence table with about 6-8 rows of relevant pointers.
thinking
**Evaluating pointers and evidence**

When considering the existing JSON pointer, I see that the path exists. For the evidence, I should use documentation like `.claude/commands/ccw-coordinator.md`. It's important that documentation evidence is strictly from `.claude/commands/**.md`, excluding the skills directory. Even though I may not need that specific pointer, I must provide dual-source evidence for any pointer row. If I include resources from `.claude/skills/ccw-help/index/all-commands.json`, I‚Äôll need both documentation and TypeScript evidence, like the file `ccw/src/tools/command-registry.ts`. I'll verify that these files exist and include the necessary anchors.
thinking
**Clarifying pointers and spec files**

I want to avoid using pointers that don't exist, marking them as Planned since the script won't verify their paths. Even if a pointer looks like it could be valid, it still needs evidence. For existing rows, we must ensure the verify command isn't empty, while verification is optional for Planned rows. The script has restrictions on pointer formatting, prohibiting commas, newlines, or placeholders like 'TBD' or '{{'. When creating the `spec.json`, it needs to capture command metadata, and I might want to derive additional info while keeping it concise.
thinking
**Reviewing requirements and references**

The requirements document provides information on allowed tools and structure, which is good to know. In the command documentation's frontmatter, allowed-tools include `Skill(*)` and derive-spec uses splitCsv for these. I should note that we need to include created_at too.

Next, for `references.json`, I need at least three selected references (both docs and TypeScript) to follow the skill principle of studying similar patterns. Some potential command docs could include `.claude/commands/workflow/execute.md`, among others. I'll create a `references.json` with a structure for selected references but need to check the templates folder for any existing JSON templates.
tool ccw-tools.smart_search({"action":"search","path":"C:/Project/Claude-Code-Workflow/.codex/skills/slash-command-outliner","query":"references.json","mode":"fuzzy","maxResults":20})
2026-02-05T06:11:20.936053Z ERROR rmcp::transport::async_rw: Error reading from stream: serde error expected value at line 1 column 2
ccw-tools.smart_search({"action":"search","path":"C:/Project/Claude-Code-Workflow/.codex/skills/slash-command-outliner","query":"references.json","mode":"fuzzy","maxResults":20}) failed in 3.03s:

thinking
I'm running into an issue where the smart_search tool failed possibly due to a server problem. According to the instructions, I'm not supposed to use the shell when MCP tools are available, but since smart_search isn't working, I think I might need to proceed with using the shell tool instead. I plan to run `rg` via the shell command to look for "references.json" in the skill folder. It's a little tricky, but I need to find that file!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; rg -n "references'"\\.json\" -S .codex/skills/slash-command-outliner" in C:\Project\Claude-Code-Workflow succeeded in 320ms:
.codex/skills/slash-command-outliner\phases\04-gap-report-and-iterate.md:15:- `specs/outputs/references.json`
.codex/skills/slash-command-outliner\phases\03-generate-outlines.md:14:- `specs/outputs/references.json` (selected reference)
.codex/skills/slash-command-outliner\phases\02-retrieve-and-rank-references.md:20:- `specs/outputs/references.json`
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/phases/02-retrieve-and-rank-references.md' in C:\Project\Claude-Code-Workflow succeeded in 320ms:
# Phase 02: Retrieve + Rank References

## Goal

Find the closest existing commands and extract **reusable patterns** without copying full content.

## Steps

1) Use `mcp__ace-tool__search_context` to recall similar commands and relevant tooling code.
2) Produce Top N candidates (default N=5) with deterministic scoring:
   - same `group` / command family
   - similar interaction model (AskUserQuestion, multi-round loop, etc.)
   - similar artifacts (writes to `.workflow/*`, `.claude/*`, etc.)
   - similar allowed-tools surface
3) Require user confirmation for Top 1 (high-confidence can be preselected but must be overridable).

## Output

Write:
- `specs/outputs/references.json`
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/phases/03-generate-outlines.md' in C:\Project\Claude-Code-Workflow succeeded in 312ms:
# Phase 03: Generate Outlines (Slash MD + Agent MD)

## Goal

Generate:
- a **Slash command MD outline** that matches CCW conventions (frontmatter + required sections)
- an **Agent outline** that explains execution model, state, and validation strategy

Use templates; keep output concise and implementation-oriented.

## Inputs

- `specs/outputs/spec.json`
- `specs/outputs/references.json` (selected reference)
- Rules: `../specs/quality-gates.md`

## Output Files

- `specs/outputs/generated-slash-outline.md` (based on `../templates/slash-command-outline.md`)
- `specs/outputs/generated-agent-outline.md` (based on `../templates/agent-outline.md`)
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/phases/04-gap-report-and-iterate.md' in C:\Project\Claude-Code-Workflow succeeded in 314ms:
# Phase 04: Gap Report + Iterate

## Goal

Compare the generated outlines against:
1) The selected reference command implementation (oracle)
2) The CCW server/tooling corpus (routes, mcp tools, cli internals)

Then propose the smallest set of changes to close gaps.

## Inputs

- `specs/outputs/generated-slash-outline.md`
- `specs/outputs/generated-agent-outline.md`
- `specs/outputs/references.json`
- Tooling scope: `../specs/corpus-scope.md`

## Output

Write:
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-ChildItem -File .claude/commands/workflow | Sort-Object Name | Select-Object -ExpandProperty Name' in C:\Project\Claude-Code-Workflow succeeded in 333ms:
analyze-with-file.md
brainstorm-with-file.md
clean.md
collaborative-plan-with-file.md
debug-with-file.md
execute.md
init-guidelines.md
init.md
lite-execute.md
lite-fix.md
lite-plan.md
multi-cli-plan.md
plan-verify.md
plan.md
replan.md
review-cycle-fix.md
review-module-cycle.md
review-session-cycle.md
review.md
tdd-plan.md

thinking
**Inspecting files for similarity**

I‚Äôm going to check some files for similarities, like `review-module-cycle.md`, `review-session-cycle.md`, and `review.md`. Our command needs to fix things after review, so I'll look at the candidate references, possibly `workflow/lite-fix.md`. But that‚Äôs more for fixes. I need to explore TypeScript patterns beyond just the command registry‚Äîlike `ccw/src/core/services/flow-executor.ts` or `ccw/src/cli`. I also plan to search for `TodoWrite` in TypeScript using the ace search context.
tool ace-tool.search_context({"project_root_path":"C:/Project/Claude-Code-Workflow","query":"Find TypeScript code under ccw/src that references TodoWrite, progress files under .workflow, or review cycle/fix sessions. Also find CLI execution helpers like executeCliTool and how tools are invoked. Keywords: TodoWrite, .workflow, fix-session, executeCliTool, cli-planning-agent, cli-execute-agent, MAX_PARALLEL"})
ace-tool.search_context({"project_root_path":"C:/Project/Claude-Code-Workflow","query":"Find TypeScript code under ccw/src that references TodoWrite, progress files under .workflow, or review cycle/fix sessions. Also find CLI execution helpers like executeCliTool and how tools are invoked. Keywords: TodoWrite, .workflow, fix-session, executeCliTool, cli-planning-agent, cli-execute-agent, MAX_PARALLEL"}) success in 9.36s:
{
  "content": [
    {
      "text": "The following code sections were retrieved:\nPath: .claude\\commands\\workflow\\review-cycle-fix.md\n...\n    18\t\r\n    19\t# Resume interrupted fix session\r\n    20\t/workflow:review-cycle-fix --resume\r\n    21\t\r\n    22\t# Custom max retry attempts per finding\r\n    23\t/workflow:review-cycle-fix .workflow/active/WFS-123/.review/ --max-iterations=5\r\n    24\t\r\n    25\t# Custom batch size for parallel planning (default: 5 findings per batch)\r\n    26\t/workflow:review-cycle-fix .workflow/active/WFS-123/.review/ --batch-size=3\r\n    27\t```\r\n    28\t\r\n    29\t**Fix Source**: Exported findings from review cycle dashboard\r\n    30\t**Output Directory**: `{review-dir}/fixes/{fix-session-id}/` (within session .review/)\r\n    31\t**Default Max Iterations**: 3 (per finding, adjustable)\r\n    32\t**Default Batch Size**: 5 (findings per planning batch, adjustable)\r\n    33\t**Max Parallel Agents**: 10 (concurrent planning agents)\r\n    34\t**CLI Tools**: @cli-planning-agent (planning), @cli-execute-agent (fixing)\r\n    35\t\r\n    36\t## What & Why\r\n...\n    76\t\r\n    77\tPhase 2: Parallel Planning Coordination (@cli-planning-agent √ó N)\r\n    78\t   ‚îú‚îÄ Launch MAX_PARALLEL planning agents concurrently (default: 10)\r\n    79\t   ‚îú‚îÄ Each agent processes one batch:\r\n    80\t   ‚îÇ  ‚îú‚îÄ Analyze findings for patterns and dependencies\r\n    81\t   ‚îÇ  ‚îú‚îÄ Group by file + dimension + root cause similarity\r\n    82\t   ‚îÇ  ‚îú‚îÄ Determine execution strategy (parallel/serial/hybrid)\r\n    83\t   ‚îÇ  ‚îú‚îÄ Generate fix timeline with stages\r\n    84\t   ‚îÇ  ‚îî‚îÄ Output: partial-plan-{batch-id}.json\r\n    85\t   ‚îú‚îÄ Collect results from all agents\r\n    86\t   ‚îî‚îÄ Aggregate: Merge partial plans ‚Üí fix-plan.json (resolve cross-batch dependencies)\r\n...\n   233\t\r\n   234\t**Phase 2: Parallel Planning Coordination**\r\n   235\t- Determine concurrency: MIN(batch_count, MAX_PARALLEL=10)\r\n   236\t- For each batch chunk (‚â§10 batches):\r\n   237\t  - Launch all agents in parallel with run_in_background=true\r\n   238\t  - Pass batch findings + project context + batch_id to each agent\r\n   239\t  - Each agent outputs: partial-plan-{batch-id}.json\r\n   240\t- Collect results via TaskOutput (blocking until all complete)\r\n   241\t- Aggregate partial plans:\r\n   242\t  - Merge execution groups (renumber group_ids sequentially: G1, G2, ...)\r\n   243\t  - Merge timelines (detect cross-batch dependencies, adjust stages)\r\n   244\t  - Resolve conflicts (same file in multiple batches ‚Üí serialize)\r\n   245\t- Generate final fix-plan.json with aggregated metadata\r\n   246\t- TodoWrite update: Mark planning complete, start execution\r\n...\n   290\t\r\n   291\t**File Producers**:\r\n   292\t- **Orchestrator**: Batches findings (Phase 1.5), aggregates partial plans ‚Üí `fix-plan.json` (Phase 2), launches parallel planning agents\r\n   293\t- **Planning Agents (N)**: Each outputs `partial-plan-{batch-id}.json` + initializes `fix-progress-*.json` for assigned groups\r\n   294\t- **Execution Agents (M)**: Update assigned `fix-progress-{N}.json` in real-time\r\n   295\t\r\n   296\t\r\n   297\t### Agent Invocation Template\r\n   298\t\r\n   299\t**Phase 1.5: Intelligent Batching** (Orchestrator):\r\n   300\t```javascript\r\n   301\t// Load findings\r\n   302\tconst findings = JSON.parse(Read(exportFile));\r\n   303\tconst batchSize = flags.batchSize || 5;\r\n   304\t\r\n   305\t// Semantic similarity analysis: group by file+dimension\r\n   306\tconst batches = [];\r\n   307\tconst grouped = new Map(); // key: \"${file}:${dimension}\"\r\n...\n   334\t\r\n   335\t// Process batches in chunks of MAX_PARALLEL\r\n   336\tfor (let i = 0; i < batches.length; i += MAX_PARALLEL) {\r\n   337\t  const chunk = batches.slice(i, i + MAX_PARALLEL);\r\n   338\t  const taskIds = [];\r\n   339\t\r\n   340\t  // Launch agents in parallel (run_in_background=true)\r\n   341\t  for (const batch of chunk) {\r\n   342\t    const taskId = Task({\r\n   343\t      subagent_type: \"cli-planning-agent\",\r\n   344\t      run_in_background: true,\r\n   345\t      description: `Plan batch ${batch.batch_id}: ${batch.findings.length} findings`,\r\n   346\t      prompt: planningPrompt(batch)  // See Planning Agent template below\r\n   347\t    });\r\n   348\t    taskIds.push({ taskId, batch });\r\n   349\t  }\r\n...\n\nPath: .claude\\commands\\workflow\\test-cycle-execute.md\n...\n   131\t\r\n   132\t### @cli-planning-agent\r\n   133\t- Execute CLI analysis with bug diagnosis template\r\n   134\t- Parse output for root causes and fix strategy\r\n   135\t- Generate IMPL-fix-N.json task definition\r\n   136\t- Detect affected tests for progressive testing\r\n   137\t- Save: analysis.md, cli-output.txt\r\n   138\t\r\n   139\t### @test-fix-agent\r\n   140\t- Execute tests, save results to test-results.json\r\n   141\t- Apply fixes from task.context.fix_strategy\r\n   142\t- Assign criticality to failures\r\n   143\t- Update task status\r\n   144\t\r\n   145\t## Reference\r\n   146\t\r\n   147\t### CLI Tool Configuration\r\n   148\t\r\n   149\t**Fallback Chain**: Gemini ‚Üí Qwen ‚Üí Codex\r\n   150\t**Template**: `~/.claude/workflows/cli-templates/prompts/analysis/01-diagnose-bug-root-cause.txt`\r\n   151\t**Timeout**: 40min (2400000ms)\r\n...\n\nPath: ccw\\docs-site\\docs\\faq.mdx\n...\n   516\t\r\n   517\t**Optimization tips:**\r\n   518\t```bash\r\n   519\t# Limit analysis scope\r\n   520\tccw plan \"Add login\" --focus-paths src/auth\r\n   521\t\r\n   522\t# Use faster model for initial analysis\r\n   523\tccw cli -p \"Quick analysis\" --model gemini-2.0-flash --mode analysis\r\n   524\t\r\n   525\t# Run in parallel when possible\r\n   526\tccw workflow:execute --parallel 4\r\n   527\t```\r\n   528\t\r\n   529\t</Details>\r\n   530\t\r\n   531\t### How do I debug workflow issues?\r\n   532\t\r\n   533\t<Details>\r\n   534\t<summary>Debugging Workflow</summary>\r\n   535\t\r\n   536\t**Enable debug logging:**\r\n   537\t```bash\r\n   538\tDEBUG=ccw:* ccw workflow:plan \"My feature\"\r\n   539\t```\r\n   540\t\r\n   541\t**Check session logs:**\r\n   542\t```bash\r\n   543\t# View session state\r\n   544\tcat .workflow/active/WFS-{session}/workflow-session.json\r\n   545\t\r\n   546\t# View task progress\r\n   547\tcat .workflow/active/WFS-{session}/TODO_LIST.md\r\n   548\t```\r\n   549\t\r\n   550\t**Use debug workflow:**\r\n   551\t```bash\r\n   552\tccw workflow:debug-with-file \"Debug memory leak in connection handler\"\r\n   553\t```\r\n...\n\nPath: .claude\\commands\\workflow\\multi-cli-plan.md\n     1\t---\r\n     2\tname: workflow:multi-cli-plan\r\n     3\tdescription: Multi-CLI collaborative planning workflow with ACE context gathering and iterative cross-verification. Uses cli-discuss-agent for Gemini+Codex+Claude analysis to converge on optimal execution plan.\r\n     4\targument-hint: \"[-y|--yes] <task description> [--max-rounds=3] [--tools=gemini,codex] [--mode=parallel|serial]\"\r\n     5\tallowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Bash(*), Write(*), mcp__ace-tool__search_context(*)\r\n     6\t---\r\n     7\t\r\n     8\t## Auto Mode\r\n     9\t\r\n    10\tWhen `--yes` or `-y`: Auto-approve plan, use recommended solution and execution method (Agent, Skip review).\r\n    11\t\r\n    12\t# Multi-CLI Collaborative Planning Command\r\n    13\t\r\n    14\t## Quick Start\r\n    15\t\r\n    16\t```bash\r\n    17\t# Basic usage\r\n    18\t/workflow:multi-cli-plan \"Implement user authentication\"\r\n    19\t\r\n    20\t# With options\r\n    21\t/workflow:multi-cli-plan \"Add dark mode support\" --max-rounds=3\r\n    22\t/workflow:multi-cli-plan \"Refactor payment module\" --tools=gemini,codex,claude\r\n    23\t/workflow:multi-cli-plan \"Fix memory leak\" --mode=serial\r\n    24\t```\r\n    25\t\r\n    26\t**Context Source**: ACE semantic search + Multi-CLI analysis\r\n    27\t**Output Directory**: `.workflow/.multi-cli-plan/{session-id}/`\r\n    28\t**Default Max Rounds**: 3 (convergence may complete earlier)\r\n    29\t**CLI Tools**: @cli-discuss-agent (analysis), @cli-lite-planning-agent (plan generation)\r\n    30\t**Execution**: Auto-hands off to `/workflow:lite-execute --in-memory` after plan approval\r\n    31\t\r\n    32\t## What & Why\r\n    33\t\r\n    34\t### Core Concept\r\n...\n\nPath: .claude\\commands\\issue\\execute.md\n...\n   252\t```\r\n   253\t\r\n   254\t### Phase 0 & 2: Setup Queue Worktree & Dispatch\r\n   255\t\r\n   256\t```javascript\r\n   257\t// Parallelism determined by DAG - no manual limit\r\n   258\t// All solutions in same batch have NO file conflicts and can run in parallel\r\n   259\tconst batch = dag.parallel_batches[0] || [];\r\n   260\t\r\n   261\t// Initialize TodoWrite\r\n   262\tTodoWrite({\r\n   263\t  todos: batch.map(id => ({\r\n   264\t    content: `Execute solution ${id}`,\r\n   265\t    status: 'pending',\r\n   266\t    activeForm: `Executing solution ${id}`\r\n   267\t  }))\r\n   268\t});\r\n...\n\nPath: .claude\\commands\\workflow\\tdd-plan.md\n...\n   586\t\r\n   587\t## Related Commands\r\n   588\t\r\n   589\t**Prerequisite Commands**:\r\n   590\t- None - TDD planning is self-contained (can optionally run brainstorm commands before)\r\n   591\t\r\n   592\t**Called by This Command** (6 phases):\r\n   593\t- `/workflow:session:start` - Phase 1: Create or discover TDD workflow session\r\n   594\t- `/workflow:tools:context-gather` - Phase 2: Gather project context and analyze codebase\r\n   595\t- `/workflow:tools:test-context-gather` - Phase 3: Analyze existing test patterns and coverage\r\n   596\t- `/workflow:tools:conflict-resolution` - Phase 4: Detect and resolve conflicts (auto-triggered if conflict_risk ‚â• medium)\r\n   597\t- `/compact` - Phase 4: Memory optimization (if context approaching limits)\r\n   598\t- `/workflow:tools:task-generate-tdd` - Phase 5: Generate TDD tasks (CLI tool usage determined semantically)\r\n...\n\nPath: .claude\\commands\\workflow\\execute.md\n...\n   242\t\r\n   243\t**Process**:\r\n   244\t1. **Create TodoWrite List**: Generate task list from TODO_LIST.md (not from task JSONs)\r\n   245\t   - Parse TODO_LIST.md to extract all tasks with current statuses\r\n   246\t   - Identify first pending task with met dependencies\r\n   247\t   - Generate comprehensive TodoWrite covering entire workflow\r\n   248\t2. **Prepare Session Context**: Inject workflow paths for agent use (using provided session-id)\r\n   249\t3. **Validate Prerequisites**: Ensure IMPL_PLAN.md and TODO_LIST.md exist and are valid\r\n   250\t\r\n   251\t**Resume Mode Behavior**:\r\n   252\t- Load existing TODO_LIST.md directly from `.workflow/active/{session-id}/`\r\n   253\t- Extract current progress from TODO_LIST.md\r\n   254\t- Generate TodoWrite from TODO_LIST.md state\r\n   255\t- Proceed immediately to agent execution (Phase 4)\r\n...\n\nPath: ccw\\frontend\\src\\types\\index.ts\n...\n     5\t\r\n     6\t// ========== Store Types ==========\r\n     7\texport type {\r\n     8\t  // App Store\r\n     9\t  Theme,\r\n    10\t  ColorScheme,\r\n    11\t  Locale,\r\n    12\t  ViewMode,\r\n    13\t  SessionFilter,\r\n    14\t  LiteTaskType,\r\n    15\t  AppState,\r\n    16\t  AppActions,\r\n    17\t  AppStore,\r\n    18\t  // Workflow Store\r\n    19\t  SessionMetadata,\r\n    20\t  TaskData,\r\n    21\t  LiteTaskSession,\r\n    22\t  WorkflowData,\r\n    23\t  WorkflowFilters,\r\n    24\t  WorkflowSorting,\r\n    25\t  WorkflowState,\r\n    26\t  WorkflowActions,\r\n    27\t  WorkflowStore,\r\n    28\t  // Config Store\r\n    29\t  CliToolConfig,\r\n    30\t  ApiEndpoints,\r\n    31\t  UserPreferences,\r\n    32\t  ConfigState,\r\n    33\t  ConfigActions,\r\n    34\t  ConfigStore,\r\n    35\t  // Notification Store\r\n    36\t  ToastType,\r\n    37\t  WebSocketStatus,\r\n    38\t  Toast,\r\n    39\t  WebSocketMessage,\r\n    40\t  NotificationState,\r\n    41\t  NotificationActions,\r\n    42\t  NotificationStore,\r\n    43\t  // Index Manager\r\n    44\t  IndexStatus,\r\n    45\t  IndexRebuildRequest,\r\n    46\t  // Rules\r\n    47\t  Rule,\r\n    48\t  RuleCreateInput,\r\n    49\t  RuleUpdateInput,\r\n    50\t  RulesResponse,\r\n    51\t  // Prompt Assistant\r\n    52\t  Prompt,\r\n    53\t  PromptInsight,\r\n    54\t  Pattern,\r\n    55\t  Suggestion,\r\n    56\t} from './store';\r\n...\n\nPath: ccw\\src\\tools\\cli-executor-core.ts#chunk1of3\n...\n   199\t\r\n   200\t  // Add prompt as argument\r\n   201\t  args.push('-p', prompt);\r\n   202\t\r\n   203\t  debugLog('CLAUDE_SETTINGS', `Executing claude with settings`, {\r\n   204\t    settingsPath,\r\n   205\t    endpointId,\r\n   206\t    mode,\r\n   207\t    workingDir,\r\n   208\t    args\r\n   209\t  });\r\n   210\t\r\n   211\t  return new Promise((resolve, reject) => {\r\n   212\t    const isWindows = process.platform === 'win32';\r\n   213\t    const command = 'claude';\r\n   214\t    const commandToSpawn = isWindows ? escapeWindowsArg(command) : command;\r\n   215\t    const argsToSpawn = isWindows ? args.map(escapeWindowsArg) : args;\r\n   216\t\r\n   217\t    const child = spawn(commandToSpawn, argsToSpawn, {\r\n   218\t      cwd: workingDir,\r\n   219\t      shell: isWindows,\r\n   220\t      stdio: ['ignore', 'pipe', 'pipe']\r\n   221\t    });\r\n...\n   534\t\r\n   535\t      // Execute claude CLI with settings file\r\n   536\t      const result = await executeClaudeWithSettings({\r\n   537\t        prompt,\r\n   538\t        settingsPath,\r\n   539\t        endpointId: cliSettings.id,\r\n   540\t        mode,\r\n   541\t        workingDir,\r\n   542\t        cd,\r\n   543\t        includeDirs: includeDirs ? includeDirs.split(',').map(d => d.trim()) : undefined,\r\n   544\t        customId,\r\n   545\t        onOutput: onOutput || undefined\r\n   546\t      });\r\n   547\t\r\n   548\t      return result;\r\n   549\t    }\r\n   550\t\r\n   551\t    // Check cli-tools.json for CLI wrapper tools or API endpoints\r\n   552\t    const cliToolsConfig = loadClaudeCliTools(workingDir);\r\n   553\t\r\n   554\t    // First check if tool is a cli-wrapper in tools section\r\n   555\t    const cliWrapperTool = Object.entries(cliToolsConfig.tools).find(\r\n   556\t      ([name, t]) => name.toLowerCase() === tool.toLowerCase() && t.type === 'cli-wrapper' && t.enabled\r\n   557\t    );\r\n...\n\nPath: .claude\\commands\\issue\\plan.md\n...\n   202\t\r\n   203\t// Launch agents in parallel (max 10 concurrent)\r\n   204\tconst MAX_PARALLEL = 10;\r\n   205\tfor (let i = 0; i < agentTasks.length; i += MAX_PARALLEL) {\r\n   206\t  const chunk = agentTasks.slice(i, i + MAX_PARALLEL);\r\n   207\t  const taskIds = [];\r\n   208\t\r\n   209\t  // Launch chunk in parallel\r\n   210\t  for (const { batchIndex, batchIds, issuePrompt, batch } of chunk) {\r\n   211\t    updateTodo(`Plan batch ${batchIndex + 1}`, 'in_progress');\r\n   212\t    const taskId = Task(\r\n   213\t      subagent_type=\"issue-plan-agent\",\r\n   214\t      run_in_background=true,\r\n   215\t      description=`Explore & plan ${batch.length} issues: ${batchIds.join(', ')}`,\r\n   216\t      prompt=issuePrompt\r\n   217\t    );\r\n   218\t    taskIds.push({ taskId, batchIndex });\r\n   219\t  }\r\n   220\t\r\n   221\t  console.log(`Launched ${taskIds.length} agents (batch ${i/MAX_PARALLEL + 1}/${Math.ceil(agentTasks.length/MAX_PARALLEL)})...`);\r\n...\n\nPath: .claude\\agents\\doc-generator.md\n...\n   253\t\r\n   254\t### 4. Progress Tracking with TodoWrite\r\n   255\tUse `TodoWrite` to provide real-time visibility into the execution process.\r\n   256\t\r\n   257\t```javascript\r\n   258\t// At the start of execution\r\n   259\tTodoWrite({\r\n   260\t  todos: [\r\n   261\t    { \"content\": \"Load and validate task JSON\", \"status\": \"in_progress\" },\r\n   262\t    { \"content\": \"Execute pre-analysis step: discover_structure\", \"status\": \"pending\" },\r\n   263\t    { \"content\": \"Execute pre-analysis step: analyze_modules\", \"status\": \"pending\" },\r\n   264\t    { \"content\": \"Generate documentation content\", \"status\": \"pending\" },\r\n   265\t    { \"content\": \"Write documentation to target files\", \"status\": \"pending\" },\r\n   266\t    { \"content\": \"Run quality assurance checks\", \"status\": \"pending\" },\r\n   267\t    { \"content\": \"Update task status and generate summary\", \"status\": \"pending\" }\r\n   268\t  ]\r\n   269\t});\r\n...\n\nPath: ccw\\src\\tools\\cli-executor-core.ts#chunk2of3\n...\n   144\t\r\n   145\t    const child = spawn(commandToSpawn, argsToSpawn, {\r\n   146\t      cwd: workingDir,\r\n   147\t      shell: isWindows,  // Enable shell on Windows for .cmd files\r\n   148\t      stdio: [useStdin ? 'pipe' : 'ignore', 'pipe', 'pipe'],\r\n   149\t      env: spawnEnv\r\n   150\t    });\r\n   151\t\r\n   152\t    // Track current child process for cleanup on interruption\r\n   153\t    currentChildProcess = child;\r\n   154\t\r\n   155\t    debugLog('SPAWN', `Process spawned`, { pid: child.pid });\r\n   156\t\r\n   157\t    // Write prompt to stdin if using stdin mode (for gemini/qwen)\r\n   158\t    if (useStdin && child.stdin) {\r\n   159\t      debugLog('STDIN', `Writing prompt to stdin (${finalPrompt.length} bytes)`);\r\n   160\t      child.stdin.write(finalPrompt);\r\n   161\t      child.stdin.end();\r\n   162\t    }\r\n...\n\nPath: ccw\\src\\core\\services\\flow-executor.ts#chunk2of2\n...\n   108\t\r\n   109\t    try {\r\n   110\t      if (data.joinMode === 'all') {\r\n   111\t        // Wait for all branches to complete\r\n   112\t        const results = await Promise.all(\r\n   113\t          branchPromises.map(p =>\r\n   114\t            Promise.race([\r\n   115\t              p,\r\n   116\t              new Promise<{ success: false; error: string }>((_, reject) =>\r\n   117\t                setTimeout(() => reject(new Error('Branch timeout')), timeout)\r\n   118\t              )\r\n   119\t            ])\r\n   120\t          )\r\n   121\t        );\r\n   122\t\r\n   123\t        // Check if any failed (and failFast is enabled)\r\n   124\t        if (data.failFast) {\r\n   125\t          const failed = results.find(r => !r.success);\r\n   126\t          if (failed && 'error' in failed) {\r\n   127\t            throw new Error(`Parallel branch failed: ${failed.error}`);\r\n   128\t          }\r\n   129\t        }\r\n   130\t      } else if (data.joinMode === 'any') {\r\n   131\t        // Wait for first branch to complete\r\n   132\t        await Promise.race([\r\n   133\t          Promise.race(branchPromises),\r\n   134\t          new Promise((_, reject) => setTimeout(() => reject(new Error('All branches timeout')), timeout))\r\n   135\t        ]);\r\n...\n\nPath: .codex\\agents\\doc-generator.md\n...\n   253\t\r\n   254\t### 4. Progress Tracking with TodoWrite\r\n   255\tUse `TodoWrite` to provide real-time visibility into the execution process.\r\n   256\t\r\n   257\t```javascript\r\n   258\t// At the start of execution\r\n   259\tTodoWrite({\r\n   260\t  todos: [\r\n   261\t    { \"content\": \"Load and validate task JSON\", \"status\": \"in_progress\" },\r\n   262\t    { \"content\": \"Execute pre-analysis step: discover_structure\", \"status\": \"pending\" },\r\n   263\t    { \"content\": \"Execute pre-analysis step: analyze_modules\", \"status\": \"pending\" },\r\n   264\t    { \"content\": \"Generate documentation content\", \"status\": \"pending\" },\r\n   265\t    { \"content\": \"Write documentation to target files\", \"status\": \"pending\" },\r\n   266\t    { \"content\": \"Run quality assurance checks\", \"status\": \"pending\" },\r\n   267\t    { \"content\": \"Update task status and generate summary\", \"status\": \"pending\" }\r\n   268\t  ]\r\n   269\t});\r\n...\n\nPath: ccw\\src\\core\\services\\flow-executor.ts#chunk1of2\n...\n   480\t\r\n   481\t  /**\r\n   482\t   * Execute a parallel node\r\n   483\t   * Forks execution into multiple branches\r\n   484\t   */\r\n   485\t  private async runParallel(node: FlowNode): Promise<NodeResult> {\r\n   486\t    const data = node.data as ParallelNodeData;\r\n   487\t\r\n   488\t    // Parallel node doesn't execute directly - it's a control flow marker\r\n   489\t    // The FlowExecutor handles the actual parallel execution based on outgoing edges\r\n   490\t    // This method returns success to indicate the fork point was reached\r\n   491\t\r\n   492\t    return {\r\n   493\t      success: true,\r\n   494\t      output: {\r\n   495\t        joinMode: data.joinMode,\r\n   496\t        timeout: data.timeout,\r\n   497\t        failFast: data.failFast\r\n   498\t      }\r\n   499\t    };\r\n   500\t  }\r\n   501\t}\r\n   502\t\r\n   503\t// ============================================================================\r\n   504\t// FlowExecutor - Main Execution Engine\r\n   505\t// ============================================================================\r\n...\n\nPath: .claude\\commands\\workflow\\review-module-cycle.md\n...\n   727\t\r\n   728\t```javascript\r\n   729\tTodoWrite({\r\n   730\t  todos: [\r\n   731\t    { content: \"Phase 1: Discovery & Initialization\", status: \"completed\", activeForm: \"Initializing\" },\r\n   732\t    { content: \"Phase 2: Parallel Reviews (7 dimensions)\", status: \"in_progress\", activeForm: \"Reviewing\" },\r\n   733\t    { content: \"  ‚Üí Security review\", status: \"in_progress\", activeForm: \"Analyzing security\" },\r\n   734\t    // ... other dimensions as sub-items\r\n   735\t    { content: \"Phase 3: Aggregation\", status: \"pending\", activeForm: \"Aggregating\" },\r\n   736\t    { content: \"Phase 4: Deep-dive\", status: \"pending\", activeForm: \"Deep-diving\" },\r\n   737\t    { content: \"Phase 5: Completion\", status: \"pending\", activeForm: \"Completing\" }\r\n   738\t  ]\r\n   739\t});\r\n...\n\n",
      "type": "text"
    }
  ]
}
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; if (Test-Path .claude/agents) { Get-ChildItem -File .claude/agents | Select-Object -ExpandProperty Name } else { '"'NO .claude/agents dir' }" in C:\Project\Claude-Code-Workflow succeeded in 339ms:
action-planning-agent.md
cli-discuss-agent.md
cli-execution-agent.md
cli-explore-agent.md
cli-lite-planning-agent.md
cli-planning-agent.md
code-developer.md
conceptual-planning-agent.md
context-search-agent.md
debug-explore-agent.md
doc-generator.md
issue-plan-agent.md
issue-queue-agent.md
memory-bridge.md
tdd-developer.md
test-action-planning-agent.md
test-context-search-agent.md
test-fix-agent.md
ui-design-agent.md
universal-executor.md

thinking
**Ensuring evidence consistency**

I‚Äôm thinking about reducing duplication, but I should verify that each evidence table is consistent since verify-evidence checks each file separately. I need to ensure that the necessary evidence anchors exist, so I‚Äôll open the relevant TS files to get the exact anchor strings. Since these files are large, I'll use `Select-String` to find relevant lines easily. I also want to gather headings from certain documentation to ensure we‚Äôre thorough. Let‚Äôs get started!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; rg -n "join'"\\('\\.claude', 'commands', 'workflow'\\)\" ccw/src/tools/command-registry.ts" in C:\Project\Claude-Code-Workflow succeeded in 318ms:
49:    const relativePath = join('.claude', 'commands', 'workflow');
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; rg -n "private async runSlashCommand" ccw/src/core/services/flow-executor.ts' in C:\Project\Claude-Code-Workflow succeeded in 310ms:
202:  private async runSlashCommand(node: FlowNode): Promise<NodeResult> {
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; rg -n "spawn'"\\(commandToSpawn\" ccw/src/tools/cli-executor-core.ts" in C:\Project\Claude-Code-Workflow succeeded in 338ms:
217:    const child = spawn(commandToSpawn, argsToSpawn, {
945:    const child = spawn(commandToSpawn, argsToSpawn, {
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; rg -n "#" .claude/commands/workflow/test-cycle-execute.md | Select-Object -First 40' in C:\Project\Claude-Code-Workflow succeeded in 338ms:
8:# Workflow Test-Cycle-Execute Command
10:## Quick Start
13:# Execute test-fix workflow (auto-discovers active session)
16:# Resume interrupted session
19:# Custom iteration limit (default: 10)
27:## What & Why
29:### Core Concept
36:### Value Proposition
41:### Orchestrator Boundary (CRITICAL)
46:## How It Works
48:### Execution Flow 
71:### Agent Roles
79:## Enhanced Features
81:### 1. Intelligent Strategy Engine
101:### 2. Progressive Testing
115:## Core Responsibilities
117:### Orchestrator
132:### @cli-planning-agent
139:### @test-fix-agent
145:## Reference
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; rg -n "''^#" .claude/commands/workflow/review-cycle-fix.md | Select-Object -First 40' in C:\Project\Claude-Code-Workflow succeeded in 345ms:
8:# Workflow Review-Cycle-Fix Command
10:## Quick Start
13:# Fix from exported findings file (session-based path)
16:# Fix from review directory (auto-discovers latest export)
19:# Resume interrupted fix session
22:# Custom max retry attempts per finding
25:# Custom batch size for parallel planning (default: 5 findings per batch)
36:## What & Why
38:### Core Concept
52:### Value Proposition
59:### Orchestrator Boundary (CRITICAL)
65:### Execution Flow
108:### Agent Roles
116:## Enhanced Features
118:### 1. Parallel Planning Architecture
136:### 2. Intelligent Grouping Strategy
162:### 3. Execution Strategy Determination
178:### 4. Conservative Test Verification
212:## Core Responsibilities
214:### Orchestrator
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; (Get-Content ccw/src/tools/command-registry.ts -Encoding utf8)[40..60] -join "`n"' in C:\Project\Claude-Code-Workflow succeeded in 325ms:
    }
  }

  /**
   * Auto-detect ~/.claude/commands/workflow directory
   */
  private findCommandDir(): string | null {
    // Try relative to current working directory
    const relativePath = join('.claude', 'commands', 'workflow');
    if (existsSync(relativePath)) {
      return relativePath;
    }

    // Try user home directory
    const homeDir = homedir();
    const homeCommandDir = join(homeDir, '.claude', 'commands', 'workflow');
    if (existsSync(homeCommandDir)) {
      return homeCommandDir;
    }

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; (Get-Content ccw/src/core/services/flow-executor.ts -Encoding utf8)[195..220] -join "`n"' in C:\Project\Claude-Code-Workflow succeeded in 315ms:
  }

  /**
   * Execute a slash-command node
   * Integrates with executeCliTool from cli-executor
   */
  private async runSlashCommand(node: FlowNode): Promise<NodeResult> {
    const data = node.data as SlashCommandNodeData;

    // Interpolate command and args
    const command = interpolate(data.command, this.context.variables);
    const args = data.args ? interpolate(data.args, this.context.variables) : '';
    const contextHint = data.contextHint ? interpolate(data.contextHint, this.context.variables) : '';

    // Build prompt: combine command, args, and context hint
    let prompt = command;
    if (args) {
      prompt += ` ${args}`;
    }
    if (contextHint) {
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; (Get-Content ccw/src/tools/cli-executor-core.ts -Encoding utf8)[210..235] -join "`n"' in C:\Project\Claude-Code-Workflow succeeded in 324ms:
  return new Promise((resolve, reject) => {
    const isWindows = process.platform === 'win32';
    const command = 'claude';
    const commandToSpawn = isWindows ? escapeWindowsArg(command) : command;
    const argsToSpawn = isWindows ? args.map(escapeWindowsArg) : args;

    const child = spawn(commandToSpawn, argsToSpawn, {
      cwd: workingDir,
      shell: isWindows,
      stdio: ['ignore', 'pipe', 'pipe']
    });

    // Track current child process for cleanup
    currentChildProcess = child;

    let stdout = '';
    let stderr = '';
    const outputUnits: CliOutputUnit[] = [];

    child.stdout!.on('data', (data: Buffer) => {
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; rg -n "''^#" .claude/commands/ccw-coordinator.md | Select-Object -First 80' in C:\Project\Claude-Code-Workflow succeeded in 340ms:
8:# CCW Coordinator Command
14:## Core Concept: Minimum Execution Units (ÊúÄÂ∞èÊâßË°åÂçïÂÖÉ)
16:### What is a Minimum Execution Unit?
25:### Minimum Execution Units
69:### Command-to-Unit Mapping (ÂëΩ‰ª§‰∏éÊúÄÂ∞èÂçïÂÖÉÁöÑÊò†Â∞Ñ)
93:### Atomic Group Rules
107:## 3-Phase Workflow
109:### Phase 1: Analyze Requirements
166:### Phase 2: Discover Commands & Recommend Chain
170:#### Command Port Definition
391:#### Recommendation Algorithm
435:#### Display to User
451:### Phase 2b: Get User Confirmation
480:### Phase 3: Execute Sequential Command Chain
753:## State File Structure
830:### Status Flow
844:### Field Descriptions
862:## CommandRegistry Integration
884:## Universal Prompt Template
886:### Standard Format
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; rg -n "''^#" .claude/commands/workflow/execute.md | Select-Object -First 80' in C:\Project\Claude-Code-Workflow succeeded in 347ms:
7:# Workflow Execute Command
9:## Overview
14:## Usage
17:# Interactive mode (with confirmations)
21:# Auto mode (skip confirmations, use defaults)
26:# With auto-commit (commit after each task completion)
32:## Auto Mode Defaults
49:## Performance Optimization Strategy
58:## Core Rules
64:## Core Responsibilities
73:## Execution Philosophy
77:## Execution Process
130:## Execution Lifecycle
132:### Phase 1: Discovery
139:#### Step 1.1: Count Active Sessions
144:#### Step 1.2: Handle Session Selection
206:#### Step 1.3: Load Session Metadata
216:### Phase 2: Planning Document Validation
230:### Phase 3: TodoWrite Generation
236:# Update session status (idempotent - safe to run if already active)


thinking
**Testing file creation tools**

It looks like the smart_search tool faced an issue, but the write_file tool might work. I‚Äôm thinking of using apply_patch to add new files since it seems good for creating multiple files, following the priority for text editing. Creating six files should be manageable, but we‚Äôll need to ensure the directories exist first. I plan to create those using shell commands before I try adding files. After that, I‚Äôll run the necessary node scripts for verification.
thinking
**Implementing outliner skill phases**

The outliner skill seems to have various phases, starting with phase 01, but the user has asked for direct output. So, I‚Äôll focus on that. I should check if phase 01 includes the spec.json file. I want to inspect the phase 01 file for the expected structure of spec.json, so I plan to open the `phases/01-collect-spec.md` to see what it contains. I‚Äôm curious about how it‚Äôs set up and what I can implement from it!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/phases/01-collect-spec.md' in C:\Project\Claude-Code-Workflow succeeded in 322ms:
# Phase 01: Collect Spec (No Leakage)

## Goal

Turn a human requirement/rules document into a **minimal, structured spec** that is sufficient to generate:

- Slash command outline (CCW command MD skeleton)
- Agent outline (execution + tools + state)

Do **not** copy/paste existing implementation docs as input; treat them as oracle only during gap analysis.

## Required Inputs (ask if missing)

1. Command identity:
   - `group` (workflow|issue|learn|cli|other)
   - `name` (kebab-case)
   - `description` (one sentence)
   - `argument-hint` (optional)
2. Allowed tools:
   - exact list for frontmatter `allowed-tools`
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-Content -Raw .codex/skills/slash-command-outliner/specs/spec-input.md' in C:\Project\Claude-Code-Workflow succeeded in 310ms:
# Spec Input (Schema + Rules)

The spec is the only ‚Äúsource input‚Äù for outline generation. It must be **minimal** and **non-leaky**.

## Minimal JSON Schema (informal)

```json
{
  "command": {
    "group": "workflow|issue|learn|cli|other",
    "name": "kebab-case",
    "description": "one sentence",
    "argument_hint": "[--flag] \"args\"",
    "allowed_tools": ["Read(*)", "Write(*)"]
  },
  "intent": {
    "type": "analyze|plan|execute|brainstorm|manage|utility",
    "interaction": "single-shot|iterative|loop",
    "primary_user_value": "what this command accomplishes"
  },





thinking
**Creating spec.json structure**

I‚Äôm working on the spec.json to align with the schema, which should encompass intent, artifacts, constraints, and acceptance. While it could be beneficial to include heading lists from the requirement document, the input schema doesn‚Äôt provide much structure. That's fine ‚Äî I'll produce the spec.json by adhering to schema guidance while also incorporating some structural hints from the requirement doc. I'll set the "derived_from" references to point to the requirement doc, maintaining clarity without leaking full content.
thinking
**Structuring key artifacts and constraints**

I‚Äôll include essential artifacts like input export files, review directory, and output structure, including paths like `.workflow/active/*/.review/fix-export-*.json` and state files listed in the documentation. Yes, I found them in the doc! I'll also specify constraints, such as a default maximum of three iterations and an adjustable batch size of five, with ten parallel agents. For acceptance, I‚Äôll indicate evidence gating. Next, I'll move to creating references.json for phase 02 and selecting the `test-cycle-execute` as it aligns more closely with the review process.
thinking
**Creating generated-slash-outline.md**

I don‚Äôt need user confirmation since we‚Äôre running an auto cycle; that makes things easier. Now, I‚Äôll craft the generated-slash-outline.md, ensuring it aligns with the command doc and incorporates an evidence table. I plan to keep it concise and will outline required inputs, such as the export file or review directory, while including some optional flags. I'll also mention the latest export file discovery, output details, and execution phases, alongside error handling and example usage patterns. Moreover, I‚Äôll add frontmatter for clarity!
thinking
**Defining Workflow Review-Cycle-Fix Command**

I‚Äôm thinking about the title for the command ‚Äî I might go with "Workflow Review-Cycle-Fix Command" for clarity, even though the template uses a variable for it. The implementation pointers need to include an evidence table, starting with the command doc path in the first row, followed by code pointers. I'll ensure each row has the appropriate documentation file and heading, and that I‚Äôm referencing the correct .md files. For TypeScript evidence, I'll make sure to provide variety by selecting different files and anchors.
thinking
**Verifying pointers and gaps**

I need to verify existing pointers like `Test-Path` and ensure everything is documented. I'll be using PowerShell for file checking and `rg` for anchors, ensuring users can run the verification command. It‚Äôll look something like `Test-Path ccw/src/tools/command-registry.ts; rg -n "const relativePath = join('.claude', 'commands', 'workflow');" ccw/src/tools/command-registry.ts`. For the evidence table, I‚Äôll make sure each row has both documentation and TypeScript evidence. I also need a gap report, mentioning that all P0 gates are satisfied, and I‚Äôll create a minimal fix plan based on the gap report. Finally, I‚Äôll create the output directories efficiently!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; $outDir = '"'.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs'; New-Item -ItemType Directory -Force -Path "'$outDir | Out-Null; $outDir' in C:\Project\Claude-Code-Workflow succeeded in 311ms:
.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs

thinking
**Creating structured files**

I‚Äôm determining how to craft files using apply_patch to add content. I‚Äôve identified specific paths for each file, including spec.json, references.json, and various generated markdown outlines. I want to ensure the JSON formatting is consistent with 2 spaces. Now, should I include a created_at date? I think it should be stable, using an ISO string based on February 5, 2026. Even though I can‚Äôt get the current date now, I‚Äôll aim to include it properly.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; (Get-Date).ToString('"'o')" in C:\Project\Claude-Code-Workflow succeeded in 315ms:
2026-02-05T14:15:25.0246615+08:00

thinking
**Calculating UTC Time**

I need to consider the time zone, which is +08. I think it makes sense to include the creation time in UTC. I can compute it with `(Get-Date).ToUniversalTime()`. Should I also keep the output in the script? Maybe I can format it as `2026-02-05T06:15:25.024Z`. It seems like I‚Äôll be quickly computing this, and using PowerShell with `(Get-Date).ToUniversalTime().ToString('o')` could work well too!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; (Get-Date).ToUniversalTime().ToString('"'o')" in C:\Project\Claude-Code-Workflow succeeded in 316ms:
2026-02-05T06:15:37.2661091Z





thinking
**Clarifying document structure**

I'm thinking about including around 30 items, keeping it concise while including the required headings. The first heading would be "Workflow Review-Cycle-Fix Command" as H1, followed by "Quick Start" as H2. 

But I notice some subsequent headings related to "Fix from..." are actually comments in the code, not markdown headings, yet they are listed in the requirements. So, I should consider extracting actual headings from the command document for better alignment instead of relying solely on these comment lines.
thinking
**Analyzing documentation requirements**

The requirements document states that the command document is the oracle, but it's possible to derive headings from the requirements instead of the command to maintain clarity. I think we already have the oracle, and referencing its headings is non-leaky as per the explicit instruction not to paste full contents into the spec. 

To be safe, I'll stick with the headings from the requirements document and include a section for "implementation." Additionally, I need to compute candidates with scores, like `/workflow:test-cycle-execute` and `/workflow:review-module-cycle`, based on specific criteria for evaluation.
thinking
**Compiling workflow outlines**

I‚Äôm reviewing several workflow paths to determine their scores and relevance. For instance, the `/workflow:execute` path scores 85, indicating it serves as an orchestrator with strong execution strategy selection. The `/workflow:test-fix-gen` path, scoring 75, produces fix artifacts using command line interfaces.

I think I should go ahead and include the selected path, `test-cycle-execute`, and I‚Äôll note the reasons for my choices in `selected_reason` and `override_notes`. The outline I‚Äôm generating will feature necessary sections without being too vague and should follow the "Implementation Pointers" template to ensure clarity.
thinking
**Identifying documentation headings**

I‚Äôm reviewing evidence and documentation for the `review-cycle-fix.md` file, especially noting that the section "Phase 2: Parallel Planning Coordination" is within a code fence and not formatted as a heading. Instead, I should focus on headings like "Core Responsibilities" or "Agent Roles". I see that "### Agent Roles" is indeed a valid heading. 

For the TypeScript evidence, it's sourced from `ccw/src/tools/cli-executor-core.ts`, confirming the link to execution agents. I must also verify the existence of other agent documents and their paths to substantiate my analysis.
thinking
**Organizing evidence and documentation**

I‚Äôm examining various documentation files, including `execute.md` for evidence on the execution process and connections with TypeScript code. I noticed that the evidence must be properly formatted as headings. For instance, "Execution Process" and "CLI Execution Model" are solid choices.

I'll verify paths and consider organized representation for output files and existing documentation references. It appears that including planned rows can make things clearer, but I‚Äôm thinking of keeping it concise by using a single output directory pointer instead. Overall, I‚Äôll craft the patch carefully, ensuring everything is organized and follows the established format!
file update
A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
# Fix Plan: workflow:review-cycle-fix

## Scope-Labeled Fixes

1. [docs] Clarify entry mode resolution order
   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.

2. [docs] Make resume semantics concrete
   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
   - Define what happens when the marker exists but the referenced session folder is missing.

3. [docs/agents] Align agent naming for execution
   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).

4. [validation] Keep evidence gate green
   - After edits, run:
     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
---
name: review-cycle-fix
description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
group: workflow
---

# Workflow Review-Cycle-Fix Command

## Overview

- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
- Command: `/workflow:review-cycle-fix`

## Usage

```bash
/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
```

## Inputs

- Required inputs:
  - Either:
    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
- Optional inputs:
  - `--resume`: resume the latest active fix session (uses the session marker state file)
  - `--max-iterations=N`: max retries per finding (default: 3)
  - `--batch-size=N`: findings per planning batch (default: 5)

## Outputs / Artifacts

- Writes:
  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
- Reads:
  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
  - `.workflow/active/*/.review/` (auto-discovery + session folder)
  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)

## Implementation Pointers

- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
- Likely code locations:
  - `.claude/agents/cli-planning-agent.md`
  - `.claude/agents/cli-execution-agent.md`
  - `ccw/src/tools/command-registry.ts`
  - `ccw/src/tools/cli-executor-core.ts`
  - `ccw/src/core/services/flow-executor.ts`
  - Reference: `.claude/commands/workflow/test-cycle-execute.md`

### Evidence (Existing vs Planned)

| Pointer | Status | Evidence (docs + TS) | Verify | Why |
|---|---|---|---|---|
| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |

## Execution Process

1. Discovery & initialization
   - Validate input mode (export-file vs review-dir vs --resume).
   - Resolve export JSON (auto-discover latest when given a directory).
   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
2. Phase 1.5: Intelligent grouping & batching
   - Group findings by file proximity + dimension/root-cause affinity.
   - Emit batch descriptors sized by `--batch-size` (default 5).
3. Phase 2: Parallel planning coordination
   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
4. Phase 3: Execution orchestration (stage-based)
   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
   - Each execution agent applies fixes, runs targeted tests, and reports progress.
   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
5. Completion
   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.

## Error Handling

- Input errors:
  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
- Planning errors (Phase 2):
  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
- Execution errors (Phase 3):
  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.

## Examples

```bash
# Fix from exported findings file (session-based path)
/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json

# Fix from review directory (auto-discovers latest export)
/workflow:review-cycle-fix .workflow/active/WFS-123/.review/

# Resume interrupted fix session
/workflow:review-cycle-fix --resume
```

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
# Gap Report: workflow:review-cycle-fix

## Reference

- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)

## P0 Gaps (Must Fix)

- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).

## P1 Gaps (Should Fix)

- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.

## P2 Gaps (Optional)

- Add one end-to-end example that shows the resulting session folder tree after a successful run.
- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).

## Implementation Pointers (Evidence)

| Pointer | Status | Evidence | Verify | Notes |
|---|---|---|---|---|
| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |

## Implementation Hints (Tooling/Server)

- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).

## Proposed Fix Plan (Minimal)

1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
# Agent Outline: workflow:review-cycle-fix

## Purpose

Implement and/or evolve the slash command according to CCW conventions with minimal regressions.

## Execution Model

- Default: incremental, testable changes
- Use ACE-tool to find existing patterns before adding new abstractions
- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`

## State & Artifacts

- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
- Required outputs:
  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
  - Validation notes (including evidence-gate pass)

## Tooling

- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
- Non-negotiables:
  - no unrelated changes
  - verify non-regression against completed corpus
  - never mark implementation pointers as Existing unless they are verifiable in-repo

## Validation Strategy

- P0 gates: frontmatter + allowed-tools + core sections + artifact references
- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
- Regression: compare against snapshots for already-completed commands

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
{
  "schema_version": "1.0.0",
  "created_at": "2026-02-05T06:15:37.266Z",
  "command": {
    "slash": "/workflow:review-cycle-fix",
    "group": "workflow",
    "name": "review-cycle-fix"
  },
  "candidates": [
    {
      "slash": "/workflow:test-cycle-execute",
      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
      "score": 95,
      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
    },
    {
      "slash": "/workflow:review-module-cycle",
      "file_path": ".claude/commands/workflow/review-module-cycle.md",
      "score": 90,
      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
    },
    {
      "slash": "/workflow:execute",
      "file_path": ".claude/commands/workflow/execute.md",
      "score": 85,
      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
    },
    {
      "slash": "/workflow:test-fix-gen",
      "file_path": ".claude/commands/workflow/test-fix-gen.md",
      "score": 75,
      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
    },
    {
      "slash": "/workflow:review-session-cycle",
      "file_path": ".claude/commands/workflow/review-session-cycle.md",
      "score": 70,
      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
    }
  ],
  "selected": {
    "slash": "/workflow:test-cycle-execute",
    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
  }
}

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
{
  "schema_version": "1.0.0",
  "created_at": "2026-02-05T06:15:37.266Z",
  "source": {
    "type": "requirements_doc",
    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
  },
  "command": {
    "group": "workflow",
    "name": "review-cycle-fix",
    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
    "allowed_tools": [
      "Skill(*)",
      "TodoWrite(*)",
      "Read(*)",
      "Bash(*)",
      "Task(*)",
      "Edit(*)",
      "Write(*)"
    ]
  },
  "intent": {
    "type": "execute",
    "interaction": "loop",
    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
  },
  "artifacts": {
    "reads": [
      ".workflow/active/*/.review/fix-export-*.json",
      ".workflow/active/*/.review/",
      ".workflow/active/*/.review/active-fix-session.json",
      ".workflow/active/*/.review/fixes/*/fix-plan.json",
      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
    ],
    "writes": [
      ".workflow/active/*/.review/active-fix-session.json",
      ".workflow/active/*/.review/fixes/*/",
      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
      ".workflow/active/*/.review/fixes/*/fix-plan.json",
      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
      ".workflow/active/*/.review/fixes/*/logs/*"
    ]
  },
  "constraints": {
    "defaults": {
      "max_iterations_per_finding": 3,
      "batch_size": 5,
      "max_parallel_planning_agents": 10
    },
    "must_not": [
      "Do not claim pointers are Existing unless verifiable in-repo.",
      "Do not expose secrets or user-specific paths in outputs.",
      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
    ]
  },
  "acceptance": {
    "p0": [
      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
    ]
  },
  "implementation": {
    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
    "code_pointers": [
      "ccw/src/tools/command-registry.ts",
      "ccw/src/tools/cli-executor-core.ts",
      "ccw/src/core/services/flow-executor.ts",
      ".claude/agents/cli-planning-agent.md",
      ".claude/agents/cli-execution-agent.md"
    ]
  },
  "structure_hints": {
    "headings": [
      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
      { "level": 2, "text": "Quick Start" },
      { "level": 2, "text": "What & Why" },
      { "level": 3, "text": "Core Concept" },
      { "level": 3, "text": "Value Proposition" },
      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
      { "level": 3, "text": "Execution Flow" },
      { "level": 3, "text": "Agent Roles" },
      { "level": 2, "text": "Enhanced Features" },
      { "level": 2, "text": "Core Responsibilities" },
      { "level": 3, "text": "Orchestrator" },
      { "level": 3, "text": "Output File Structure" },
      { "level": 3, "text": "Agent Invocation Template" },
      { "level": 2, "text": "Input Data" },
      { "level": 2, "text": "Output Requirements" },
      { "level": 2, "text": "Analysis Requirements" },
      { "level": 2, "text": "Output Files" },
      { "level": 2, "text": "Quality Checklist" },
      { "level": 2, "text": "Execution Flow" },
      { "level": 3, "text": "Main Execution Loop" },
      { "level": 2, "text": "Critical Requirements" },
      { "level": 2, "text": "Test Patterns" },
      { "level": 2, "text": "Related Commands" }
    ]
  }
}

apply_patch(auto_approved=true) exited 0 in 120ms:
Success. Updated the following files:
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..fae8f51c16e4756665aec57044ac84e3c7585526
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,45 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..648a55241171a13f5f44c40b860fde5ed75828be
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,112 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..fae8f51c16e4756665aec57044ac84e3c7585526
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,45 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..648a55241171a13f5f44c40b860fde5ed75828be
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,112 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md' in C:\Project\Claude-Code-Workflow succeeded in 339ms:
OK: evidence verification passed
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..fae8f51c16e4756665aec57044ac84e3c7585526
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,45 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..648a55241171a13f5f44c40b860fde5ed75828be
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,112 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md' in C:\Project\Claude-Code-Workflow succeeded in 335ms:
OK: evidence verification passed
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..fae8f51c16e4756665aec57044ac84e3c7585526
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,45 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..648a55241171a13f5f44c40b860fde5ed75828be
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,112 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+





thinking
**Ensuring template compliance**

I've confirmed that the outputs are concise, but I need to focus on a few things. The user wants specific files like spec.json and references.json under outputs, and I've already taken care of that. However, our generated outline must adhere closely to the template from .codex/skills/slash-command-outliner/templates/. The omission of the "Notes:" section after the evidence table seems to be a potential violation. Considering user hard rule P0 emphasizes following templates, I should include that section.
thinking
**Adjusting to template requirements**

I noticed that the gap-report template includes a "Notes" section, which we didn't include in our output. The requirement clearly states to follow templates, meaning we need to use the correct section structure and include the evidence table. I'll compare our file with the template: it has the same sections, but we‚Äôre missing the filled "Notes" block. To be safe, I will add lines to it, specifically detailing that there should be one row per pointer. We‚Äôll also aim to fill in the Notes correctly.
thinking
**Ensuring compliance with templates**

To be safe, I plan to add the "Notes:" section as per the template to ensure compliance. This won't affect the evidence. The agent outline template includes a "Tooling" section, which we've matched but expanded on. The gap report template has sections like "Implementation Hints" and "Proposed Fix Plan," which we included. However, I noticed we missed the "Rules (P0)" disclaimers in table descriptions. I think it‚Äôs better to add them along with pre-table explanatory paragraphs for compliance. I‚Äôll include the exact rules but keep them concise.
thinking
**Patching template files**

I‚Äôm focusing on updating both markdown files to include the necessary sections from our template. In the spec template, I‚Äôll add text after the "### Evidence (Existing vs Planned)" heading: "You MUST label each pointer..." along with the relevant rules copied from the template. Additionally, I‚Äôll include a Notes section with a bullet list after the table. For the gap report, I plan to add the line "You MUST provide an evidence table..." and include the rules and evidence format recommendations before the table, plus a Notes block afterward. I'll patch these changes accordingly!
file update
M C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -58,2 +58,10 @@
 
+You MUST label each pointer as `Existing` (verifiable in repo now) or `Planned` (will be created/modified).
+
+Rules:
+- `Existing` MUST include evidence from BOTH:
+  - a command doc source: `.claude/commands/**.md` (section heading is sufficient)
+  - a TypeScript source: `ccw/src/**` (function name / subcommand case / a ripgrep-able string)
+- If you cannot verify, downgrade to `Planned` and add a concrete `Verify` step (e.g. `Test-Path <path>`, `rg "<pattern>" <path>`).
+
 | Pointer | Status | Evidence (docs + TS) | Verify | Why |
@@ -69,2 +77,6 @@
 
+Notes:
+- Expand ‚ÄúLikely code locations‚Äù into **one row per pointer** (do not keep it as a single aggregated cell).
+- For TS evidence, prefer anchors like `function <name>` / `case '<subcommand>'` / a stable string literal that can be found via `rg`.
+
 ## Execution Process
@@ -111,2 +123 @@
 ```
-
apply_patch(auto_approved=true) exited 0 in 117ms:
Success. Updated the following files:
M .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..fae8f51c16e4756665aec57044ac84e3c7585526
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,45 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c2289070f76f4eb5b69f4c8b2540b10b7e81ac35
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,123 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+You MUST label each pointer as `Existing` (verifiable in repo now) or `Planned` (will be created/modified).
+
+Rules:
+- `Existing` MUST include evidence from BOTH:
+  - a command doc source: `.claude/commands/**.md` (section heading is sufficient)
+  - a TypeScript source: `ccw/src/**` (function name / subcommand case / a ripgrep-able string)
+- If you cannot verify, downgrade to `Planned` and add a concrete `Verify` step (e.g. `Test-Path <path>`, `rg "<pattern>" <path>`).
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+Notes:
+- Expand ‚ÄúLikely code locations‚Äù into **one row per pointer** (do not keep it as a single aggregated cell).
+- For TS evidence, prefer anchors like `function <name>` / `case '<subcommand>'` / a stable string literal that can be found via `rg`.
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..fae8f51c16e4756665aec57044ac84e3c7585526
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,45 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c2289070f76f4eb5b69f4c8b2540b10b7e81ac35
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,123 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+You MUST label each pointer as `Existing` (verifiable in repo now) or `Planned` (will be created/modified).
+
+Rules:
+- `Existing` MUST include evidence from BOTH:
+  - a command doc source: `.claude/commands/**.md` (section heading is sufficient)
+  - a TypeScript source: `ccw/src/**` (function name / subcommand case / a ripgrep-able string)
+- If you cannot verify, downgrade to `Planned` and add a concrete `Verify` step (e.g. `Test-Path <path>`, `rg "<pattern>" <path>`).
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+Notes:
+- Expand ‚ÄúLikely code locations‚Äù into **one row per pointer** (do not keep it as a single aggregated cell).
+- For TS evidence, prefer anchors like `function <name>` / `case '<subcommand>'` / a stable string literal that can be found via `rg`.
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

file update
M C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -22,2 +22,12 @@
 
+You MUST provide an evidence table for all key implementation pointers mentioned in the outlines.
+
+Rules (P0):
+- Every pointer MUST be labeled `Existing` or `Planned`.
+- `Existing` MUST be verifiable (path exists). Include a concrete `Verify` command for each existing pointer.
+- Do NOT describe `Planned` pointers as ‚Äúvalidated/exists‚Äù.
+- Evidence MUST reference BOTH sources:
+  - command docs: `.claude/commands/**.md` (section heading is enough)
+  - TypeScript implementation: `ccw/src/**` (function name / subcommand case / ripgrep-able string)
+
 | Pointer | Status | Evidence | Verify | Notes |
@@ -33,2 +43,8 @@
 
+Notes:
+- Use **one row per pointer**.
+- Evidence format recommendation:
+  - `docs: <file> / <section heading>`
+  - `ts: <file> / <function|case|pattern>`
+
 ## Implementation Hints (Tooling/Server)
@@ -44,2 +60 @@
 3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
-
apply_patch(auto_approved=true) exited 0 in 116ms:
Success. Updated the following files:
M .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..a0ff8c41cd95722693c7cde61f61088db6d606e6
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,60 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+You MUST provide an evidence table for all key implementation pointers mentioned in the outlines.
+
+Rules (P0):
+- Every pointer MUST be labeled `Existing` or `Planned`.
+- `Existing` MUST be verifiable (path exists). Include a concrete `Verify` command for each existing pointer.
+- Do NOT describe `Planned` pointers as ‚Äúvalidated/exists‚Äù.
+- Evidence MUST reference BOTH sources:
+  - command docs: `.claude/commands/**.md` (section heading is enough)
+  - TypeScript implementation: `ccw/src/**` (function name / subcommand case / ripgrep-able string)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+Notes:
+- Use **one row per pointer**.
+- Evidence format recommendation:
+  - `docs: <file> / <section heading>`
+  - `ts: <file> / <function|case|pattern>`
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c2289070f76f4eb5b69f4c8b2540b10b7e81ac35
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,123 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+You MUST label each pointer as `Existing` (verifiable in repo now) or `Planned` (will be created/modified).
+
+Rules:
+- `Existing` MUST include evidence from BOTH:
+  - a command doc source: `.claude/commands/**.md` (section heading is sufficient)
+  - a TypeScript source: `ccw/src/**` (function name / subcommand case / a ripgrep-able string)
+- If you cannot verify, downgrade to `Planned` and add a concrete `Verify` step (e.g. `Test-Path <path>`, `rg "<pattern>" <path>`).
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+Notes:
+- Expand ‚ÄúLikely code locations‚Äù into **one row per pointer** (do not keep it as a single aggregated cell).
+- For TS evidence, prefer anchors like `function <name>` / `case '<subcommand>'` / a stable string literal that can be found via `rg`.
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..a0ff8c41cd95722693c7cde61f61088db6d606e6
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,60 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+You MUST provide an evidence table for all key implementation pointers mentioned in the outlines.
+
+Rules (P0):
+- Every pointer MUST be labeled `Existing` or `Planned`.
+- `Existing` MUST be verifiable (path exists). Include a concrete `Verify` command for each existing pointer.
+- Do NOT describe `Planned` pointers as ‚Äúvalidated/exists‚Äù.
+- Evidence MUST reference BOTH sources:
+  - command docs: `.claude/commands/**.md` (section heading is enough)
+  - TypeScript implementation: `ccw/src/**` (function name / subcommand case / ripgrep-able string)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+Notes:
+- Use **one row per pointer**.
+- Evidence format recommendation:
+  - `docs: <file> / <section heading>`
+  - `ts: <file> / <function|case|pattern>`
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c2289070f76f4eb5b69f4c8b2540b10b7e81ac35
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,123 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+You MUST label each pointer as `Existing` (verifiable in repo now) or `Planned` (will be created/modified).
+
+Rules:
+- `Existing` MUST include evidence from BOTH:
+  - a command doc source: `.claude/commands/**.md` (section heading is sufficient)
+  - a TypeScript source: `ccw/src/**` (function name / subcommand case / a ripgrep-able string)
+- If you cannot verify, downgrade to `Planned` and add a concrete `Verify` step (e.g. `Test-Path <path>`, `rg "<pattern>" <path>`).
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+Notes:
+- Expand ‚ÄúLikely code locations‚Äù into **one row per pointer** (do not keep it as a single aggregated cell).
+- For TS evidence, prefer anchors like `function <name>` / `case '<subcommand>'` / a stable string literal that can be found via `rg`.
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md' in C:\Project\Claude-Code-Workflow succeeded in 279ms:
OK: evidence verification passed
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md' in C:\Project\Claude-Code-Workflow succeeded in 279ms:
OK: evidence verification passed
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..a0ff8c41cd95722693c7cde61f61088db6d606e6
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,60 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+You MUST provide an evidence table for all key implementation pointers mentioned in the outlines.
+
+Rules (P0):
+- Every pointer MUST be labeled `Existing` or `Planned`.
+- `Existing` MUST be verifiable (path exists). Include a concrete `Verify` command for each existing pointer.
+- Do NOT describe `Planned` pointers as ‚Äúvalidated/exists‚Äù.
+- Evidence MUST reference BOTH sources:
+  - command docs: `.claude/commands/**.md` (section heading is enough)
+  - TypeScript implementation: `ccw/src/**` (function name / subcommand case / ripgrep-able string)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+Notes:
+- Use **one row per pointer**.
+- Evidence format recommendation:
+  - `docs: <file> / <section heading>`
+  - `ts: <file> / <function|case|pattern>`
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c2289070f76f4eb5b69f4c8b2540b10b7e81ac35
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,123 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+You MUST label each pointer as `Existing` (verifiable in repo now) or `Planned` (will be created/modified).
+
+Rules:
+- `Existing` MUST include evidence from BOTH:
+  - a command doc source: `.claude/commands/**.md` (section heading is sufficient)
+  - a TypeScript source: `ccw/src/**` (function name / subcommand case / a ripgrep-able string)
+- If you cannot verify, downgrade to `Planned` and add a concrete `Verify` step (e.g. `Test-Path <path>`, `rg "<pattern>" <path>`).
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+Notes:
+- Expand ‚ÄúLikely code locations‚Äù into **one row per pointer** (do not keep it as a single aggregated cell).
+- For TS evidence, prefer anchors like `function <name>` / `case '<subcommand>'` / a stable string literal that can be found via `rg`.
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding=[Text.UTF8Encoding]::new($false);[Console]::OutputEncoding=[Text.UTF8Encoding]::new($false);chcp 65001 > $null; Get-ChildItem -File .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs | Sort-Object Name | Select-Object Name,Length' in C:\Project\Claude-Code-Workflow succeeded in 331ms:

[32;1mName                      [0m[32;1m Length[0m
[32;1m----                      [0m [32;1m------[0m
fix-plan.md                  1275
gap-report.md                5339
generated-agent-outline.md   1309
generated-slash-outline.md   8222
references.json              2028
spec.json                    4558

file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..a0ff8c41cd95722693c7cde61f61088db6d606e6
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,60 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+You MUST provide an evidence table for all key implementation pointers mentioned in the outlines.
+
+Rules (P0):
+- Every pointer MUST be labeled `Existing` or `Planned`.
+- `Existing` MUST be verifiable (path exists). Include a concrete `Verify` command for each existing pointer.
+- Do NOT describe `Planned` pointers as ‚Äúvalidated/exists‚Äù.
+- Evidence MUST reference BOTH sources:
+  - command docs: `.claude/commands/**.md` (section heading is enough)
+  - TypeScript implementation: `ccw/src/**` (function name / subcommand case / ripgrep-able string)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+Notes:
+- Use **one row per pointer**.
+- Evidence format recommendation:
+  - `docs: <file> / <section heading>`
+  - `ts: <file> / <function|case|pattern>`
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c2289070f76f4eb5b69f4c8b2540b10b7e81ac35
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,123 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+You MUST label each pointer as `Existing` (verifiable in repo now) or `Planned` (will be created/modified).
+
+Rules:
+- `Existing` MUST include evidence from BOTH:
+  - a command doc source: `.claude/commands/**.md` (section heading is sufficient)
+  - a TypeScript source: `ccw/src/**` (function name / subcommand case / a ripgrep-able string)
+- If you cannot verify, downgrade to `Planned` and add a concrete `Verify` step (e.g. `Test-Path <path>`, `rg "<pattern>" <path>`).
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+Notes:
+- Expand ‚ÄúLikely code locations‚Äù into **one row per pointer** (do not keep it as a single aggregated cell).
+- For TS evidence, prefer anchors like `function <name>` / `case '<subcommand>'` / a stable string literal that can be found via `rg`.
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+


thinking
**Finalizing report requirements**

I‚Äôm checking the final requirements to make sure everything is neat and concise. The generated outline is 8KB, which seems good in size. I also need to confirm there are no placeholders in the evidence rows, and I can confirm they don‚Äôt have any "TBD" marked. Everything seems to be in order, so I‚Äôll go ahead and produce the final response now!
codex
Used skill `slash-command-outliner` and wrote the required outputs under `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/`:

- `.../spec.json`
- `.../references.json` (selected reference: `/workflow:test-cycle-execute`)
- `.../generated-slash-outline.md`
- `.../generated-agent-outline.md`
- `.../gap-report.md`
- `.../fix-plan.md`

Deterministic evidence gate passed:
- `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.../gap-report.md`
- `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.../generated-slash-outline.md`
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..7086601e1c70a810f055de3127ed8ba205724467
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/fix-plan.md
@@ -0,0 +1,21 @@
+# Fix Plan: workflow:review-cycle-fix
+
+## Scope-Labeled Fixes
+
+1. [docs] Clarify entry mode resolution order
+   - Define precedence: `--resume` > `<export-file>` > `<review-dir>`.
+   - Specify how review-dir auto-discovers the latest export and what filename patterns are accepted.
+
+2. [docs] Make resume semantics concrete
+   - Identify the authoritative marker file(s) for resume (e.g. `active-fix-session.json`) and what fields are required.
+   - Define what happens when the marker exists but the referenced session folder is missing.
+
+3. [docs/agents] Align agent naming for execution
+   - Confirm whether the intended agent is `@cli-execute-agent` or `@cli-execution-agent`.
+   - Update `.claude/commands/workflow/review-cycle-fix.md` and/or agent docs accordingly (no behavior changes).
+
+4. [validation] Keep evidence gate green
+   - After edits, run:
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md`
+     - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..a0ff8c41cd95722693c7cde61f61088db6d606e6
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/gap-report.md
@@ -0,0 +1,60 @@
+# Gap Report: workflow:review-cycle-fix
+
+## Reference
+
+- Selected reference: /workflow:test-cycle-execute (`.claude/commands/workflow/test-cycle-execute.md`)
+
+## P0 Gaps (Must Fix)
+
+- None identified for the generated outline (frontmatter + required core sections present; evidence tables included).
+
+## P1 Gaps (Should Fix)
+
+- Align naming in docs vs agents: command docs reference `@cli-execute-agent`, while the repo agent file is `.claude/agents/cli-execution-agent.md` (confirm canonical name and update docs if needed).
+- Tighten resume behavior description: specify precisely which marker file(s) are authoritative for `--resume` and what happens if multiple sessions exist.
+
+## P2 Gaps (Optional)
+
+- Add one end-to-end example that shows the resulting session folder tree after a successful run.
+- Add a short ‚Äúsafe defaults‚Äù note (what happens if tests cannot be executed on the machine).
+
+## Implementation Pointers (Evidence)
+
+You MUST provide an evidence table for all key implementation pointers mentioned in the outlines.
+
+Rules (P0):
+- Every pointer MUST be labeled `Existing` or `Planned`.
+- `Existing` MUST be verifiable (path exists). Include a concrete `Verify` command for each existing pointer.
+- Do NOT describe `Planned` pointers as ‚Äúvalidated/exists‚Äù.
+- Evidence MUST reference BOTH sources:
+  - command docs: `.claude/commands/**.md` (section heading is enough)
+  - TypeScript implementation: `ccw/src/**` (function name / subcommand case / ripgrep-able string)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | oracle command doc / artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | batch planning agent |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | fix execution agent |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | command metadata scanning for help/indexing |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI execution substrate for tool-based agents |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | execution engine (slash-command nodes) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | selected reference for loop + parallel planning patterns |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime outputs (created during execution) |
+
+Notes:
+- Use **one row per pointer**.
+- Evidence format recommendation:
+  - `docs: <file> / <section heading>`
+  - `ts: <file> / <function|case|pattern>`
+
+## Implementation Hints (Tooling/Server)
+
+- Command discovery/indexing: `ccw/src/tools/command-registry.ts` scans `.claude/commands/workflow` and parses YAML frontmatter.
+- CLI tool execution substrate: `ccw/src/tools/cli-executor-core.ts` spawns the selected CLI tool and captures stdout/stderr for logs.
+- Flow execution: `ccw/src/core/services/flow-executor.ts` contains slash-command execution helpers (useful when this command is invoked as part of a larger workflow).
+
+## Proposed Fix Plan (Minimal)
+
+1. Docs: ensure `/workflow:review-cycle-fix` doc clearly specifies the three entry modes (export-file, review-dir, --resume) and the authoritative state files for resuming.
+2. Agents: confirm `@cli-execute-agent` naming; update the command doc or agent naming to be consistent.
+3. Evidence: keep implementation pointers labeled Existing|Planned and maintain dual-source evidence anchors.
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..197f00e642baabee583302df5172f5f104ab1034
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,34 @@
+# Agent Outline: workflow:review-cycle-fix
+
+## Purpose
+
+Implement and/or evolve the slash command according to CCW conventions with minimal regressions.
+
+## Execution Model
+
+- Default: incremental, testable changes
+- Use ACE-tool to find existing patterns before adding new abstractions
+- Preserve orchestrator boundary: delegate batch planning to `@cli-planning-agent` and fix execution to `@cli-execution-agent`
+
+## State & Artifacts
+
+- Session folder (per review session): `.workflow/active/*/.review/fixes/<fix-session-id>/`
+- Required outputs:
+  - Slash MD (command doc): `.claude/commands/workflow/review-cycle-fix.md`
+  - Fix session artifacts: `partial-plan-*.json`, `fix-plan.json`, `fix-progress-*.json`, logs
+  - Validation notes (including evidence-gate pass)
+
+## Tooling
+
+- Allowed tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+- Non-negotiables:
+  - no unrelated changes
+  - verify non-regression against completed corpus
+  - never mark implementation pointers as Existing unless they are verifiable in-repo
+
+## Validation Strategy
+
+- P0 gates: frontmatter + allowed-tools + core sections + artifact references
+- Evidence gate (deep mode): run verify-evidence.js on gap-report + slash outline
+- Regression: compare against snapshots for already-completed commands
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c2289070f76f4eb5b69f4c8b2540b10b7e81ac35
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,123 @@
+---
+name: review-cycle-fix
+description: Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.
+argument-hint: "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]"
+allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
+group: workflow
+---
+
+# Workflow Review-Cycle-Fix Command
+
+## Overview
+
+- Goal: Fix exported review findings by batching related issues, planning in parallel, executing fixes with conservative test verification, and tracking resumable progress.
+- Command: `/workflow:review-cycle-fix`
+
+## Usage
+
+```bash
+/workflow:review-cycle-fix <export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]
+```
+
+## Inputs
+
+- Required inputs:
+  - Either:
+    - `<export-file>`: a findings export JSON (from the review cycle dashboard), or
+    - `<review-dir>`: a `.review/` directory that contains exported findings (auto-discovers latest export)
+- Optional inputs:
+  - `--resume`: resume the latest active fix session (uses the session marker state file)
+  - `--max-iterations=N`: max retries per finding (default: 3)
+  - `--batch-size=N`: findings per planning batch (default: 5)
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/active/*/.review/active-fix-session.json` (session marker / resume)
+  - `.workflow/active/*/.review/fixes/*/partial-plan-*.json` (per-batch planning output)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (aggregated timeline + groups)
+  - `.workflow/active/*/.review/fixes/*/fix-progress-*.json` (per-group progress updates)
+  - `.workflow/active/*/.review/fixes/*/logs/*` (CLI stdout/stderr + test outputs)
+- Reads:
+  - `.workflow/active/*/.review/fix-export-*.json` (findings input)
+  - `.workflow/active/*/.review/` (auto-discovery + session folder)
+  - `.workflow/active/*/.review/fixes/*/fix-plan.json` (resume / execute)
+
+## Implementation Pointers
+
+- Command doc: `.claude/commands/workflow/review-cycle-fix.md`
+- Likely code locations:
+  - `.claude/agents/cli-planning-agent.md`
+  - `.claude/agents/cli-execution-agent.md`
+  - `ccw/src/tools/command-registry.ts`
+  - `ccw/src/tools/cli-executor-core.ts`
+  - `ccw/src/core/services/flow-executor.ts`
+  - Reference: `.claude/commands/workflow/test-cycle-execute.md`
+
+### Evidence (Existing vs Planned)
+
+You MUST label each pointer as `Existing` (verifiable in repo now) or `Planned` (will be created/modified).
+
+Rules:
+- `Existing` MUST include evidence from BOTH:
+  - a command doc source: `.claude/commands/**.md` (section heading is sufficient)
+  - a TypeScript source: `ccw/src/**` (function name / subcommand case / a ripgrep-able string)
+- If you cannot verify, downgrade to `Planned` and add a concrete `Verify` step (e.g. `Test-Path <path>`, `rg "<pattern>" <path>`).
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/review-cycle-fix.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Workflow Review-Cycle-Fix Command` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path .claude/commands/workflow/review-cycle-fix.md` | canonical command behavior + artifact contract |
+| `.claude/agents/cli-planning-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Agent Roles` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-planning-agent.md` | planning sub-agent for Phase 2 (batch plans) |
+| `.claude/agents/cli-execution-agent.md` | Existing | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Orchestrator Boundary (CRITICAL)` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path .claude/agents/cli-execution-agent.md` | execution sub-agent for Phase 3 (apply fixes + tests) |
+| `ccw/src/tools/command-registry.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CommandRegistry Integration` ; ts: `ccw/src/tools/command-registry.ts` / `const relativePath = join('.claude', 'commands', 'workflow');` | `Test-Path ccw/src/tools/command-registry.ts` | metadata scanning for workflow command docs (frontmatter) |
+| `ccw/src/tools/cli-executor-core.ts` | Existing | docs: `.claude/commands/ccw-coordinator.md` / `CLI Execution Model` ; ts: `ccw/src/tools/cli-executor-core.ts` / `const child = spawn(commandToSpawn, argsToSpawn, {` | `Test-Path ccw/src/tools/cli-executor-core.ts` | CLI tool execution substrate (stdout/stderr capture) |
+| `ccw/src/core/services/flow-executor.ts` | Existing | docs: `.claude/commands/workflow/execute.md` / `Execution Process` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path ccw/src/core/services/flow-executor.ts` | command/flow execution engine (slash node execution) |
+| `.claude/commands/workflow/test-cycle-execute.md` | Existing | docs: `.claude/commands/workflow/test-cycle-execute.md` / `Workflow Test-Cycle-Execute Command` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .claude/commands/workflow/test-cycle-execute.md` | closest reference for multi-phase loop + agent orchestration |
+| `.workflow/active/*/.review/fixes/*/` | Planned | docs: `.claude/commands/workflow/review-cycle-fix.md` / `Output File Structure` ; ts: `ccw/src/core/services/flow-executor.ts` / `private async runSlashCommand(node: FlowNode): Promise<NodeResult> {` | `Test-Path .workflow/active/*/.review/fixes` | runtime session output root for all fix artifacts |
+
+Notes:
+- Expand ‚ÄúLikely code locations‚Äù into **one row per pointer** (do not keep it as a single aggregated cell).
+- For TS evidence, prefer anchors like `function <name>` / `case '<subcommand>'` / a stable string literal that can be found via `rg`.
+
+## Execution Process
+
+1. Discovery & initialization
+   - Validate input mode (export-file vs review-dir vs --resume).
+   - Resolve export JSON (auto-discover latest when given a directory).
+   - Create (or load) `fix-session-id` and initialize session marker + folder layout.
+2. Phase 1.5: Intelligent grouping & batching
+   - Group findings by file proximity + dimension/root-cause affinity.
+   - Emit batch descriptors sized by `--batch-size` (default 5).
+3. Phase 2: Parallel planning coordination
+   - Launch up to `MAX_PARALLEL=10` planning agents concurrently; each writes `partial-plan-*.json`.
+   - Aggregate partial plans into `fix-plan.json` (resolve cross-batch dependencies; serialize conflicting file edits).
+4. Phase 3: Execution orchestration (stage-based)
+   - For each timeline stage, run groups in parallel or serial based on the aggregated plan.
+   - Each execution agent applies fixes, runs targeted tests, and reports progress.
+   - On test failure: rollback + retry up to `--max-iterations`; otherwise mark failed and continue.
+5. Completion
+   - Finalize progress state; summarize pass/fail per finding and where to continue manually if needed.
+
+## Error Handling
+
+- Input errors:
+  - Missing/invalid export file or review directory -> fail fast with a clear message (do not create a session).
+  - `--resume` without an active session marker -> explain how to pass an export-file or review-dir.
+- Planning errors (Phase 2):
+  - A planning agent fails -> mark the batch failed, continue planning other batches, then decide whether to abort or execute partial plan safely.
+- Execution errors (Phase 3):
+  - Test runner missing / command not found -> warn and continue (do not falsely claim verification).
+  - Git rollback/commit failures -> stop affected group, persist logs, keep session resumable.
+
+## Examples
+
+```bash
+# Fix from exported findings file (session-based path)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/fix-export-1706184622000.json
+
+# Fix from review directory (auto-discovers latest export)
+/workflow:review-cycle-fix .workflow/active/WFS-123/.review/
+
+# Resume interrupted fix session
+/workflow:review-cycle-fix --resume
+```
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..80819689df93aeead0b97e3371131f93b003f29f
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/references.json
@@ -0,0 +1,47 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "command": {
+    "slash": "/workflow:review-cycle-fix",
+    "group": "workflow",
+    "name": "review-cycle-fix"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:test-cycle-execute",
+      "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+      "score": 95,
+      "why": "Closest orchestrator: multi-phase loop, explicit orchestrator boundary, agent roles, session artifacts, parallel planning via @cli-planning-agent, conservative verification."
+    },
+    {
+      "slash": "/workflow:review-module-cycle",
+      "file_path": ".claude/commands/workflow/review-module-cycle.md",
+      "score": 90,
+      "why": "Review-cycle family with parallel sub-agents + aggregation and structured TodoWrite progress tracking (similar to Phase 1.5+2+3 coordination)."
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 85,
+      "why": "General workflow orchestrator with resume, execution models (parallel/serial/phased), TodoWrite coordination, and error recovery patterns."
+    },
+    {
+      "slash": "/workflow:test-fix-gen",
+      "file_path": ".claude/commands/workflow/test-fix-gen.md",
+      "score": 75,
+      "why": "Produces fix-related artifacts and integrates with testing/fix workflows; useful for artifact naming and conservative verification conventions."
+    },
+    {
+      "slash": "/workflow:review-session-cycle",
+      "file_path": ".claude/commands/workflow/review-session-cycle.md",
+      "score": 70,
+      "why": "Adjacent command chain; references /workflow:review-cycle-fix as the automated fixing step after review findings export."
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:test-cycle-execute",
+    "file_path": ".claude/commands/workflow/test-cycle-execute.md",
+    "reason": "Max overlap in execution model (parallel planning + stage-based execution), artifacts (session folder + per-unit outputs), and agent/tool surface."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..a8e72c02f8e189f2ca34b5d45f7aa82d32b9691c
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-045/specs/outputs/spec.json
@@ -0,0 +1,107 @@
+{
+  "schema_version": "1.0.0",
+  "created_at": "2026-02-05T06:15:37.266Z",
+  "source": {
+    "type": "requirements_doc",
+    "path": ".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-045.requirements.md",
+    "oracle_command_doc": ".claude/commands/workflow/review-cycle-fix.md"
+  },
+  "command": {
+    "group": "workflow",
+    "name": "review-cycle-fix",
+    "description": "Automated fixing of code review findings with AI-powered planning and coordinated execution. Uses intelligent grouping, multi-stage timeline coordination, and test-driven verification.",
+    "argument_hint": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "usage_args": "<export-file|review-dir> [--resume] [--max-iterations=N] [--batch-size=N]",
+    "allowed_tools": [
+      "Skill(*)",
+      "TodoWrite(*)",
+      "Read(*)",
+      "Bash(*)",
+      "Task(*)",
+      "Edit(*)",
+      "Write(*)"
+    ]
+  },
+  "intent": {
+    "type": "execute",
+    "interaction": "loop",
+    "primary_user_value": "Fix an exported set of review findings by batching related items, planning in parallel, executing fixes with conservative test verification, and tracking progress with resumable state."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/*/.review/fix-export-*.json",
+      ".workflow/active/*/.review/",
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json"
+    ],
+    "writes": [
+      ".workflow/active/*/.review/active-fix-session.json",
+      ".workflow/active/*/.review/fixes/*/",
+      ".workflow/active/*/.review/fixes/*/partial-plan-*.json",
+      ".workflow/active/*/.review/fixes/*/fix-plan.json",
+      ".workflow/active/*/.review/fixes/*/fix-progress-*.json",
+      ".workflow/active/*/.review/fixes/*/logs/*"
+    ]
+  },
+  "constraints": {
+    "defaults": {
+      "max_iterations_per_finding": 3,
+      "batch_size": 5,
+      "max_parallel_planning_agents": 10
+    },
+    "must_not": [
+      "Do not claim pointers are Existing unless verifiable in-repo.",
+      "Do not expose secrets or user-specific paths in outputs.",
+      "Do not keep fixes that fail tests (rollback and retry up to max-iterations)."
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Command doc frontmatter: name + description + allowed-tools (+ argument-hint recommended).",
+      "Core sections present: Overview, Usage, Execution Process, Outputs/Artifacts, Error Handling.",
+      "Supports three entry modes: export-file, review-dir auto-discovery, and --resume.",
+      "Implements Phase 1.5 batching + Phase 2 parallel planning + Phase 3 stage-based execution.",
+      "Produces fix session artifacts: partial plans, aggregated fix-plan, per-group progress, logs.",
+      "Evidence table rows are labeled Existing|Planned and pass verify-evidence.js (dual-source docs + TS anchors)."
+    ]
+  },
+  "implementation": {
+    "command_doc": ".claude/commands/workflow/review-cycle-fix.md",
+    "code_pointers": [
+      "ccw/src/tools/command-registry.ts",
+      "ccw/src/tools/cli-executor-core.ts",
+      "ccw/src/core/services/flow-executor.ts",
+      ".claude/agents/cli-planning-agent.md",
+      ".claude/agents/cli-execution-agent.md"
+    ]
+  },
+  "structure_hints": {
+    "headings": [
+      { "level": 1, "text": "Workflow Review-Cycle-Fix Command" },
+      { "level": 2, "text": "Quick Start" },
+      { "level": 2, "text": "What & Why" },
+      { "level": 3, "text": "Core Concept" },
+      { "level": 3, "text": "Value Proposition" },
+      { "level": 3, "text": "Orchestrator Boundary (CRITICAL)" },
+      { "level": 3, "text": "Execution Flow" },
+      { "level": 3, "text": "Agent Roles" },
+      { "level": 2, "text": "Enhanced Features" },
+      { "level": 2, "text": "Core Responsibilities" },
+      { "level": 3, "text": "Orchestrator" },
+      { "level": 3, "text": "Output File Structure" },
+      { "level": 3, "text": "Agent Invocation Template" },
+      { "level": 2, "text": "Input Data" },
+      { "level": 2, "text": "Output Requirements" },
+      { "level": 2, "text": "Analysis Requirements" },
+      { "level": 2, "text": "Output Files" },
+      { "level": 2, "text": "Quality Checklist" },
+      { "level": 2, "text": "Execution Flow" },
+      { "level": 3, "text": "Main Execution Loop" },
+      { "level": 2, "text": "Critical Requirements" },
+      { "level": 2, "text": "Test Patterns" },
+      { "level": 2, "text": "Related Commands" }
+    ]
+  }
+}
+

tokens used
136,920
