Reading prompt from stdin...
OpenAI Codex v0.93.0 (research preview)
--------
workdir: C:\Project\Claude-Code-Workflow
model: gpt-5.2
provider: codex
approval: never
sandbox: danger-full-access
reasoning effort: high
reasoning summaries: auto
session id: 019c2c91-8a29-78c2-95ff-fd68a591147e
--------
user
Use the repo skill: slash-command-outliner (path: .codex/skills/slash-command-outliner).

Cycle: cycle-auto-20260205T010617-slashcmdoutliner-codex
Command: CMD-049

Input requirement doc (non-leaky): `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-049.requirements.md`

Write the following output files (create directories as needed) under `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs`:
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`
- `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md`

Hard rules (P0):
- Follow templates: .codex/skills/slash-command-outliner/templates/*
- Follow gates: .codex/skills/slash-command-outliner/specs/quality-gates.md
- Evidence tables MUST pass: node .codex/skills/slash-command-outliner/scripts/verify-evidence.js
- Never label a pointer as Existing unless it is verifiable in the repo now.
- For ANY pointer row, provide dual-source evidence:
  - docs: .claude/commands/**.md / <real heading text>
  - ts: ccw/src/** / <literal anchor string present in file>
- Avoid placeholders like TBD/N/A in evidence rows; if unsure, mark as Planned and add Verify steps.

Keep the written files concise; do not write extra files unless necessary.

deprecated: `[features].web_search_request` is deprecated. Use `web_search` instead.
  Set `web_search` to `"live"`, `"cached"`, or `"disabled"` in config.toml.
mcp: exa starting
mcp: ccw-tools starting
mcp: ace-tool starting
mcp: ccw-tools ready
mcp: ace-tool ready
mcp: exa ready
mcp startup: ready: ccw-tools, ace-tool, exa



thinking
**Planning the outline process**

I need to use the skill slash-command-outliner to open the SKILL.md file from the given path. After that, Iâ€™ll follow the workflow to generate the outline specification, references, gaps, and a fix plan based on the requirement document. I have to stick to the templates and quality gates. 

I also need to ensure that evidence verification passes with the verify-evidence.js check, likely examining references.json. Iâ€™ll read the skill documents and consider the available tools for reading files, preferring MCP tools where possible.
thinking
**Following repo guidelines**

I need to stick to the repository instructions by making direct binary calls and avoiding any bash wrappers. My tool, shell_command, runs PowerShell on Windows, so Iâ€™ll have to set the encoding snippet before my commands. Iâ€™ll create output files using the write_file tool or apply_patch and generate content based on the templates located in .codex/skills/slash-command-outliner/templates/*.

Additionally, I'll ensure to include dual-source evidence for pointers and validate all steps, including running the verify-evidence.js script. I'll check requirements and build the spec JSON accordingly.
thinking
**Organizing outline tasks**

First, I'll read through the templates and quality gates documentation, along with the requirement document. Next, I'll look for similar patterns, focusing on existing commands in .claude/commands and looking for agent patterns in the code under ccw/src. Iâ€™ll aim to find at least three evidence-based patterns for references.json. 

Then, Iâ€™ll produce the outline markdown and agent outline following the templates, fill in the spec.json and references.json, and generate a gap report and fix plan accordingly. After running the verify-evidence.js script, I'll fix any issues and ensure the files are concise, using write_file when necessary.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/requirements/CMD-049.requirements.md' in C:\Project\Claude-Code-Workflow succeeded in 326ms:
# Requirement (non-leaky): /workflow:complete

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/session/complete.md`

## Command Identity

- group: workflow
- name: complete
- description: Mark active workflow session as complete, archive with lessons learned, update manifest, remove active flag
- argument-hint: [-y|--yes] [--detailed]
- allowed-tools: TBD

## Structure Hints (Headings Only)

- Complete Workflow Session (/workflow:session:complete)
  - Pre-defined Commands
- Phase 1: Find active session
- Phase 3: Move to archive
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-ChildItem -Force .codex/skills/slash-command-outliner | Select-Object Name,Mode' in C:\Project\Claude-Code-Workflow succeeded in 329ms:

[32;1mName     [0m[32;1m Mode[0m
[32;1m----     [0m [32;1m----[0m
phases    d----
scripts   d----
specs     d----
templates d----
SKILL.md  -a---

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/SKILL.md' in C:\Project\Claude-Code-Workflow succeeded in 307ms:
---
name: slash-command-outliner
description: Codex version of slash-command-outliner. Generate CCW-aligned slash command development outlines from a requirement/spec doc, validated via corpus-wide iteration and non-regression. Triggers on "slash command outliner", "slash å‘½ä»¤å¤§çº²", "slash å‘½ä»¤ç”Ÿæˆå™¨", "å‘½ä»¤å¤§çº²".
allowed-tools: Read, Write, AskUserQuestion, Task, Bash, TodoWrite, mcp__ace-tool__search_context
---

# Slash Command Outliner (Codex)

Input a **slash command requirement/spec document**. Output a **CCW-aligned, end-to-end development outline** (Slash MD outline + Agent MD outline) plus a **gap-report** that compares against reference implementations and CCW server/tooling corpus. Improve quality by iterating across **all** existing commands with **non-regression snapshots**.

This skill is designed to be **precise** (no fluff) and **stable** (non-regression gate).

## Canonical Workflow (Phases)

1) `phases/01-collect-spec.md`  
2) `phases/02-retrieve-and-rank-references.md`  
3) `phases/03-generate-outlines.md`  
4) `phases/04-gap-report-and-iterate.md`  
5) `phases/05-regression-and-closure.md`


thinking
**Organizing skill phases**

I think skill defines various phases, and I need to follow them closely. I should first open the phase documentation and any templates or gates that go along with it. After that, I'll read through the relevant documents carefully. It sounds like listing the templates and specifications will help me get a better grasp on everything. This way, I can ensure I'm on the right track and not missing any important details!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-ChildItem -Force .codex/skills/slash-command-outliner/templates | Select-Object Name
Get-ChildItem -Force .codex/skills/slash-command-outliner/specs | Select-Object Name
Get-ChildItem -Force .codex/skills/slash-command-outliner/phases | Select-Object Name' in C:\Project\Claude-Code-Workflow succeeded in 344ms:

[32;1mName[0m
[32;1m----[0m
agent-outline.md
gap-report.md
slash-command-outline.md
corpus-scope.md
quality-gates.md
spec-input.md
01-collect-spec.md
02-retrieve-and-rank-references.md
03-generate-outlines.md
04-gap-report-and-iterate.md
05-regression-and-closure.md

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/specs/quality-gates.md' in C:\Project\Claude-Code-Workflow succeeded in 304ms:
# Quality Gates (Non-regression First)

## P0 Gates (Must Pass)

P0 failure means â€œnot CCW-alignedâ€ and blocks completion.

1) **Frontmatter completeness**
   - `name`, `description`, `allowed-tools` must exist
   - `argument-hint` optional but recommended for non-trivial commands
2) **Allowed-tools correctness**
   - no tools outside the supported CCW set for the intended workflow
   - no missing tools required by the described behavior
3) **Core sections present**
   - at least: `Overview`, `Usage`, `Execution Process`, `Output/Artifacts`, `Error Handling`
4) **No broken artifact references**
   - referenced paths must be either created by the command or explicitly documented as pre-existing

5) **Implementation pointers must be evidence-based (Existing vs Planned)**
   - Every implementation pointer (file/module/CLI subcommand/tool entry) MUST be labeled:
     - `Existing`: verifiable in repo now
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/specs/spec-input.md' in C:\Project\Claude-Code-Workflow succeeded in 301ms:
# Spec Input (Schema + Rules)

The spec is the only â€œsource inputâ€ for outline generation. It must be **minimal** and **non-leaky**.

## Minimal JSON Schema (informal)

```json
{
  "command": {
    "group": "workflow|issue|learn|cli|other",
    "name": "kebab-case",
    "description": "one sentence",
    "argument_hint": "[--flag] \"args\"",
    "allowed_tools": ["Read(*)", "Write(*)"]
  },
  "intent": {
    "type": "analyze|plan|execute|brainstorm|manage|utility",
    "interaction": "single-shot|iterative|loop",
    "primary_user_value": "what this command accomplishes"
  },
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/templates/slash-command-outline.md' in C:\Project\Claude-Code-Workflow succeeded in 329ms:
---
name: {{command.name}}
description: {{command.description}}
argument-hint: "{{command.argument_hint}}"
allowed-tools: {{command.allowed_tools_csv}}
group: {{command.group}}
---

# {{command.title}}

## Overview

- Goal: {{intent.primary_user_value}}
- Command: `/{{command.group}}:{{command.name}}`

## Usage

```bash
/{{command.group}}:{{command.name}} {{command.usage_args}}
```
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/templates/agent-outline.md' in C:\Project\Claude-Code-Workflow succeeded in 305ms:
# Agent Outline: {{command.group}}:{{command.name}}

## Purpose

Implement and/or evolve the slash command according to CCW conventions with minimal regressions.

## Execution Model

- Default: incremental, testable changes
- Use ACE-tool to find existing patterns before adding new abstractions

## State & Artifacts

- Session folder (if used): `.workflow/...`
- Required outputs:
  - Slash MD (command doc)
  - Any scripts/modules referenced by the command
  - Validation notes / regression snapshots

## Tooling
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/templates/gap-report.md' in C:\Project\Claude-Code-Workflow succeeded in 304ms:
# Gap Report: {{command.group}}:{{command.name}}

## Reference

- Selected reference: {{reference.slash}} (`{{reference.file_path}}`)

## P0 Gaps (Must Fix)

{{gaps.p0}}

## P1 Gaps (Should Fix)

{{gaps.p1}}

## P2 Gaps (Optional)

{{gaps.p2}}

## Implementation Pointers (Evidence)

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/phases/01-collect-spec.md' in C:\Project\Claude-Code-Workflow succeeded in 304ms:
# Phase 01: Collect Spec (No Leakage)

## Goal

Turn a human requirement/rules document into a **minimal, structured spec** that is sufficient to generate:

- Slash command outline (CCW command MD skeleton)
- Agent outline (execution + tools + state)

Do **not** copy/paste existing implementation docs as input; treat them as oracle only during gap analysis.

## Required Inputs (ask if missing)

1. Command identity:
   - `group` (workflow|issue|learn|cli|other)
   - `name` (kebab-case)
   - `description` (one sentence)
   - `argument-hint` (optional)
2. Allowed tools:
   - exact list for frontmatter `allowed-tools`
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/phases/02-retrieve-and-rank-references.md' in C:\Project\Claude-Code-Workflow succeeded in 301ms:
# Phase 02: Retrieve + Rank References

## Goal

Find the closest existing commands and extract **reusable patterns** without copying full content.

## Steps

1) Use `mcp__ace-tool__search_context` to recall similar commands and relevant tooling code.
2) Produce Top N candidates (default N=5) with deterministic scoring:
   - same `group` / command family
   - similar interaction model (AskUserQuestion, multi-round loop, etc.)
   - similar artifacts (writes to `.workflow/*`, `.claude/*`, etc.)
   - similar allowed-tools surface
3) Require user confirmation for Top 1 (high-confidence can be preselected but must be overridable).

## Output

Write:
- `specs/outputs/references.json`
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/phases/03-generate-outlines.md' in C:\Project\Claude-Code-Workflow succeeded in 310ms:
# Phase 03: Generate Outlines (Slash MD + Agent MD)

## Goal

Generate:
- a **Slash command MD outline** that matches CCW conventions (frontmatter + required sections)
- an **Agent outline** that explains execution model, state, and validation strategy

Use templates; keep output concise and implementation-oriented.

## Inputs

- `specs/outputs/spec.json`
- `specs/outputs/references.json` (selected reference)
- Rules: `../specs/quality-gates.md`

## Output Files

- `specs/outputs/generated-slash-outline.md` (based on `../templates/slash-command-outline.md`)
- `specs/outputs/generated-agent-outline.md` (based on `../templates/agent-outline.md`)
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/phases/04-gap-report-and-iterate.md' in C:\Project\Claude-Code-Workflow succeeded in 327ms:
# Phase 04: Gap Report + Iterate

## Goal

Compare the generated outlines against:
1) The selected reference command implementation (oracle)
2) The CCW server/tooling corpus (routes, mcp tools, cli internals)

Then propose the smallest set of changes to close gaps.

## Inputs

- `specs/outputs/generated-slash-outline.md`
- `specs/outputs/generated-agent-outline.md`
- `specs/outputs/references.json`
- Tooling scope: `../specs/corpus-scope.md`

## Output

Write:
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/phases/05-regression-and-closure.md' in C:\Project\Claude-Code-Workflow succeeded in 301ms:
# Phase 05: Regression + Closure

## Goal

Make sure improvements do not regress previously-validated commands (non-regression).

## What to Update (Cycle Mode)

When iterating against the full corpus:
- Update per-command status in `corpus-manifest.json`
- Check off `TODO_LIST.md` items
- Save snapshots in `regression/expected/` for commands marked completed
- Write snapshot diffs into `regression/diff/` and block on unexpected changes

## Non-regression Policy

See `../specs/quality-gates.md`.

## Completion Criteria



thinking
**Determining allowed tools**

I need to ensure that we produce the output in the correct cycle directory and run the verify-evidence script with the right file path. It looks like we might need to use a full path instead of a relative one, especially since the outputs path differs. 

I'll also check references from phase 02 about scoring. Regarding allowed tools, I'll verify what tools are set for this command to make sure we're aligned with CCW's intended workflow. Itâ€™s important not to guess wrong!
thinking
**Setting allowed tools**

The requirements indicate that the allowed-tools need to be set, and I'll include them in the spec and frontmatter. However, I need to make sure theyâ€™re clearly defined since completeness includes this aspect. 

I can check existing commands for similar allowed-tools configurations and will use the smart_search option to look for "allowed-tools:" in the command docs. This should help me quickly discover what I need for the workflow setup!
tool ccw-tools.smart_search({"action":"search","query":"allowed-tools:","path":"C:\\Project\\Claude-Code-Workflow\\.claude\\commands","maxResults":20,"mode":"fuzzy"})
2026-02-05T06:53:05.852177Z ERROR rmcp::transport::async_rw: Error reading from stream: serde error expected value at line 1 column 2
ccw-tools.smart_search({"action":"search","query":"allowed-tools:","path":"C:\\Project\\Claude-Code-Workflow\\.claude\\commands","maxResults":20,"mode":"fuzzy"}) failed in 3.03s:

thinking
Iâ€™m running into a tool error that says "Transport closed," which might be related to the path formatâ€”could it be a Windows issue? Hmm, Iâ€™m wondering if the tool is looking for Unix paths instead. Maybe I should try a relative path for a better chance of success. I think I'll attempt setting the path to ".claude/commands" to see if that resolves the issue. Let's see how this works out!
tool ccw-tools.smart_search({"action":"search","query":"allowed-tools:","path":".claude/commands","maxResults":20,"mode":"fuzzy"})
ccw-tools.smart_search({"action":"search","query":"allowed-tools:","path":".claude/commands","maxResults":20,"mode":"fuzzy"}) failed in 0ms:
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

rg --version' in C:\Project\Claude-Code-Workflow succeeded in 296ms:
ripgrep 14.1.1 (rev 4649aa9700)

features:+pcre2
simd(compile):+SSE2,-SSSE3,-AVX2
simd(runtime):+SSE2,+SSSE3,+AVX2

PCRE2 10.43 is available (JIT is available)

thinking
**Searching for command handling**

I need to look into the TS code specifically for command handling. The first step is to inspect the ccw/src directory. I'm considering using the ace search_context tool since it seems available and could function as our top priority search option. I'll focus on keywords like "workflow session complete" during my search. Letâ€™s see what I can uncover!
tool ace-tool.search_context({"project_root_path":"C:/Project/Claude-Code-Workflow","query":"Slash command /workflow:session:complete implementation pointers. Search for workflow session complete command handler, routing, command registry. Keywords: workflow, session, complete, archives manifest.json"})
ace-tool.search_context({"project_root_path":"C:/Project/Claude-Code-Workflow","query":"Slash command /workflow:session:complete implementation pointers. Search for workflow session complete command handler, routing, command registry. Keywords: workflow, session, complete, archives manifest.json"}) success in 6.22s:
{
  "content": [
    {
      "text": "The following code sections were retrieved:\nPath: .claude\\commands\\workflow\\session\\complete.md\n     1\t---\r\n     2\tname: complete\r\n     3\tdescription: Mark active workflow session as complete, archive with lessons learned, update manifest, remove active flag\r\n     4\targument-hint: \"[-y|--yes] [--detailed]\"\r\n     5\texamples:\r\n     6\t  - /workflow:session:complete\r\n     7\t  - /workflow:session:complete --yes\r\n     8\t  - /workflow:session:complete --detailed\r\n     9\t---\r\n    10\t\r\n    11\t# Complete Workflow Session (/workflow:session:complete)\r\n    12\t\r\n    13\tMark the currently active workflow session as complete, archive it, and update manifests.\r\n    14\t\r\n    15\t## Pre-defined Commands\r\n    16\t\r\n    17\t```bash\r\n    18\t# Phase 1: Find active session\r\n    19\tSESSION_PATH=$(find .workflow/active/ -maxdepth 1 -name \"WFS-*\" -type d | head -1)\r\n    20\tSESSION_ID=$(basename \"$SESSION_PATH\")\r\n    21\t\r\n    22\t# Phase 3: Move to archive\r\n    23\tmkdir -p .workflow/archives/\r\n    24\tmv .workflow/active/$SESSION_ID .workflow/archives/$SESSION_ID\r\n    25\t\r\n    26\t# Cleanup marker\r\n    27\trm -f .workflow/archives/$SESSION_ID/.archiving\r\n    28\t```\r\n    29\t\r\n    30\t## Key Files to Read\r\n    31\t\r\n    32\t**For manifest.json generation**, read ONLY these files:\r\n    33\t\r\n    34\t| File | Extract |\r\n    35\t|------|---------|\r\n    36\t| `$SESSION_PATH/workflow-session.json` | session_id, description, started_at, status |\r\n    37\t| `$SESSION_PATH/IMPL_PLAN.md` | title (first # heading), description (first paragraph) |\r\n    38\t| `$SESSION_PATH/.tasks/*.json` | count files |\r\n    39\t| `$SESSION_PATH/.summaries/*.md` | count files |\r\n    40\t| `$SESSION_PATH/.review/dimensions/*.json` | count + findings summary (optional) |\r\n    41\t\r\n    42\t## Execution Flow\r\n    43\t\r\n    44\t### Phase 1: Find Session (2 commands)\r\n    45\t\r\n    46\t```bash\r\n    47\t# 1. Find and extract session\r\n    48\tSESSION_PATH=$(find .workflow/active/ -maxdepth 1 -name \"WFS-*\" -type d | head -1)\r\n    49\tSESSION_ID=$(basename \"$SESSION_PATH\")\r\n    50\t\r\n    51\t# 2. Check/create archiving marker\r\n    52\ttest -f \"$SESSION_PATH/.archiving\" && echo \"RESUMING\" || touch \"$SESSION_PATH/.archiving\"\r\n    53\t```\r\n...\n    60\t\r\n    61\t```json\r\n    62\t{\r\n    63\t  \"session_id\": \"<from workflow-session.json>\",\r\n    64\t  \"description\": \"<from workflow-session.json>\",\r\n    65\t  \"archived_at\": \"<current ISO timestamp>\",\r\n    66\t  \"archive_path\": \".workflow/archives/<SESSION_ID>\",\r\n    67\t  \"metrics\": {\r\n    68\t    \"duration_hours\": \"<(completed_at - started_at) / 3600000>\",\r\n    69\t    \"tasks_completed\": \"<count .tasks/*.json>\",\r\n    70\t    \"summaries_generated\": \"<count .summaries/*.md>\",\r\n    71\t    \"review_metrics\": {\r\n    72\t      \"dimensions_analyzed\": \"<count .review/dimensions/*.json>\",\r\n    73\t      \"total_findings\": \"<sum from dimension JSONs>\"\r\n    74\t    }\r\n    75\t  },\r\n    76\t  \"tags\": [\"<3-5 keywords from IMPL_PLAN.md>\"],\r\n    77\t  \"lessons\": {\r\n    78\t    \"successes\": [\"<key wins>\"],\r\n    79\t    \"challenges\": [\"<difficulties>\"],\r\n    80\t    \"watch_patterns\": [\"<patterns to monitor>\"]\r\n    81\t  }\r\n    82\t}\r\n    83\t```\r\n    84\t\r\n    85\t**Lessons Generation**: Use gemini with `~/.claude/workflows/cli-templates/prompts/archive/analysis-simple.txt`\r\n    86\t\r\n    87\t### Phase 3: Atomic Commit (4 commands)\r\n    88\t\r\n    89\t```bash\r\n    90\t# 1. Create archive directory\r\n    91\tmkdir -p .workflow/archives/\r\n    92\t\r\n    93\t# 2. Move session\r\n    94\tmv .workflow/active/$SESSION_ID .workflow/archives/$SESSION_ID\r\n    95\t\r\n    96\t# 3. Update manifest.json (Read â†’ Append â†’ Write)\r\n    97\t# Read: .workflow/archives/manifest.json (or [])\r\n    98\t# Append: archive_entry from Phase 2\r\n    99\t# Write: updated JSON\r\n   100\t\r\n   101\t# 4. Remove marker\r\n   102\trm -f .workflow/archives/$SESSION_ID/.archiving\r\n   103\t```\r\n   104\t\r\n   105\t**Output**:\r\n   106\t```\r\n   107\tâœ“ Session \"$SESSION_ID\" archived successfully\r\n   108\t  Location: .workflow/archives/$SESSION_ID/\r\n   109\t  Manifest: Updated with N total sessions\r\n   110\t```\r\n   111\t\r\n   112\t### Phase 4: Update project-tech.json (Optional)\r\n   113\t\r\n   114\t**Skip if**: `.workflow/project-tech.json` doesn't exist\r\n   115\t\r\n   116\t```bash\r\n   117\t# Check\r\n   118\ttest -f .workflow/project-tech.json || echo \"SKIP\"\r\n   119\t```\r\n   120\t\r\n   121\t**If exists**, add feature entry:\r\n   122\t\r\n   123\t```json\r\n   124\t{\r\n   125\t  \"id\": \"<slugified title>\",\r\n   126\t  \"title\": \"<from IMPL_PLAN.md>\",\r\n   127\t  \"status\": \"completed\",\r\n   128\t  \"tags\": [\"<from Phase 2>\"],\r\n   129\t  \"timeline\": { \"implemented_at\": \"<date>\" },\r\n   130\t  \"traceability\": { \"session_id\": \"<SESSION_ID>\", \"archive_path\": \"<path>\" }\r\n   131\t}\r\n   132\t```\r\n   133\t\r\n   134\t**Output**:\r\n   135\t```\r\n   136\tâœ“ Feature added to project registry\r\n   137\t```\r\n   138\t\r\n   139\t### Phase 5: Ask About Solidify (Always)\r\n   140\t\r\n   141\tAfter successful archival, prompt user to capture learnings:\r\n   142\t\r\n   143\t```javascript\r\n   144\t// Parse --yes flag\r\n   145\tconst autoYes = $ARGUMENTS.includes('--yes') || $ARGUMENTS.includes('-y')\r\n   146\t\r\n   147\tif (autoYes) {\r\n   148\t  // Auto mode: Skip solidify\r\n   149\t  console.log(`[--yes] Auto-selecting: Skip solidify`)\r\n   150\t  console.log(`Session archived successfully.`)\r\n   151\t  // Done - no solidify\r\n   152\t} else {\r\n   153\t  // Interactive mode: Ask user\r\n   154\t  AskUserQuestion({\r\n   155\t    questions: [{\r\n   156\t      question: \"Would you like to solidify learnings from this session into project guidelines?\",\r\n   157\t      header: \"Solidify\",\r\n   158\t      options: [\r\n   159\t        { label: \"Yes, solidify now\", description: \"Extract learnings and update project-guidelines.json\" },\r\n   160\t        { label: \"Skip\", description: \"Archive complete, no learnings to capture\" }\r\n   161\t      ],\r\n   162\t      multiSelect: false\r\n   163\t    }]\r\n   164\t  })\r\n   165\t\r\n   166\t  // **If \"Yes, solidify now\"**: Execute `/workflow:session:solidify` with the archived session ID.\r\n   167\t}\r\n   168\t```\r\n   169\t\r\n   170\t## Auto Mode Defaults\r\n   171\t\r\n   172\tWhen `--yes` or `-y` flag is used:\r\n   173\t- **Solidify Learnings**: Auto-selected \"Skip\" (archive only, no solidify)\r\n   174\t\r\n   175\t**Flag Parsing**:\r\n   176\t```javascript\r\n   177\tconst autoYes = $ARGUMENTS.includes('--yes') || $ARGUMENTS.includes('-y')\r\n   178\t```\r\n   179\t\r\n   180\t**Output**:\r\n   181\t```\r\n   182\tSession archived successfully.\r\n   183\tâ†’ Run /workflow:session:solidify to capture learnings (recommended)\r\n   184\t```\r\n   185\t\r\n   186\t## Error Recovery\r\n   187\t\r\n   188\t| Phase | Symptom | Recovery |\r\n   189\t|-------|---------|----------|\r\n   190\t| 1 | No active session | `No active session found` |\r\n   191\t| 2 | Analysis fails | Remove marker: `rm $SESSION_PATH/.archiving`, retry |\r\n   192\t| 3 | Move fails | Session safe in active/, fix issue, retry |\r\n   193\t| 3 | Manifest fails | Session in archives/, manually add entry, remove marker |\r\n   194\t\r\n   195\t## Quick Reference\r\n   196\t\r\n   197\t```\r\n   198\tPhase 1: find session â†’ create .archiving marker\r\n   199\tPhase 2: read key files â†’ build manifest entry (no writes)\r\n   200\tPhase 3: mkdir â†’ mv â†’ update manifest.json â†’ rm marker\r\n   201\tPhase 4: update project-tech.json features array (optional)\r\n   202\tPhase 5: ask user â†’ solidify learnings (optional)\r\n   203\t```\r\n...\n\nPath: .claude\\commands\\workflow\\session\\start.md\n...\n    64\t\r\n    65\t**Note**: `/workflow:init` uses cli-explore-agent to build comprehensive project understanding (technology stack, architecture, key components). This step runs once per project. Subsequent executions skip initialization.\r\n    66\t\r\n    67\t## Mode 1: Discovery Mode (Default)\r\n    68\t\r\n    69\t### Usage\r\n    70\t```bash\r\n    71\t/workflow:session:start\r\n    72\t```\r\n    73\t\r\n    74\t### Step 1: List Active Sessions\r\n    75\t```bash\r\n    76\tbash(ls -1 .workflow/active/ 2>/dev/null | head -5)\r\n    77\t```\r\n    78\t\r\n    79\t### Step 2: Display Session Metadata\r\n    80\t```bash\r\n    81\tbash(cat .workflow/active/WFS-promptmaster-platform/workflow-session.json)\r\n    82\t```\r\n    83\t\r\n    84\t### Step 4: User Decision\r\n    85\tPresent session information and wait for user to select or create session.\r\n    86\t\r\n    87\t**Output**: `SESSION_ID: WFS-[user-selected-id]`\r\n    88\t\r\n    89\t## Mode 2: Auto Mode (Intelligent)\r\n...\n   124\t\r\n   125\t# Check keyword match (manual comparison)\r\n   126\t# If task contains project keywords â†’ Reuse session\r\n   127\t# If task unrelated â†’ Create new session (use Step 2a)\r\n   128\t```\r\n   129\t\r\n   130\t**Output (reuse)**: `SESSION_ID: WFS-promptmaster-platform`\r\n   131\t**Output (new)**: `SESSION_ID: WFS-[new-slug]`\r\n   132\t\r\n   133\t### Step 2c: Multiple Active Sessions â†’ Use First\r\n   134\t```bash\r\n   135\t# Get first active session\r\n   136\tbash(find .workflow/active/ -name \"WFS-*\" -type d 2>/dev/null | head -1 | xargs basename)\r\n   137\t\r\n   138\t# Output warning and session ID\r\n   139\t# WARNING: Multiple active sessions detected\r\n   140\t# SESSION_ID: WFS-first-session\r\n   141\t```\r\n   142\t\r\n   143\t## Mode 3: Force New Mode\r\n   144\t\r\n   145\t### Usage\r\n   146\t```bash\r\n   147\t/workflow:session:start --new \"task description\"\r\n   148\t```\r\n...\n\nPath: docs\\COMMAND_SPEC.md\n...\n   178\t\r\n   179\t### **/workflow:session:complete**\r\n   180\t- **Syntax**: `/workflow:session:complete [--detailed]`\r\n   181\t- **Parameters**:\r\n   182\t  - `--detailed` (Flag): Shows a more detailed completion summary.\r\n   183\t- **Responsibilities**: Marks the currently active session as \"completed\", records timestamps, and moves the session from `.workflow/active/` to `.workflow/archives/`.\r\n   184\t- **Agent Calls**: None.\r\n   185\t- **Example**:\r\n   186\t  ```bash\r\n   187\t  /workflow:session:complete\r\n   188\t  ```\r\n...\n\nPath: .claude\\skills\\slash-command-outliner\\scripts\\init-cycle.js\n...\n   231\t\n   232\t  const corpusManifest = {\n   233\t    schema_version: '1.0.0',\n   234\t    generated_at: new Date().toISOString(),\n   235\t    corpus,\n   236\t  };\n   237\t\n   238\t  const toolingRoots = [\n   239\t    'ccw/src/server/routes',\n   240\t    'ccw/src/mcp-server',\n   241\t    'ccw/src/tools',\n   242\t    'ccw/src/commands',\n   243\t  ];\n   244\t  const toolingManifest = {\n   245\t    schema_version: '1.0.0',\n   246\t    generated_at: new Date().toISOString(),\n   247\t    roots: toolingRoots,\n   248\t    files: listToolingFiles(repoRoot, toolingRoots),\n   249\t  };\n   250\t\n   251\t  writeJson(repoRoot, toPosixPath(path.relative(repoRoot, path.join(corpusDir, 'corpus-manifest.json'))), corpusManifest);\n   252\t  writeJson(\n   253\t    repoRoot,\n   254\t    toPosixPath(path.relative(repoRoot, path.join(corpusDir, 'tooling-manifest.json'))),\n   255\t    toolingManifest\n   256\t  );\n...\n\nPath: ccw\\src\\tools\\memory-update-queue.js\n...\n    77\t\r\n    78\t/**\r\n    79\t * Save queue to file\r\n    80\t * @param {{ items: Array<{path: string, tool: string, strategy: string, addedAt: string}>, createdAt: string | null }} data\r\n    81\t */\r\n    82\tfunction saveQueue(data) {\r\n    83\t  try {\r\n    84\t    ensureDir(QUEUE_FILE_PATH);\r\n    85\t    writeFileSync(QUEUE_FILE_PATH, JSON.stringify(data, null, 2), 'utf8');\r\n    86\t  } catch (e) {\r\n    87\t    console.error('[MemoryQueue] Failed to save queue:', e.message);\r\n    88\t    throw e;\r\n    89\t  }\r\n    90\t}\r\n    91\t\r\n    92\t/**\r\n    93\t * Normalize path for comparison (handle Windows/Unix differences)\r\n    94\t * @param {string} p\r\n    95\t * @returns {string}\r\n    96\t */\r\n    97\tfunction normalizePath(p) {\r\n    98\t  return resolve(p).replace(/\\\\/g, '/').toLowerCase();\r\n    99\t}\r\n...\n   118\t\r\n   119\t  if (existingIndex !== -1) {\r\n   120\t    // Update existing entry timestamp but keep it deduplicated\r\n   121\t    queue.items[existingIndex].addedAt = now;\r\n   122\t    queue.items[existingIndex].tool = tool;\r\n   123\t    queue.items[existingIndex].strategy = strategy;\r\n   124\t    saveQueue(queue);\r\n   125\t\r\n   126\t    return {\r\n   127\t      queued: false,\r\n   128\t      queueSize: queue.items.length,\r\n   129\t      willFlush: queue.items.length >= config.threshold,\r\n   130\t      message: `Path already in queue (updated): ${path}`\r\n   131\t    };\r\n   132\t  }\r\n   133\t\r\n   134\t  // Add new item\r\n   135\t  queue.items.push({\r\n   136\t    path,\r\n   137\t    tool,\r\n   138\t    strategy,\r\n   139\t    addedAt: now\r\n   140\t  });\r\n   141\t\r\n   142\t  // Set createdAt if this is the first item\r\n   143\t  if (!queue.createdAt) {\r\n   144\t    queue.createdAt = now;\r\n   145\t  }\r\n...\n   257\t\r\n   258\t  // Process each group\r\n   259\t  for (const [key, items] of groups) {\r\n   260\t    const [tool, strategy] = key.split(':');\r\n   261\t    console.log(`[MemoryQueue] Processing ${items.length} items with ${tool}/${strategy}`);\r\n   262\t\r\n   263\t    for (const item of items) {\r\n   264\t      try {\r\n   265\t        const result = await updateModuleClaudeTool.execute({\r\n   266\t          path: item.path,\r\n   267\t          tool: item.tool,\r\n   268\t          strategy: item.strategy\r\n   269\t        });\r\n   270\t\r\n   271\t        results.push({\r\n   272\t          path: item.path,\r\n   273\t          success: result.success !== false,\r\n   274\t          result\r\n   275\t        });\r\n   276\t      } catch (e) {\r\n   277\t        console.error(`[MemoryQueue] Failed to update ${item.path}:`, e.message);\r\n   278\t        errors.push({\r\n   279\t          path: item.path,\r\n   280\t          error: e.message\r\n   281\t        });\r\n   282\t      }\r\n   283\t    }\r\n   284\t  }\r\n...\n   383\t\r\n   384\t  switch (action) {\r\n   385\t    case 'add':\r\n   386\t      if (!path) {\r\n   387\t        throw new Error('Parameter \"path\" is required for add action');\r\n   388\t      }\r\n   389\t      // Check timeout first\r\n   390\t      const timeoutCheck = await checkTimeout();\r\n   391\t      if (timeoutCheck.flushed) {\r\n   392\t        // Queue was flushed due to timeout, add to fresh queue\r\n   393\t        const result = addToQueue(path, { tool, strategy });\r\n   394\t        return `[MemoryQueue] Timeout flush (${timeoutCheck.result.processed} items) â†’ ${result.message}`;\r\n   395\t      }\r\n   396\t\r\n   397\t      const addResult = addToQueue(path, { tool, strategy });\r\n   398\t\r\n   399\t      // Auto-flush if threshold reached\r\n   400\t      if (addResult.willFlush) {\r\n   401\t        const flushResult = await flushQueue();\r\n   402\t        // Return string for hook-friendly output\r\n   403\t        return `[MemoryQueue] ${addResult.message} â†’ Flushed ${flushResult.processed} items`;\r\n   404\t      }\r\n...\n\nPath: .claude\\commands\\workflow\\execute.md\n...\n   112\t         â”‚  # Generate commit message: \"feat/fix/refactor: {task-title} - {summary}\"\r\n   113\t         â”‚  # git add <changed-files> && git commit -m \"<commit-message>\"\r\n   114\t         â””â”€ Advance to next task\r\n   115\t\r\n   116\tPhase 5: Completion\r\n   117\t   â”œâ”€ Update task statuses in JSON files\r\n   118\t   â”œâ”€ Generate summaries\r\n   119\t   â””â”€ AskUserQuestion: Choose next step\r\n   120\t      â”œâ”€ \"Enter Review\" â†’ /workflow:review\r\n   121\t      â””â”€ \"Complete Session\" â†’ /workflow:session:complete\r\n   122\t\r\n   123\tResume Mode (--resume-session):\r\n   124\t   â”œâ”€ Skip Phase 1 & Phase 2\r\n   125\t   â””â”€ Entry Point: Phase 3 (TodoWrite Generation)\r\n   126\t      â”œâ”€ Update session status to \"active\" (if not already)\r\n   127\t      â””â”€ Continue: Phase 4 â†’ Phase 5\r\n   128\t```\r\n...\n   317\t\r\n   318\tif (autoYes) {\r\n   319\t  // Auto mode: Complete session automatically\r\n   320\t  console.log(`[--yes] Auto-selecting: Complete Session`)\r\n   321\t  Skill(skill=\"workflow:session:complete\", args=\"--yes\")\r\n   322\t} else {\r\n   323\t  // Interactive mode: Ask user\r\n   324\t  AskUserQuestion({\r\n   325\t    questions: [{\r\n   326\t      question: \"All tasks completed. What would you like to do next?\",\r\n   327\t      header: \"Next Step\",\r\n   328\t      multiSelect: false,\r\n   329\t      options: [\r\n   330\t        {\r\n   331\t          label: \"Enter Review\",\r\n   332\t          description: \"Run specialized review (security/architecture/quality/action-items)\"\r\n   333\t        },\r\n   334\t        {\r\n   335\t          label: \"Complete Session\",\r\n   336\t          description: \"Archive session and update manifest\"\r\n   337\t        }\r\n   338\t      ]\r\n   339\t    }]\r\n   340\t  })\r\n   341\t}\r\n...\n\nPath: COMMAND_REFERENCE.md\n...\n    14\t\r\n    15\t## Workflow Commands (`/workflow:*`)\r\n    16\t\r\n    17\tThese commands orchestrate complex, multi-phase development processes, from planning to execution.\r\n    18\t\r\n    19\t### Session Management\r\n    20\t\r\n    21\t| Command | Description |\r\n    22\t|---|---|\r\n    23\t| `/workflow:session:start` | Discover existing sessions or start a new workflow session with intelligent session management. |\r\n    24\t| `/workflow:session:list` | List all workflow sessions with status. |\r\n    25\t| `/workflow:session:resume` | Resume the most recently paused workflow session. |\r\n    26\t| `/workflow:session:complete` | Mark the active workflow session as complete and remove active flag. |\r\n    27\t\r\n    28\t### Core Workflow\r\n...\n\nPath: ccw\\src\\templates\\dashboard-js\\state.js\n...\n   113\t\r\n   114\t    case 'SESSION_ARCHIVED':\r\n   115\t      // Move from active to archived\r\n   116\t      if (!workflowData.activeSessions) workflowData.activeSessions = [];\r\n   117\t      if (!workflowData.archivedSessions) workflowData.archivedSessions = [];\r\n   118\t\r\n   119\t      const activeIndex = workflowData.activeSessions.findIndex(s => s.session_id === sessionId);\r\n   120\t      if (activeIndex !== -1) {\r\n   121\t        const session = workflowData.activeSessions.splice(activeIndex, 1)[0];\r\n   122\t        session.location = 'archived';\r\n   123\t        if (payload && payload.metadata) {\r\n   124\t          Object.assign(session, payload.metadata);\r\n   125\t        }\r\n   126\t        workflowData.archivedSessions.push(session);\r\n   127\t\r\n   128\t        // Update store\r\n   129\t        const key = `session-${sessionId}`.replace(/[^a-zA-Z0-9-]/g, '-');\r\n   130\t        sessionDataStore[key] = session;\r\n   131\t      }\r\n   132\t      break;\r\n...\n\nPath: .claude\\skills\\ccw-help\\command.json#chunk1of2\n...\n   496\t    {\r\n   497\t      \"name\": \"complete\",\r\n   498\t      \"command\": \"/workflow:session:complete\",\r\n   499\t      \"description\": \"Mark active workflow session as complete, archive with lessons learned, update manifest, remove active flag\",\r\n   500\t      \"arguments\": \"[-y|--yes] [--detailed]\",\r\n   501\t      \"category\": \"workflow\",\r\n   502\t      \"subcategory\": \"session\",\r\n   503\t      \"usage_scenario\": \"session-management\",\r\n   504\t      \"difficulty\": \"Intermediate\",\r\n   505\t      \"source\": \"../../commands/workflow/session/complete.md\"\r\n   506\t    },\r\n   507\t    {\r\n   508\t      \"name\": \"list\",\r\n   509\t      \"command\": \"/workflow:session:list\",\r\n   510\t      \"description\": \"List all workflow sessions with status filtering, shows session metadata and progress information\",\r\n   511\t      \"arguments\": \"\",\r\n   512\t      \"category\": \"workflow\",\r\n   513\t      \"subcategory\": \"session\",\r\n   514\t      \"usage_scenario\": \"general\",\r\n   515\t      \"difficulty\": \"Beginner\",\r\n   516\t      \"source\": \"../../commands/workflow/session/list.md\"\r\n   517\t    },\r\n...\n\nPath: .claude\\skills\\slash-command-outliner\\scripts\\llm-regress-all.js\n...\n   411\t\n   412\t  // persist updated manifest\n   413\t  manifest.generated_at = new Date().toISOString();\n   414\t  writeJson(repoRoot, corpusManifestRel, manifest);\n   415\t\n   416\t  // TODO list\n   417\t  writeText(repoRoot, toPosixPath(path.relative(repoRoot, path.join(cycleDir, 'TODO_LIST.md'))), renderTodoList({ cycleId, commands }));\n   418\t\n   419\t  const topKindsSorted = Array.from(failureKinds.entries())\n   420\t    .sort((a, b) => b[1] - a[1] || a[0].localeCompare(b[0]))\n   421\t    .slice(0, 30)\n   422\t    .map(([kind, count]) => ({ kind, count }));\n   423\t\n   424\t  const summary = {\n   425\t    cycle_id: cycleId,\n   426\t    generated_at: new Date().toISOString(),\n   427\t    processed_commands: processed,\n   428\t    total_commands: commands.length,\n   429\t    passed,\n   430\t    failed,\n   431\t    only,\n   432\t    limit,\n   433\t    llm_tool: llmTool,\n   434\t    model: model || '',\n   435\t    permission_mode: permissionMode,\n   436\t    skill_root: skillRoot,\n   437\t    top_failure_kinds: topKindsSorted,\n   438\t  };\n...\n\n",
      "type": "text"
    }
  ]
}
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Test-Path .claude/commands/workflow/complete.md; Test-Path .claude/commands/workflow/session/complete.md' in C:\Project\Claude-Code-Workflow succeeded in 316ms:
False
True

thinking
**Searching for TS code**

I need to find the TypeScript code that manages the workflow session operations, specifically where it handles "workflow:session:complete." There's a snippet in ccw/src/templates/dashboard-js/state.js for 'SESSION_ARCHIVED' that I could use as a reference. The requirement states the evidence must be from the ccw/src directory, so that checks out. Additionally, I'll search under ccw/src for terms like "workflow:session:complete" or "session:complete" using rg.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

rg -n "workflow:session:complete" ccw/src .claude -S' in C:\Project\Claude-Code-Workflow succeeded in 329ms:
.claude\workflows\review-directory-specification.md:248:When `/workflow:session:complete` is called:
.claude\workflows\review-directory-specification.md:332:- [ ] Update /workflow:session:complete to preserve .review/
.claude\skills\ccw-help\command.json:498:      "command": "/workflow:session:complete",
.claude\skills\ccw-help\index\by-use-case.json:730:      "command": "/workflow:session:complete",
.claude\skills\ccw-help\index\by-category.json:576:        "command": "/workflow:session:complete",
.claude\skills\ccw-help\index\all-commands.json:488:    "command": "/workflow:session:complete",
.claude\workflows\cli-templates\schemas\project-tech-schema.json:154:      "description": "Completed workflow features (populated by /workflow:session:complete)"
.claude\commands\workflow\execute.md:36:- **Completion Choice**: Automatically completes session (runs `/workflow:session:complete --yes`)
.claude\commands\workflow\execute.md:121:      â””â”€ "Complete Session" â†’ /workflow:session:complete
.claude\commands\workflow\execute.md:321:  Skill(skill="workflow:session:complete", args="--yes")
.claude\commands\workflow\execute.md:346:- **"Complete Session"**: Execute `/workflow:session:complete`
.claude\commands\workflow\clean.md:546:- `/workflow:session:complete` - Properly archive active sessions
.claude\commands\workflow\review-cycle-fix.md:268:  - If confirmed: Execute `/workflow:session:complete` to archive session with lessons learned
.claude\commands\workflow\review.md:321:â†’ Run /workflow:session:complete to archive with lessons learned
.claude\commands\workflow\session\complete.md:6:  - /workflow:session:complete
.claude\commands\workflow\session\complete.md:7:  - /workflow:session:complete --yes
.claude\commands\workflow\session\complete.md:8:  - /workflow:session:complete --detailed
.claude\commands\workflow\session\complete.md:11:# Complete Workflow Session (/workflow:session:complete)
.claude\commands\workflow\session\solidify.md:302:- `/workflow:session:complete` - Complete session (prompts for learnings to solidify)
ccw/src\templates\dashboard-js\views\help.js:741:        { data: { id: 'complete', label: '/workflow:session:complete' } }

thinking
**Parsing requirements**

I found a TypeScript (TS) match in the help.js file, which is good! The requirement is to identify a literal anchor string, like `label: '/workflow:session:complete'`. For the new command `/workflow:complete`, I need to locate TS evidence for command mapping; however, it appears there isn't any. I'll note that as planned. I also need documentation evidence, which could include the heading in the documentation file. Lastly, I might have to find code in the `ccw/src` directory related to workflow session archiving and update the manifest accordingly.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

rg -n "'"\\.workflow/archives/manifest\\.json\" -S" in C:\Project\Claude-Code-Workflow exited 1 in 351ms:

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Test-Path .claude/workflows/cli-templates/prompts/archive/analysis-simple.txt' in C:\Project\Claude-Code-Workflow succeeded in 312ms:
False

thinking
I need to check if the file exists since the document says to use Gemini with that file. Itâ€™s possible that the path is different or the file just isnâ€™t in the repository. I wonder if thereâ€™s a way to confirm the fileâ€™s location or if I should just search for it. This could take some time. Whatever the case, Iâ€™ll figure this out and ensure Iâ€™m on the right track!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

rg -n "analysis-simple'"\\.txt\" .claude -S" in C:\Project\Claude-Code-Workflow succeeded in 328ms:
.claude\commands\workflow\session\complete.md:85:**Lessons Generation**: Use gemini with `~/.claude/workflows/cli-templates/prompts/archive/analysis-simple.txt`
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

rg -n "''^allowed-tools:" .claude/commands/workflow -S' in C:\Project\Claude-Code-Workflow succeeded in 325ms:
.claude/commands/workflow\unified-execute-with-file.md:5:allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Grep(*), Glob(*), Bash(*), Edit(*), Write(*)
.claude/commands/workflow\plan-verify.md:5:allowed-tools: Read(*), Write(*), Glob(*), Bash(*)
.claude/commands/workflow\lite-execute.md:5:allowed-tools: TodoWrite(*), Task(*), Bash(*)
.claude/commands/workflow\clean.md:5:allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Glob(*), Bash(*), Write(*)
.claude/commands/workflow\brainstorm-with-file.md:5:allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Grep(*), Glob(*), Bash(*), Edit(*), Write(*)
.claude/commands/workflow\review-session-cycle.md:5:allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*)
.claude/commands/workflow\analyze-with-file.md:5:allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Grep(*), Glob(*), Bash(*), Edit(*), Write(*)
.claude/commands/workflow\debug-with-file.md:5:allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Grep(*), Glob(*), Bash(*), Edit(*), Write(*)
.claude/commands/workflow\lite-plan.md:5:allowed-tools: TodoWrite(*), Task(*), Skill(*), AskUserQuestion(*)
.claude/commands/workflow\collaborative-plan-with-file.md:5:allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Bash(*), Write(*), Glob(*), Grep(*), mcp__ace-tool__search_context(*)
.claude/commands/workflow\replan.md:5:allowed-tools: Read(*), Write(*), Edit(*), TodoWrite(*), Glob(*), Bash(*)
.claude/commands/workflow\multi-cli-plan.md:5:allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Bash(*), Write(*), mcp__ace-tool__search_context(*)
.claude/commands/workflow\tdd-verify.md:5:allowed-tools: Skill(*), TodoWrite(*), Read(*), Write(*), Bash(*), Glob(*)
.claude/commands/workflow\tdd-plan.md:5:allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*)
.claude/commands/workflow\lite-fix.md:5:allowed-tools: TodoWrite(*), Task(*), Skill(*), AskUserQuestion(*)
.claude/commands/workflow\review-cycle-fix.md:5:allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*), Edit(*), Write(*)
.claude/commands/workflow\brainstorm\artifacts.md:5:allowed-tools: TodoWrite(*), Read(*), Write(*), Glob(*), AskUserQuestion(*)
.claude/commands/workflow\review-module-cycle.md:5:allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*)
.claude/commands/workflow\test-cycle-execute.md:5:allowed-tools: Skill(*), TodoWrite(*), Read(*), Bash(*), Task(*)
.claude/commands/workflow\brainstorm\auto-parallel.md:5:allowed-tools: Skill(*), Task(*), TodoWrite(*), Read(*), Write(*), Bash(*), Glob(*)



thinking
**Clarifying allowed tools**

I need to consider the allowed tools for this workflow, including Skill, AskUserQuestion, Read, Write, and Bash. Interestingly, while TodoWrite isn't necessary, we should inspect the existing commands for alignment with Read, Write, and Bash. We'll also need to decide whether to include Skill for safety. The requirement is to stick with the supported tools for the intended workflow. However, including extra tools might be okay, but minimal is preferable. Itâ€™s a balancing act!
thinking
**Deciding on command structure**

For the workflow, I'd go with Read, Write, Bash, AskUserQuestion, and Skill because Skill is needed to invoke the command /workflow:session:complete. I need to check if our new command, /workflow:complete, is just an alias for the existing one; calling Skill with underlying commands would simplify things! This might also require AskUserQuestion. I should implement /workflow:complete as a wrapper using Skill, but there are specific requirements for marking sessions complete and updating manifests that I need to consider in the documentation.
thinking
**Planning command aliasing**

Iâ€™m considering proposing that /workflow:complete serves as a simple alias for /workflow:session:complete, using the same arguments and primarily utilizing the Skill tool for internal calls. This keeps things straightforward while preventing documentation duplication. Since /workflow:session:complete is already established, implementing /workflow:complete mainly involves updating documentation and including it in help indexesâ€”no significant tooling changes, apart from possibly updating the help list. I plan to check the help menuâ€™s construction in the source files for the necessary updates.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -TotalCount 780 ccw/src/templates/dashboard-js/views/help.js | Select-Object -Skip 720' in C:\Project\Claude-Code-Workflow succeeded in 351ms:
      ],
      edges: [
        { data: { source: 'start', target: 'cli-analyze' }, classes: 'next-step' },
        { data: { source: 'cli-analyze', target: 'lite-fix' }, classes: 'next-step' },
        { data: { source: 'lite-fix', target: 'diagnosis' }, classes: 'next-step' },
        { data: { source: 'diagnosis', target: 'impact' }, classes: 'next-step' },
        { data: { source: 'impact', target: 'strategy' }, classes: 'next-step' },
        { data: { source: 'strategy', target: 'execute' }, classes: 'next-step' },
        { data: { source: 'execute', target: 'complete' }, classes: 'next-step' }
      ]
    },
    'plan-full': {
      nodes: [
        { data: { id: 'start', label: ht('help.workflows.planFull.start') } },
        { data: { id: 'cli-analyze', label: ht('help.workflows.planFull.cliAnalyze') } },
        { data: { id: 'plan', label: '/workflow:plan' } },
        { data: { id: 'verify', label: '/workflow:plan-verify' } },
        { data: { id: 'execute', label: '/workflow:execute' } },
        { data: { id: 'test', label: '/workflow:test-gen' } },
        { data: { id: 'review', label: '/workflow:review' } },




thinking
**Evaluating workflow commands**

Iâ€™m thinking about how to set up the commands for the workflow. If itâ€™s a wrapper, it doesnâ€™t need anything beyond Skill. However, for /workflow:complete to work independently, Iâ€™ll need Bash, Read, Write, and AskUserQuestion commands. The requirement includes marking the active workflow session, which involves using Bash commands. It seems like /workflow:complete should encompass the necessary details, but Iâ€™m not sure if the system checks for allowed-tools properly. It's a bit complex!
thinking
**Considering tool requirements**

I'm examining the skill templates and gates, which require ensuring the allowed-tools list is complete based on their described behavior. If /workflow:complete claims to archive sessions and update manifests, it does need Bash and other functions unless we clarify that it delegates to /workflow:session:complete. We might call it a "thin alias" for that command, simplifying tool requirements to just Skill. Meanwhile, weâ€™ll need to capture the necessary details for the implementation eagerly!
thinking
**Assessing allowed-tools for workflow**

I'm considering the allowed-tools feature for /workflow:complete. It might only need Skill and possibly AskUserQuestion. The underlying command handles user prompts, but from the wrapper's perspective, it seems less relevant. I think we should include a comprehensive list of allowed tools: Skill, AskUserQuestion, Read, Write, and Bash, since our documentation is a bit ambiguous. Also, the requirement notes "allowed-tools: TBD," so Iâ€™ll make sure to set them correctly and address the confirmation steps in a clear way for the user's context.
thinking
**Ensuring documentation completeness**

I need to make sure we're not using placeholders like TBD or N/A in evidence rows. Instead, we should fill in actual references, such as using the document paths for the workflow session. Iâ€™ll need to verify that planned files exist, including using a command for verification like `Test-Path`. Even if it currently fails, itâ€™s okay to note that it should still be included. Additionally, I must check other scripts to understand the required format for evidence verification. Letâ€™s dive into the scripts file to clarify what's needed!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/scripts/verify-evidence.js' in C:\Project\Claude-Code-Workflow succeeded in 303ms:
import fs from 'node:fs';
import path from 'node:path';
import { fileURLToPath } from 'node:url';

export function usage() {
  console.log(
    [
      'Usage:',
      '  node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<path.md> [--file=<path2.md> ...]',
      '',
      'Behavior:',
      '  - Extracts evidence tables from markdown (gap-report and/or outline)',
      '  - Enforces evidence-based gates:',
      '    - Each row must label Status as Existing or Planned',
      '    - Evidence must include BOTH docs and ts anchors:',
      '      - docs: .claude/commands/**.md / <section heading>',
      '      - ts: ccw/src/** / <function|case|pattern>',
      '    - Existing rows must point to verifiable pointers (paths must exist when pointer looks like a path)',
      '',
      'Notes:',

thinking
**Planning documentation structure**

Iâ€™m considering the implementation pointers for the documentation. I think I should create a doc that includes sections like Overview, Usage, Inputs, Outputs/Artifacts, Implementation Pointers, Execution Process, Error Handling, and Examples. Under Error Handling, I'll address scenarios like no active session or failed moves. It might be good to add headings like 'Cleanup Marker' and 'Auto Mode Defaults.' Iâ€™ll also include examples with workflow-related outputs and verify that the necessary files exist.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

$paths = @(
  '"'.claude/commands/workflow/session/complete.md',
  '.claude/commands/workflow/execute.md',
  '.claude/commands/workflow/clean.md',
  '.claude/commands/workflow/review.md',
  '.claude/commands/workflow/session/solidify.md'
)
"'$paths | ForEach-Object { "$_ => " + (Test-Path $_) }' in C:\Project\Claude-Code-Workflow succeeded in 334ms:
.claude/commands/workflow/session/complete.md => True
.claude/commands/workflow/execute.md => True
.claude/commands/workflow/clean.md => True
.claude/commands/workflow/review.md => True
.claude/commands/workflow/session/solidify.md => True
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw .codex/skills/slash-command-outliner/specs/corpus-scope.md' in C:\Project\Claude-Code-Workflow succeeded in 306ms:
# Corpus Scope (All Commands + Tooling)

## Slash Command Corpus (Must Cover 100%)

- `.claude/commands/**/*.md`
  - exclude: `node_modules/`
  - exclude: `_disabled/`

## Server/Tooling Capability Corpus (Must Be Referenced in Gap Analysis)

These are not â€œslash command targetsâ€, but are required to detect hidden dependencies:

- `ccw/src/server/routes/**/*`
- `ccw/src/mcp-server/**/*`
- `ccw/src/tools/**/*`
- `ccw/src/commands/**/*`



thinking
**Searching for tooling code**

I need to look for relevant tooling code in specific directories like ccw/src/server/routes. However, there may not be any, so I should consider searching for something like `.workflow/active`. It's a plan, though Iâ€™m not entirely sure what Iâ€™ll find! Iâ€™m curious to see if those directories hold the information I need. Letâ€™s see how this search goes!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

rg -n "'"\\.workflow/(active|archives)\" ccw/src -S" in C:\Project\Claude-Code-Workflow succeeded in 329ms:
ccw/src\tools\session-manager.ts:23:const ACTIVE_BASE = '.workflow/active';
ccw/src\tools\session-manager.ts:24:const ARCHIVE_BASE = '.workflow/archives';

thinking
**Using session manager tool**

Iâ€™ve found a session manager within the TS tools, and it seems promising for handling session operations. I think itâ€™s a strong piece of evidence to support what Iâ€™m trying to do, so I should go ahead and open it up. That way, I can explore its capabilities and analyze how it can help me effectively manage sessions! Letâ€™s put this into action and see what it brings!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -Raw ccw/src/tools/session-manager.ts' in C:\Project\Claude-Code-Workflow succeeded in 312ms:
/**
 * Session Manager Tool - Workflow session lifecycle management
 * Operations: init, list, read, write, update, archive, mkdir, delete, stats
 * Content routing via content_type + path_params
 */

import { z } from 'zod';
import type { ToolSchema, ToolResult } from '../types/tool.js';
import {
  readFileSync,
  writeFileSync,
  existsSync,
  readdirSync,
  mkdirSync,
  renameSync,
  rmSync,
  statSync,
} from 'fs';
import { resolve, join, dirname } from 'path';


thinking
**Exploring session updates**

Iâ€™m looking at a file that deals with session archiving and manifest updates, which includes an `executeArchive` handler. This seems like itâ€™ll provide evidence for the actual implementation. For archiving, Iâ€™m considering using anchor strings like `operation: OperationEnum = z.enum(['init', ... 'archive'`, but I might prefer to go with the function name `executeArchive` or just the string itself. Iâ€™ll search the file using `rg "executeArchive" ccw/src/tools/session-manager.ts`. Let's get started!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

rg -n "executeArchive" ccw/src/tools/session-manager.ts' in C:\Project\Claude-Code-Workflow succeeded in 324ms:
646:function executeArchive(params: Params): any {
1005:      return executeArchive(params);


thinking
**Analyzing file pointers**

Iâ€™m thinking about how we list files that donâ€™t exist yet but might still be created within the `.workflow`. Weâ€™ll need to indicate which ones are optional for reading existing files. In the evidence table, pointers canâ€™t be placeholders; we should list actual key pointers, like various command files. Iâ€™ll check the path for `.claude/skills/ccw-help/command.json` to ensure it exists. If it has an "Existing" status, then it must truly exist. So verification is crucial here!
thinking
**Clarifying pointer statuses**

I'm examining various file pointers and their statuses. The path for `.claude/commands/workflow/complete.md` is marked as Planned, so it doesnâ€™t need to exist yet. However, files like `ccw/src/tools/session-manager.ts` and `ccw/src/templates/dashboard-js/views/help.js` have an Existing status. Iâ€™m considering the pointer for `.workflow/archives/manifest.json`, but its status is Planned. The key is avoiding any inconsistencies in the evidence tableâ€”if a pointer is labeled Existing, the file must be there. I'll include four pointer rows in the table to keep things organized!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Test-Path .claude/skills/ccw-help/command.json' in C:\Project\Claude-Code-Workflow succeeded in 312ms:
True



thinking
**Finalizing document structure**

I need to make sure I follow the hard rule of only labeling pointers as "Existing" if they're verifiable in the repo. I should only mark existing paths like the session complete doc or help.js. It's also essential that each pointer cell has only one file path, not multiple separated by commas. Plus, output files need to go in the outputs folder. I'll craft the content carefully, ensuring proper line endings and using ASCII where appropriate. Lastly, I should include the command title and mention its alias for compatibility.
thinking
**Outlining the execution process**

I'm structuring the Execution Process with specific steps: First, confirm the session exists. Then, ensure there's a `.archiving` marker, compute metrics, and update the manifest. After that, I'll move to archives and remove the marker, with an option to update project-tech. If itâ€™s not a `--yes`, I should also mention delegation to `/workflow:session:complete`. For error handling, Iâ€™ll account for scenarios like no active session or manifest issues, considering rollbacks as necessary. Lastly, I'll conduct a gap analysis comparing our outline with the existing detailed reference document.
thinking
**Identifying gaps in documentation**

Iâ€™m looking at potential gaps to address. First, I want to make sure the `/workflow:complete` doc accurately references existing documents without duplication and confirms allowed tools. I should also clarify artifact paths, safe/resume semantics, and include a quick reference or command snippets. For P2, I need to integrate the session_manager tool and structure the fix-plan.md without a strict template but using bullet points. The references.json should include scoring. I'll gather headings from the docs for consistency by viewing the top part of the relevant file.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -TotalCount 40 .claude/commands/workflow/session/complete.md' in C:\Project\Claude-Code-Workflow succeeded in 319ms:
---
name: complete
description: Mark active workflow session as complete, archive with lessons learned, update manifest, remove active flag
argument-hint: "[-y|--yes] [--detailed]"
examples:
  - /workflow:session:complete
  - /workflow:session:complete --yes
  - /workflow:session:complete --detailed
---

# Complete Workflow Session (/workflow:session:complete)

Mark the currently active workflow session as complete, archive it, and update manifests.

## Pre-defined Commands

```bash
# Phase 1: Find active session
SESSION_PATH=$(find .workflow/active/ -maxdepth 1 -name "WFS-*" -type d | head -1)
SESSION_ID=$(basename "$SESSION_PATH")





thinking
**Crafting JSON specifications**

I'm working on creating a spec.json, which will outline a command to mark a workflow session as complete. This includes archiving, updating a manifest, and removing an active flag. Iâ€™ve identified the allowed tools, noted the necessary reads and writes involving specific paths, and established constraints like a time budget of 300 seconds. 

I notice there's a discrepancy regarding the format for allowed tools being an array while the documentation might expect a CSV string. I'll need to figure that out!
thinking
**Finalizing references.json**

Iâ€™m moving on to create references.json. This file will include the command to complete the workflow and a list of candidates with their corresponding file paths and scores. I think I need to ensure the "why" section is concise and formatted as a string array to keep it neat. 

Also, as part of this process, I need to make sure the generated-slash-outline.md includes a pointer evidence table without any placeholders. It's all about clarity and structure!
thinking
**Incorporating the pointer table**

Iâ€™m working on including a table that organizes several pointers related to the command for completing the workflow session. The table will have columns for Pointer, Status, Evidence, Verify, and Why. 

Each row will neatly summarize the relevant documentation and code snippets showing the status of each component. I want to ensure that each entry has proper verification paths for easy testing. This should provide a clear reference for understanding how everything is linked together!
thinking
**Ensuring pointer evidence accuracy**

I need to confirm that the evidence script properly validates documentation for each row by reading from the relevant commands file and checking the headings. This looks fine overall. For the TypeScript evidence from the `ccw/skills/ccw-help/command.json` file, I specified the help.js file clearly.

I have to make sure the TypeScript anchor is exactly right, particularly for the `ACTIVE_BASE` line and the `executeArchive` function. I'll use the correct formatting and ensure the evidence parser correctly splits on spaces around the "/". Wrapping the pointer cell path in backticks is a nice touch since the script can remove them later!
thinking
**Verifying command cells and execution process**

I need to verify that the command cells contain existing rows and aren't empty. It looks like we should include this check. For the Execution Process section, Iâ€™m thinking of structuring it as a markdown list.

However, Iâ€™m pondering whether to mention the `session_manager` tool. It's part of CCW and would mean additional tool usage, but it's not on our allowed-tools list. I realize that the allowed-tools section relates to Claude tools. Iâ€™ll need to look up the usage of `session_manager` in the command docs to clarify!
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

rg -n "session_manager'"\\(\" .claude/commands -S" in C:\Project\Claude-Code-Workflow succeeded in 317ms:
.claude/commands\memory\compact.md:319:const manifest = await mcp__ccw-tools__session_manager({
.claude/commands\memory\compact.md:326:  const plan = await mcp__ccw-tools__session_manager({
.claude/commands\memory\tips.md:116:  const manifest = await mcp__ccw-tools__session_manager({
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-Content -TotalCount 20 .claude/commands/workflow/session/start.md' in C:\Project\Claude-Code-Workflow succeeded in 315ms:
---
name: start
description: Discover existing sessions or start new workflow session with intelligent session management and conflict detection
argument-hint: [--type <workflow|review|tdd|test|docs>] [--auto|--new] [optional: task description for new session]
examples:
  - /workflow:session:start
  - /workflow:session:start --auto "implement OAuth2 authentication"
  - /workflow:session:start --type review "Code review for auth module"
  - /workflow:session:start --type tdd --auto "implement user authentication"
  - /workflow:session:start --type test --new "test payment flow"
---

# Start Workflow Session (/workflow:session:start)

## Overview
Manages workflow sessions with three operation modes: discovery (manual), auto (intelligent), and force-new.

**Dual Responsibility**:
1. **Project-level initialization** (first-time only): Creates `.workflow/project-tech.json` for feature registry
2. **Session-level initialization** (always): Creates session directory structure


thinking
**Implementing the fix plan**

I need to outline a fix plan, which won't be checked by the script, but it has to include a gap report and an evidence table. I'll make sure to list plausible read/writes, including placeholders like `<WFS-*>`, in the artifact references, even if they aren't actual paths. Now itâ€™s time to create the necessary directories and use the write_file tool. Iâ€™ll define the output base path and plan to craft six files using multi_tool_use.parallel for speed. Letâ€™s get started on this!
thinking
**Ensuring valid JSON files**

I need to make sure that both `spec.json` and `references.json` are valid JSON formats, and Iâ€™ll format them using 2 spaces for readability. I'm also preparing content strings related to the fix plan and the gap report. Once I have everything analyzed, Iâ€™ll call the write_file function multiple times to write out these files. Itâ€™s important to get this right, so Iâ€™ll double-check each part as I go along!
tool ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json","content":"{\n  \"command\": {\n    \"group\": \"workflow\",\n    \"name\": \"complete\",\n    \"description\": \"Mark active workflow session as complete (archive it, update manifest, remove active flag).\",\n    \"argument_hint\": \"[-y|--yes] [--detailed]\",\n    \"allowed_tools\": [\n      \"Skill(*)\",\n      \"AskUserQuestion(*)\",\n      \"Read(*)\",\n      \"Write(*)\",\n      \"Bash(*)\"\n    ]\n  },\n  \"intent\": {\n    \"type\": \"manage\",\n    \"interaction\": \"single-shot\",\n    \"primary_user_value\": \"Close out the active workflow session safely and leave an archived record + updated manifest.\"\n  },\n  \"artifacts\": {\n    \"reads\": [\n      \".workflow/active/\",\n      \".workflow/active/<WFS-*>/workflow-session.json\",\n      \".workflow/active/<WFS-*>/IMPL_PLAN.md\",\n      \".workflow/active/<WFS-*>/.tasks/*.json\",\n      \".workflow/active/<WFS-*>/.summaries/*.md\",\n      \".workflow/active/<WFS-*>/.review/dimensions/*.json (optional)\",\n      \".workflow/archives/manifest.json (or initialize as [])\",\n      \".workflow/project-tech.json (optional)\"\n    ],\n    \"writes\": [\n      \".workflow/active/<WFS-*>/.archiving (temporary marker; supports resume)\",\n      \".workflow/archives/<WFS-*>/ (moved session)\",\n      \".workflow/archives/manifest.json (append archive entry)\",\n      \".workflow/project-tech.json (optional update)\",\n      \".workflow/archives/<WFS-*>/.archiving (removed on success)\"\n    ]\n  },\n  \"constraints\": {\n    \"max_rounds\": 1,\n    \"time_budget_seconds\": 300,\n    \"must_not\": [\n      \"Do not delete/move anything outside .workflow/ without explicit user confirmation\",\n      \"Do not rely on network access\",\n      \"Do not claim success unless archive move + manifest update complete\",\n      \"Do not mark pointers as Existing unless verifiable in-repo\"\n    ]\n  },\n  \"acceptance\": {\n    \"p0\": [\n      \"Frontmatter contains name, description, allowed-tools, group, argument-hint\",\n      \"Allowed-tools covers described behavior (or delegates via Skill) without unsupported tools\",\n      \"Core sections present (Overview, Usage, Inputs, Execution Process, Outputs/Artifacts, Error Handling)\",\n      \"No broken artifact references (paths created by the command or explicitly optional/pre-existing)\",\n      \"Evidence tables: pointers labeled Existing/Planned with dual-source evidence (docs + ccw/src anchors)\"\n    ]\n  }\n}\n"})
ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json","content":"{\n  \"command\": {\n    \"group\": \"workflow\",\n    \"name\": \"complete\",\n    \"description\": \"Mark active workflow session as complete (archive it, update manifest, remove active flag).\",\n    \"argument_hint\": \"[-y|--yes] [--detailed]\",\n    \"allowed_tools\": [\n      \"Skill(*)\",\n      \"AskUserQuestion(*)\",\n      \"Read(*)\",\n      \"Write(*)\",\n      \"Bash(*)\"\n    ]\n  },\n  \"intent\": {\n    \"type\": \"manage\",\n    \"interaction\": \"single-shot\",\n    \"primary_user_value\": \"Close out the active workflow session safely and leave an archived record + updated manifest.\"\n  },\n  \"artifacts\": {\n    \"reads\": [\n      \".workflow/active/\",\n      \".workflow/active/<WFS-*>/workflow-session.json\",\n      \".workflow/active/<WFS-*>/IMPL_PLAN.md\",\n      \".workflow/active/<WFS-*>/.tasks/*.json\",\n      \".workflow/active/<WFS-*>/.summaries/*.md\",\n      \".workflow/active/<WFS-*>/.review/dimensions/*.json (optional)\",\n      \".workflow/archives/manifest.json (or initialize as [])\",\n      \".workflow/project-tech.json (optional)\"\n    ],\n    \"writes\": [\n      \".workflow/active/<WFS-*>/.archiving (temporary marker; supports resume)\",\n      \".workflow/archives/<WFS-*>/ (moved session)\",\n      \".workflow/archives/manifest.json (append archive entry)\",\n      \".workflow/project-tech.json (optional update)\",\n      \".workflow/archives/<WFS-*>/.archiving (removed on success)\"\n    ]\n  },\n  \"constraints\": {\n    \"max_rounds\": 1,\n    \"time_budget_seconds\": 300,\n    \"must_not\": [\n      \"Do not delete/move anything outside .workflow/ without explicit user confirmation\",\n      \"Do not rely on network access\",\n      \"Do not claim success unless archive move + manifest update complete\",\n      \"Do not mark pointers as Existing unless verifiable in-repo\"\n    ]\n  },\n  \"acceptance\": {\n    \"p0\": [\n      \"Frontmatter contains name, description, allowed-tools, group, argument-hint\",\n      \"Allowed-tools covers described behavior (or delegates via Skill) without unsupported tools\",\n      \"Core sections present (Overview, Usage, Inputs, Execution Process, Outputs/Artifacts, Error Handling)\",\n      \"No broken artifact references (paths created by the command or explicitly optional/pre-existing)\",\n      \"Evidence tables: pointers labeled Existing/Planned with dual-source evidence (docs + ccw/src anchors)\"\n    ]\n  }\n}\n"}) failed in 0ms:
tool ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json","content":"{\n  \"command\": {\n    \"group\": \"workflow\",\n    \"name\": \"complete\"\n  },\n  \"candidates\": [\n    {\n      \"slash\": \"/workflow:session:complete\",\n      \"file_path\": \".claude/commands/workflow/session/complete.md\",\n      \"score\": 100,\n      \"why\": [\n        \"Same lifecycle action (archive active session, update manifests)\",\n        \"Same arguments surface ([-y|--yes] [--detailed])\",\n        \"Directly describes the intended phases + artifacts\"\n      ]\n    },\n    {\n      \"slash\": \"/workflow:execute\",\n      \"file_path\": \".claude/commands/workflow/execute.md\",\n      \"score\": 82,\n      \"why\": [\n        \"Same group; calls completion as a final step\",\n        \"Similar auto/interactive mode behavior with follow-up choice\"\n      ]\n    },\n    {\n      \"slash\": \"/workflow:session:solidify\",\n      \"file_path\": \".claude/commands/workflow/session/solidify.md\",\n      \"score\": 74,\n      \"why\": [\n        \"Directly adjacent follow-up to completion (capture learnings)\",\n        \"Provides patterns for optional post-archive prompting\"\n      ]\n    },\n    {\n      \"slash\": \"/workflow:clean\",\n      \"file_path\": \".claude/commands/workflow/clean.md\",\n      \"score\": 63,\n      \"why\": [\n        \"Touches workflow folder hygiene and session lifecycle references\",\n        \"Contains safety and recovery patterns for destructive operations\"\n      ]\n    },\n    {\n      \"slash\": \"/workflow:review\",\n      \"file_path\": \".claude/commands/workflow/review.md\",\n      \"score\": 58,\n      \"why\": [\n        \"Adjacent phase in the common workflow chain before completion\",\n        \"Contains patterns for next-step selection and session state expectations\"\n      ]\n    }\n  ],\n  \"selected\": {\n    \"slash\": \"/workflow:session:complete\",\n    \"file_path\": \".claude/commands/workflow/session/complete.md\",\n    \"reason\": \"Closest direct match (same intent, phases, artifacts, and args).\"\n  }\n}\n"})
ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json","content":"{\n  \"command\": {\n    \"group\": \"workflow\",\n    \"name\": \"complete\"\n  },\n  \"candidates\": [\n    {\n      \"slash\": \"/workflow:session:complete\",\n      \"file_path\": \".claude/commands/workflow/session/complete.md\",\n      \"score\": 100,\n      \"why\": [\n        \"Same lifecycle action (archive active session, update manifests)\",\n        \"Same arguments surface ([-y|--yes] [--detailed])\",\n        \"Directly describes the intended phases + artifacts\"\n      ]\n    },\n    {\n      \"slash\": \"/workflow:execute\",\n      \"file_path\": \".claude/commands/workflow/execute.md\",\n      \"score\": 82,\n      \"why\": [\n        \"Same group; calls completion as a final step\",\n        \"Similar auto/interactive mode behavior with follow-up choice\"\n      ]\n    },\n    {\n      \"slash\": \"/workflow:session:solidify\",\n      \"file_path\": \".claude/commands/workflow/session/solidify.md\",\n      \"score\": 74,\n      \"why\": [\n        \"Directly adjacent follow-up to completion (capture learnings)\",\n        \"Provides patterns for optional post-archive prompting\"\n      ]\n    },\n    {\n      \"slash\": \"/workflow:clean\",\n      \"file_path\": \".claude/commands/workflow/clean.md\",\n      \"score\": 63,\n      \"why\": [\n        \"Touches workflow folder hygiene and session lifecycle references\",\n        \"Contains safety and recovery patterns for destructive operations\"\n      ]\n    },\n    {\n      \"slash\": \"/workflow:review\",\n      \"file_path\": \".claude/commands/workflow/review.md\",\n      \"score\": 58,\n      \"why\": [\n        \"Adjacent phase in the common workflow chain before completion\",\n        \"Contains patterns for next-step selection and session state expectations\"\n      ]\n    }\n  ],\n  \"selected\": {\n    \"slash\": \"/workflow:session:complete\",\n    \"file_path\": \".claude/commands/workflow/session/complete.md\",\n    \"reason\": \"Closest direct match (same intent, phases, artifacts, and args).\"\n  }\n}\n"}) failed in 0ms:
tool ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md","content":"---\nname: complete\ndescription: Mark active workflow session as complete (archive it, update manifest, remove active flag).\nargument-hint: \"[-y|--yes] [--detailed]\"\nallowed-tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)\ngroup: workflow\n---\n\n# Complete Workflow Session (/workflow:complete)\n\n## Overview\n\n- Goal: Close out the active workflow session safely and leave an archived record + updated manifest.\n- Command: `/workflow:complete`\n- Relationship: This is a thin, user-friendly alias for `/workflow:session:complete`.\n\n## Usage\n\n```bash\n/workflow:complete [-y|--yes] [--detailed]\n```\n\n## Inputs\n\n- Required inputs:\n  - An active workflow session directory under `.workflow/active/` (typically `WFS-*`).\n- Optional inputs:\n  - `-y` / `--yes`: auto mode (minimize prompts; skip optional follow-ups).\n  - `--detailed`: include more detailed manifest/lesson output (if supported).\n\n## Outputs / Artifacts\n\n- Writes:\n  - `.workflow/archives/<SESSION_ID>/` (moved session)\n  - `.workflow/archives/manifest.json` (append archive entry)\n  - `.workflow/project-tech.json` (optional update)\n  - `.workflow/active/<SESSION_ID>/.archiving` (temporary marker; removed on success)\n- Reads:\n  - `.workflow/active/<SESSION_ID>/workflow-session.json`\n  - `.workflow/active/<SESSION_ID>/IMPL_PLAN.md`\n  - `.workflow/active/<SESSION_ID>/.tasks/*.json`\n  - `.workflow/active/<SESSION_ID>/.summaries/*.md`\n  - `.workflow/active/<SESSION_ID>/.review/dimensions/*.json` (optional)\n  - `.workflow/archives/manifest.json` (or initialize as `[]`)\n\n## Implementation Pointers\n\n- Command doc (to create): `.claude/commands/workflow/complete.md`\n- Oracle reference (do not copy verbatim): `.claude/commands/workflow/session/complete.md`\n- Likely code locations:\n  - `ccw/src/tools/session-manager.ts` (session archive + lifecycle helpers)\n  - `ccw/src/templates/dashboard-js/views/help.js` (workflow flow graph lists completion command)\n  - `.claude/skills/ccw-help/command.json` (command registry/index)\n\n### Evidence (Existing vs Planned)\n\n| Pointer | Status | Evidence (docs + TS) | Verify | Why |\n|---|---|---|---|---|\n| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path .claude/commands/workflow/complete.md` | add alias command doc (`/workflow:complete`) |\n| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md`; `rg \"^# Complete Workflow Session\" .claude/commands/workflow/session/complete.md` | oracle reference for phases/artifacts |\n| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path ccw/src/tools/session-manager.ts`; `rg \"function executeArchive\" ccw/src/tools/session-manager.ts` | existing implementation surface for archiving sessions |\n| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js`; `rg \"label: '/workflow:session:complete'\" ccw/src/templates/dashboard-js/views/help.js` | help/UI flow references completion command; may switch to alias |\n| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | registry entry may need add `/workflow:complete` |\n\n## Execution Process\n\n1) Resolve the active workflow session\n   - Locate the active session directory under `.workflow/active/` (expect `WFS-*`).\n   - If none found: stop with a clear error.\n   - If multiple found: ask user to select (unless `--yes`, then pick the most recent deterministically).\n\n2) Create/resume an archiving marker\n   - If `.archiving` marker exists, treat as resume mode.\n   - Otherwise create `.archiving` to mark the process as in-progress.\n\n3) Generate archive metadata (read-only)\n   - Read minimal session metadata from `workflow-session.json` and `IMPL_PLAN.md`.\n   - Compute basic counts from `.tasks/` + `.summaries/` (and optional `.review/`).\n\n4) Archive atomically\n   - Ensure `.workflow/archives/<SESSION_ID>/` exists.\n   - Move session from `.workflow/active/<SESSION_ID>/` to `.workflow/archives/<SESSION_ID>/`.\n   - Update `.workflow/archives/manifest.json`: read (or `[]`), append new archive entry, write.\n   - Remove `.archiving` marker after success.\n\n5) Optional project registry update\n   - If `.workflow/project-tech.json` exists, append a completed feature entry that links back to `<SESSION_ID>`.\n\n6) Post-archive follow-up (always)\n   - If `--yes`: skip optional follow-ups.\n   - Otherwise: ask whether to run the next-step capture (e.g., `/workflow:session:solidify`).\n\n## Error Handling\n\n- No active session found: explain expected location `.workflow/active/WFS-*`.\n- Multiple active sessions: prompt user to select; default deterministically in `--yes` mode.\n- Manifest missing or invalid JSON: initialize as `[]` (or fail with recovery instructions if unrecoverable).\n- Partial failure after marker set: keep `.archiving` and provide resume instructions.\n- Move/rename failure: stop and report the failing path(s); do not remove `.archiving`.\n\n## Examples\n\n```bash\n/workflow:complete\n/workflow:complete --yes\n/workflow:complete --detailed\n```\n"})
ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md","content":"---\nname: complete\ndescription: Mark active workflow session as complete (archive it, update manifest, remove active flag).\nargument-hint: \"[-y|--yes] [--detailed]\"\nallowed-tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)\ngroup: workflow\n---\n\n# Complete Workflow Session (/workflow:complete)\n\n## Overview\n\n- Goal: Close out the active workflow session safely and leave an archived record + updated manifest.\n- Command: `/workflow:complete`\n- Relationship: This is a thin, user-friendly alias for `/workflow:session:complete`.\n\n## Usage\n\n```bash\n/workflow:complete [-y|--yes] [--detailed]\n```\n\n## Inputs\n\n- Required inputs:\n  - An active workflow session directory under `.workflow/active/` (typically `WFS-*`).\n- Optional inputs:\n  - `-y` / `--yes`: auto mode (minimize prompts; skip optional follow-ups).\n  - `--detailed`: include more detailed manifest/lesson output (if supported).\n\n## Outputs / Artifacts\n\n- Writes:\n  - `.workflow/archives/<SESSION_ID>/` (moved session)\n  - `.workflow/archives/manifest.json` (append archive entry)\n  - `.workflow/project-tech.json` (optional update)\n  - `.workflow/active/<SESSION_ID>/.archiving` (temporary marker; removed on success)\n- Reads:\n  - `.workflow/active/<SESSION_ID>/workflow-session.json`\n  - `.workflow/active/<SESSION_ID>/IMPL_PLAN.md`\n  - `.workflow/active/<SESSION_ID>/.tasks/*.json`\n  - `.workflow/active/<SESSION_ID>/.summaries/*.md`\n  - `.workflow/active/<SESSION_ID>/.review/dimensions/*.json` (optional)\n  - `.workflow/archives/manifest.json` (or initialize as `[]`)\n\n## Implementation Pointers\n\n- Command doc (to create): `.claude/commands/workflow/complete.md`\n- Oracle reference (do not copy verbatim): `.claude/commands/workflow/session/complete.md`\n- Likely code locations:\n  - `ccw/src/tools/session-manager.ts` (session archive + lifecycle helpers)\n  - `ccw/src/templates/dashboard-js/views/help.js` (workflow flow graph lists completion command)\n  - `.claude/skills/ccw-help/command.json` (command registry/index)\n\n### Evidence (Existing vs Planned)\n\n| Pointer | Status | Evidence (docs + TS) | Verify | Why |\n|---|---|---|---|---|\n| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path .claude/commands/workflow/complete.md` | add alias command doc (`/workflow:complete`) |\n| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md`; `rg \"^# Complete Workflow Session\" .claude/commands/workflow/session/complete.md` | oracle reference for phases/artifacts |\n| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path ccw/src/tools/session-manager.ts`; `rg \"function executeArchive\" ccw/src/tools/session-manager.ts` | existing implementation surface for archiving sessions |\n| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js`; `rg \"label: '/workflow:session:complete'\" ccw/src/templates/dashboard-js/views/help.js` | help/UI flow references completion command; may switch to alias |\n| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | registry entry may need add `/workflow:complete` |\n\n## Execution Process\n\n1) Resolve the active workflow session\n   - Locate the active session directory under `.workflow/active/` (expect `WFS-*`).\n   - If none found: stop with a clear error.\n   - If multiple found: ask user to select (unless `--yes`, then pick the most recent deterministically).\n\n2) Create/resume an archiving marker\n   - If `.archiving` marker exists, treat as resume mode.\n   - Otherwise create `.archiving` to mark the process as in-progress.\n\n3) Generate archive metadata (read-only)\n   - Read minimal session metadata from `workflow-session.json` and `IMPL_PLAN.md`.\n   - Compute basic counts from `.tasks/` + `.summaries/` (and optional `.review/`).\n\n4) Archive atomically\n   - Ensure `.workflow/archives/<SESSION_ID>/` exists.\n   - Move session from `.workflow/active/<SESSION_ID>/` to `.workflow/archives/<SESSION_ID>/`.\n   - Update `.workflow/archives/manifest.json`: read (or `[]`), append new archive entry, write.\n   - Remove `.archiving` marker after success.\n\n5) Optional project registry update\n   - If `.workflow/project-tech.json` exists, append a completed feature entry that links back to `<SESSION_ID>`.\n\n6) Post-archive follow-up (always)\n   - If `--yes`: skip optional follow-ups.\n   - Otherwise: ask whether to run the next-step capture (e.g., `/workflow:session:solidify`).\n\n## Error Handling\n\n- No active session found: explain expected location `.workflow/active/WFS-*`.\n- Multiple active sessions: prompt user to select; default deterministically in `--yes` mode.\n- Manifest missing or invalid JSON: initialize as `[]` (or fail with recovery instructions if unrecoverable).\n- Partial failure after marker set: keep `.archiving` and provide resume instructions.\n- Move/rename failure: stop and report the failing path(s); do not remove `.archiving`.\n\n## Examples\n\n```bash\n/workflow:complete\n/workflow:complete --yes\n/workflow:complete --detailed\n```\n"}) failed in 0ms:
tool ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md","content":"# Agent Outline: workflow:complete\n\n## Purpose\n\nImplement and/or evolve the slash command `/workflow:complete` as a thin alias for session completion, aligned with existing CCW workflow session lifecycle behavior.\n\n## Execution Model\n\n- Default: incremental, testable changes (docs + indexes first)\n- Prefer reuse over duplication: delegate to `/workflow:session:complete` instead of copying large scripts\n- Use repo searches (ACE-tool / rg) to confirm exact existing paths and anchors before marking anything `Existing`\n\n## State & Artifacts\n\n- Workflow state:\n  - Active sessions: `.workflow/active/`\n  - Archives: `.workflow/archives/`\n- Required outputs:\n  - New command doc: `.claude/commands/workflow/complete.md`\n  - Any index/registry updates that surface the new alias (help + command indexes)\n\n## Tooling\n\n- Allowed tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)\n- Non-negotiables:\n  - no unrelated changes\n  - keep pointers evidence-based (Existing vs Planned + dual-source evidence)\n\n## Validation Strategy\n\n- P0 gates:\n  - frontmatter completeness + core sections present\n  - allowed-tools is plausible for described behavior (or explicitly delegates)\n  - no broken artifact references\n  - evidence tables pass deterministic verification\n- Deterministic check:\n  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<generated md>`\n"})
ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md","content":"# Agent Outline: workflow:complete\n\n## Purpose\n\nImplement and/or evolve the slash command `/workflow:complete` as a thin alias for session completion, aligned with existing CCW workflow session lifecycle behavior.\n\n## Execution Model\n\n- Default: incremental, testable changes (docs + indexes first)\n- Prefer reuse over duplication: delegate to `/workflow:session:complete` instead of copying large scripts\n- Use repo searches (ACE-tool / rg) to confirm exact existing paths and anchors before marking anything `Existing`\n\n## State & Artifacts\n\n- Workflow state:\n  - Active sessions: `.workflow/active/`\n  - Archives: `.workflow/archives/`\n- Required outputs:\n  - New command doc: `.claude/commands/workflow/complete.md`\n  - Any index/registry updates that surface the new alias (help + command indexes)\n\n## Tooling\n\n- Allowed tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)\n- Non-negotiables:\n  - no unrelated changes\n  - keep pointers evidence-based (Existing vs Planned + dual-source evidence)\n\n## Validation Strategy\n\n- P0 gates:\n  - frontmatter completeness + core sections present\n  - allowed-tools is plausible for described behavior (or explicitly delegates)\n  - no broken artifact references\n  - evidence tables pass deterministic verification\n- Deterministic check:\n  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<generated md>`\n"}) failed in 0ms:
tool ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md","content":"# Gap Report: workflow:complete\n\n## Reference\n\n- Selected reference: /workflow:session:complete (`.claude/commands/workflow/session/complete.md`)\n\n## P0 Gaps (Must Fix)\n\n- Decide whether `/workflow:complete` is a pure alias (recommended) or a duplicate of the full completion procedure. If alias, the doc must explicitly delegate to `/workflow:session:complete` and avoid duplicating long bash blocks.\n- Confirm allowed-tools for the alias doc are consistent with CCW conventions for workflow commands (at minimum, must not omit tools needed by the described behavior).\n- Ensure all key implementation pointers are evidence-based (Existing vs Planned) with dual-source evidence (docs + `ccw/src/**` anchors) and pass deterministic verification.\n\n## P1 Gaps (Should Fix)\n\n- Update discovery surfaces so users find `/workflow:complete`:\n  - command registry/index (ccw-help)\n  - dashboard help/flow graph (if it should prefer the alias)\n  - command reference docs (if present)\n- Clarify resume semantics: how `.archiving` marker is used to allow safe retry after failure.\n\n## P2 Gaps (Optional)\n\n- Add a short \"Quick Reference\" section in the alias doc with the minimal invocations + expected outputs.\n- If `--detailed` is supported, define what additional details are emitted (extra manifest fields vs extra console output).\n\n## Implementation Pointers (Evidence)\n\n| Pointer | Status | Evidence | Verify | Notes |\n|---|---|---|---|---|\n| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ARCHIVE_BASE = '.workflow/archives'; | `Test-Path .claude/commands/workflow/complete.md` | new alias command doc |\n| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md` | oracle reference |\n| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path ccw/src/tools/session-manager.ts` | implementation surface for session archive |\n| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js` | may need UI label switch to `/workflow:complete` |\n| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | add alias entry (and regenerate derived indexes if required) |\n\n## Implementation Hints (Tooling/Server)\n\n- `ccw/src/tools/session-manager.ts` already defines workflow session locations (`.workflow/active`, `.workflow/archives`) and includes an archive operation; prefer reusing it if/when the completion flow is moved from doc-only to tool-backed execution.\n\n## Proposed Fix Plan (Minimal)\n\n1) Docs (P0)\n   - Create `.claude/commands/workflow/complete.md` with CCW frontmatter + core sections.\n   - State explicitly: delegates to `/workflow:session:complete` and forwards `[-y|--yes] [--detailed]` args.\n\n2) Indexing / Discovery (P1)\n   - Add `/workflow:complete` to `.claude/skills/ccw-help/command.json` (and any derived index JSONs, if this repo requires regeneration).\n   - Decide whether `ccw/src/templates/dashboard-js/views/help.js` should display `/workflow:complete` instead of `/workflow:session:complete`.\n\n3) Validation (P0)\n   - Run evidence gate on the updated doc + gap report outputs.\n"})
ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md","content":"# Gap Report: workflow:complete\n\n## Reference\n\n- Selected reference: /workflow:session:complete (`.claude/commands/workflow/session/complete.md`)\n\n## P0 Gaps (Must Fix)\n\n- Decide whether `/workflow:complete` is a pure alias (recommended) or a duplicate of the full completion procedure. If alias, the doc must explicitly delegate to `/workflow:session:complete` and avoid duplicating long bash blocks.\n- Confirm allowed-tools for the alias doc are consistent with CCW conventions for workflow commands (at minimum, must not omit tools needed by the described behavior).\n- Ensure all key implementation pointers are evidence-based (Existing vs Planned) with dual-source evidence (docs + `ccw/src/**` anchors) and pass deterministic verification.\n\n## P1 Gaps (Should Fix)\n\n- Update discovery surfaces so users find `/workflow:complete`:\n  - command registry/index (ccw-help)\n  - dashboard help/flow graph (if it should prefer the alias)\n  - command reference docs (if present)\n- Clarify resume semantics: how `.archiving` marker is used to allow safe retry after failure.\n\n## P2 Gaps (Optional)\n\n- Add a short \"Quick Reference\" section in the alias doc with the minimal invocations + expected outputs.\n- If `--detailed` is supported, define what additional details are emitted (extra manifest fields vs extra console output).\n\n## Implementation Pointers (Evidence)\n\n| Pointer | Status | Evidence | Verify | Notes |\n|---|---|---|---|---|\n| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ARCHIVE_BASE = '.workflow/archives'; | `Test-Path .claude/commands/workflow/complete.md` | new alias command doc |\n| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md` | oracle reference |\n| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path ccw/src/tools/session-manager.ts` | implementation surface for session archive |\n| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js` | may need UI label switch to `/workflow:complete` |\n| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | add alias entry (and regenerate derived indexes if required) |\n\n## Implementation Hints (Tooling/Server)\n\n- `ccw/src/tools/session-manager.ts` already defines workflow session locations (`.workflow/active`, `.workflow/archives`) and includes an archive operation; prefer reusing it if/when the completion flow is moved from doc-only to tool-backed execution.\n\n## Proposed Fix Plan (Minimal)\n\n1) Docs (P0)\n   - Create `.claude/commands/workflow/complete.md` with CCW frontmatter + core sections.\n   - State explicitly: delegates to `/workflow:session:complete` and forwards `[-y|--yes] [--detailed]` args.\n\n2) Indexing / Discovery (P1)\n   - Add `/workflow:complete` to `.claude/skills/ccw-help/command.json` (and any derived index JSONs, if this repo requires regeneration).\n   - Decide whether `ccw/src/templates/dashboard-js/views/help.js` should display `/workflow:complete` instead of `/workflow:session:complete`.\n\n3) Validation (P0)\n   - Run evidence gate on the updated doc + gap report outputs.\n"}) failed in 0ms:
tool ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md","content":"# Fix Plan: workflow:complete\n\n## Scope: Docs (P0)\n\n- Create `.claude/commands/workflow/complete.md`.\n- Keep it thin: explicitly delegate to `/workflow:session:complete` and forward args `[-y|--yes] [--detailed]`.\n- Include core sections: Overview, Usage, Inputs, Outputs/Artifacts, Execution Process (high level), Error Handling, Examples.\n\n## Scope: Index/Discovery (P1)\n\n- Add alias entry for `/workflow:complete` in `.claude/skills/ccw-help/command.json`.\n- If required by the help system, regenerate derived indexes under `.claude/skills/ccw-help/index/`.\n- Optional: switch dashboard help flow node label from `/workflow:session:complete` to `/workflow:complete` in `ccw/src/templates/dashboard-js/views/help.js`.\n\n## Scope: Validation (P0)\n\n- Run deterministic evidence verification:\n  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`\n  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`\n\n## Verify Steps (No-Guess)\n\n- Confirm whether `.claude/commands/workflow/complete.md` should be new (alias) or a rename of the session command.\n- Confirm whether UI/help should prefer the alias (search for literal `'/workflow:session:complete'` references under `ccw/src/`).\n"})
ccw-tools.write_file({"path":".workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md","content":"# Fix Plan: workflow:complete\n\n## Scope: Docs (P0)\n\n- Create `.claude/commands/workflow/complete.md`.\n- Keep it thin: explicitly delegate to `/workflow:session:complete` and forward args `[-y|--yes] [--detailed]`.\n- Include core sections: Overview, Usage, Inputs, Outputs/Artifacts, Execution Process (high level), Error Handling, Examples.\n\n## Scope: Index/Discovery (P1)\n\n- Add alias entry for `/workflow:complete` in `.claude/skills/ccw-help/command.json`.\n- If required by the help system, regenerate derived indexes under `.claude/skills/ccw-help/index/`.\n- Optional: switch dashboard help flow node label from `/workflow:session:complete` to `/workflow:complete` in `ccw/src/templates/dashboard-js/views/help.js`.\n\n## Scope: Validation (P0)\n\n- Run deterministic evidence verification:\n  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`\n  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`\n\n## Verify Steps (No-Guess)\n\n- Confirm whether `.claude/commands/workflow/complete.md` should be new (alias) or a rename of the session command.\n- Confirm whether UI/help should prefer the alias (search for literal `'/workflow:session:complete'` references under `ccw/src/`).\n"}) failed in 0ms:
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

$dir = '"'.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs'
New-Item -ItemType Directory -Force -Path "'$dir | Out-Null
Get-Item $dir | Select-Object FullName' in C:\Project\Claude-Code-Workflow succeeded in 329ms:

[32;1mFullName[0m
[32;1m--------[0m
C:\Project\Claude-Code-Workflow\.workflow\.cycle\cycle-auto-20260205T010617-slashcmdoutliner-codex.progress\llm\CMD-04â€¦


thinking
**Creating files and patching**

Iâ€™m thinking of creating files using the apply_patch function with the â€œAdd Fileâ€ option. Iâ€™ll write content just like before and make sure thereâ€™s no non-ASCII text. I need to remember to patch each file as I go. It seems straightforward, but I want to verify everything is correct and properly formatted while Iâ€™m doing this to avoid any hiccups. I'll get started with the apply_patch function now!
file update
A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
{
  "command": {
    "group": "workflow",
    "name": "complete",
    "description": "Mark active workflow session as complete (archive it, update manifest, remove active flag).",
    "argument_hint": "[-y|--yes] [--detailed]",
    "allowed_tools": [
      "Skill(*)",
      "AskUserQuestion(*)",
      "Read(*)",
      "Write(*)",
      "Bash(*)"
    ]
  },
  "intent": {
    "type": "manage",
    "interaction": "single-shot",
    "primary_user_value": "Close out the active workflow session safely and leave an archived record + updated manifest."
  },
  "artifacts": {
    "reads": [
      ".workflow/active/",
      ".workflow/active/<WFS-*>/workflow-session.json",
      ".workflow/active/<WFS-*>/IMPL_PLAN.md",
      ".workflow/active/<WFS-*>/.tasks/*.json",
      ".workflow/active/<WFS-*>/.summaries/*.md",
      ".workflow/active/<WFS-*>/.review/dimensions/*.json (optional)",
      ".workflow/archives/manifest.json (or initialize as [])",
      ".workflow/project-tech.json (optional)"
    ],
    "writes": [
      ".workflow/active/<WFS-*>/.archiving (temporary marker; supports resume)",
      ".workflow/archives/<WFS-*>/ (moved session)",
      ".workflow/archives/manifest.json (append archive entry)",
      ".workflow/project-tech.json (optional update)",
      ".workflow/archives/<WFS-*>/.archiving (removed on success)"
    ]
  },
  "constraints": {
    "max_rounds": 1,
    "time_budget_seconds": 300,
    "must_not": [
      "Do not delete/move anything outside .workflow/ without explicit user confirmation",
      "Do not rely on network access",
      "Do not claim success unless archive move + manifest update complete",
      "Do not mark pointers as Existing unless verifiable in-repo"
    ]
  },
  "acceptance": {
    "p0": [
      "Frontmatter contains name, description, allowed-tools, group, argument-hint",
      "Allowed-tools covers described behavior (or delegates via Skill) without unsupported tools",
      "Core sections present (Overview, Usage, Inputs, Execution Process, Outputs/Artifacts, Error Handling)",
      "No broken artifact references (paths created by the command or explicitly optional/pre-existing)",
      "Evidence tables: pointers labeled Existing/Planned with dual-source evidence (docs + ccw/src anchors)"
    ]
  }
}

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
# Fix Plan: workflow:complete

## Scope: Docs (P0)

- Create `.claude/commands/workflow/complete.md`.
- Keep it thin: explicitly delegate to `/workflow:session:complete` and forward args `[-y|--yes] [--detailed]`.
- Include core sections: Overview, Usage, Inputs, Outputs/Artifacts, Execution Process (high level), Error Handling, Examples.

## Scope: Index/Discovery (P1)

- Add alias entry for `/workflow:complete` in `.claude/skills/ccw-help/command.json`.
- If required by the help system, regenerate derived indexes under `.claude/skills/ccw-help/index/`.
- Optional: switch dashboard help flow node label from `/workflow:session:complete` to `/workflow:complete` in `ccw/src/templates/dashboard-js/views/help.js`.

## Scope: Validation (P0)

- Run deterministic evidence verification:
  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`
  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`

## Verify Steps (No-Guess)

- Confirm whether `.claude/commands/workflow/complete.md` should be new (alias) or a rename of the session command.
- Confirm whether UI/help should prefer the alias (search for literal `'/workflow:session:complete'` references under `ccw/src/`).

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
---
name: complete
description: Mark active workflow session as complete (archive it, update manifest, remove active flag).
argument-hint: "[-y|--yes] [--detailed]"
allowed-tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
group: workflow
---

# Complete Workflow Session (/workflow:complete)

## Overview

- Goal: Close out the active workflow session safely and leave an archived record + updated manifest.
- Command: `/workflow:complete`
- Relationship: This is a thin, user-friendly alias for `/workflow:session:complete`.

## Usage

```bash
/workflow:complete [-y|--yes] [--detailed]
```

## Inputs

- Required inputs:
  - An active workflow session directory under `.workflow/active/` (typically `WFS-*`).
- Optional inputs:
  - `-y` / `--yes`: auto mode (minimize prompts; skip optional follow-ups).
  - `--detailed`: include more detailed manifest/lesson output (if supported).

## Outputs / Artifacts

- Writes:
  - `.workflow/archives/<SESSION_ID>/` (moved session)
  - `.workflow/archives/manifest.json` (append archive entry)
  - `.workflow/project-tech.json` (optional update)
  - `.workflow/active/<SESSION_ID>/.archiving` (temporary marker; removed on success)
- Reads:
  - `.workflow/active/<SESSION_ID>/workflow-session.json`
  - `.workflow/active/<SESSION_ID>/IMPL_PLAN.md`
  - `.workflow/active/<SESSION_ID>/.tasks/*.json`
  - `.workflow/active/<SESSION_ID>/.summaries/*.md`
  - `.workflow/active/<SESSION_ID>/.review/dimensions/*.json` (optional)
  - `.workflow/archives/manifest.json` (or initialize as `[]`)

## Implementation Pointers

- Command doc (to create): `.claude/commands/workflow/complete.md`
- Oracle reference (do not copy verbatim): `.claude/commands/workflow/session/complete.md`
- Likely code locations:
  - `ccw/src/tools/session-manager.ts` (session archive + lifecycle helpers)
  - `ccw/src/templates/dashboard-js/views/help.js` (workflow flow graph lists completion command)
  - `.claude/skills/ccw-help/command.json` (command registry/index)

### Evidence (Existing vs Planned)

| Pointer | Status | Evidence (docs + TS) | Verify | Why |
|---|---|---|---|---|
| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path .claude/commands/workflow/complete.md` | add alias command doc (`/workflow:complete`) |
| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md`; `rg "^# Complete Workflow Session" .claude/commands/workflow/session/complete.md` | oracle reference for phases/artifacts |
| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path ccw/src/tools/session-manager.ts`; `rg "function executeArchive" ccw/src/tools/session-manager.ts` | existing implementation surface for archiving sessions |
| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js`; `rg "label: '/workflow:session:complete'" ccw/src/templates/dashboard-js/views/help.js` | help/UI flow references completion command; may switch to alias |
| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | registry entry may need add `/workflow:complete` |

## Execution Process

1) Resolve the active workflow session
   - Locate the active session directory under `.workflow/active/` (expect `WFS-*`).
   - If none found: stop with a clear error.
   - If multiple found: ask user to select (unless `--yes`, then pick the most recent deterministically).

2) Create/resume an archiving marker
   - If `.archiving` marker exists, treat as resume mode.
   - Otherwise create `.archiving` to mark the process as in-progress.

3) Generate archive metadata (read-only)
   - Read minimal session metadata from `workflow-session.json` and `IMPL_PLAN.md`.
   - Compute basic counts from `.tasks/` + `.summaries/` (and optional `.review/`).

4) Archive atomically
   - Ensure `.workflow/archives/<SESSION_ID>/` exists.
   - Move session from `.workflow/active/<SESSION_ID>/` to `.workflow/archives/<SESSION_ID>/`.
   - Update `.workflow/archives/manifest.json`: read (or `[]`), append new archive entry, write.
   - Remove `.archiving` marker after success.

5) Optional project registry update
   - If `.workflow/project-tech.json` exists, append a completed feature entry that links back to `<SESSION_ID>`.

6) Post-archive follow-up (always)
   - If `--yes`: skip optional follow-ups.
   - Otherwise: ask whether to run the next-step capture (e.g., `/workflow:session:solidify`).

## Error Handling

- No active session found: explain expected location `.workflow/active/WFS-*`.
- Multiple active sessions: prompt user to select; default deterministically in `--yes` mode.
- Manifest missing or invalid JSON: initialize as `[]` (or fail with recovery instructions if unrecoverable).
- Partial failure after marker set: keep `.archiving` and provide resume instructions.
- Move/rename failure: stop and report the failing path(s); do not remove `.archiving`.

## Examples

```bash
/workflow:complete
/workflow:complete --yes
/workflow:complete --detailed
```

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
# Gap Report: workflow:complete

## Reference

- Selected reference: /workflow:session:complete (`.claude/commands/workflow/session/complete.md`)

## P0 Gaps (Must Fix)

- Decide whether `/workflow:complete` is a pure alias (recommended) or a duplicate of the full completion procedure. If alias, the doc must explicitly delegate to `/workflow:session:complete` and avoid duplicating long bash blocks.
- Confirm allowed-tools for the alias doc are consistent with CCW conventions for workflow commands (at minimum, must not omit tools needed by the described behavior).
- Ensure all key implementation pointers are evidence-based (Existing vs Planned) with dual-source evidence (docs + `ccw/src/**` anchors) and pass deterministic verification.

## P1 Gaps (Should Fix)

- Update discovery surfaces so users find `/workflow:complete`:
  - command registry/index (ccw-help)
  - dashboard help/flow graph (if it should prefer the alias)
  - command reference docs (if present)
- Clarify resume semantics: how `.archiving` marker is used to allow safe retry after failure.

## P2 Gaps (Optional)

- Add a short "Quick Reference" section in the alias doc with the minimal invocations + expected outputs.
- If `--detailed` is supported, define what additional details are emitted (extra manifest fields vs extra console output).

## Implementation Pointers (Evidence)

| Pointer | Status | Evidence | Verify | Notes |
|---|---|---|---|---|
| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ARCHIVE_BASE = '.workflow/archives'; | `Test-Path .claude/commands/workflow/complete.md` | new alias command doc |
| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md` | oracle reference |
| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path ccw/src/tools/session-manager.ts` | implementation surface for session archive |
| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js` | may need UI label switch to `/workflow:complete` |
| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | add alias entry (and regenerate derived indexes if required) |

## Implementation Hints (Tooling/Server)

- `ccw/src/tools/session-manager.ts` already defines workflow session locations (`.workflow/active`, `.workflow/archives`) and includes an archive operation; prefer reusing it if/when the completion flow is moved from doc-only to tool-backed execution.

## Proposed Fix Plan (Minimal)

1) Docs (P0)
   - Create `.claude/commands/workflow/complete.md` with CCW frontmatter + core sections.
   - State explicitly: delegates to `/workflow:session:complete` and forwards `[-y|--yes] [--detailed]` args.

2) Indexing / Discovery (P1)
   - Add `/workflow:complete` to `.claude/skills/ccw-help/command.json` (and any derived index JSONs, if this repo requires regeneration).
   - Decide whether `ccw/src/templates/dashboard-js/views/help.js` should display `/workflow:complete` instead of `/workflow:session:complete`.

3) Validation (P0)
   - Run evidence gate on the updated doc + gap report outputs.

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
# Agent Outline: workflow:complete

## Purpose

Implement and/or evolve the slash command `/workflow:complete` as a thin alias for session completion, aligned with existing CCW workflow session lifecycle behavior.

## Execution Model

- Default: incremental, testable changes (docs + indexes first)
- Prefer reuse over duplication: delegate to `/workflow:session:complete` instead of copying large scripts
- Use repo searches (ACE-tool / rg) to confirm exact existing paths and anchors before marking anything `Existing`

## State & Artifacts

- Workflow state:
  - Active sessions: `.workflow/active/`
  - Archives: `.workflow/archives/`
- Required outputs:
  - New command doc: `.claude/commands/workflow/complete.md`
  - Any index/registry updates that surface the new alias (help + command indexes)

## Tooling

- Allowed tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
- Non-negotiables:
  - no unrelated changes
  - keep pointers evidence-based (Existing vs Planned + dual-source evidence)

## Validation Strategy

- P0 gates:
  - frontmatter completeness + core sections present
  - allowed-tools is plausible for described behavior (or explicitly delegates)
  - no broken artifact references
  - evidence tables pass deterministic verification
- Deterministic check:
  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<generated md>`

A C:\Project\Claude-Code-Workflow\.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
{
  "command": {
    "group": "workflow",
    "name": "complete"
  },
  "candidates": [
    {
      "slash": "/workflow:session:complete",
      "file_path": ".claude/commands/workflow/session/complete.md",
      "score": 100,
      "why": [
        "Same lifecycle action (archive active session, update manifests)",
        "Same arguments surface ([-y|--yes] [--detailed])",
        "Directly describes the intended phases + artifacts"
      ]
    },
    {
      "slash": "/workflow:execute",
      "file_path": ".claude/commands/workflow/execute.md",
      "score": 82,
      "why": [
        "Same group; calls completion as a final step",
        "Similar auto/interactive mode behavior with follow-up choice"
      ]
    },
    {
      "slash": "/workflow:session:solidify",
      "file_path": ".claude/commands/workflow/session/solidify.md",
      "score": 74,
      "why": [
        "Directly adjacent follow-up to completion (capture learnings)",
        "Provides patterns for optional post-archive prompting"
      ]
    },
    {
      "slash": "/workflow:clean",
      "file_path": ".claude/commands/workflow/clean.md",
      "score": 63,
      "why": [
        "Touches workflow folder hygiene and session lifecycle references",
        "Contains safety and recovery patterns for destructive operations"
      ]
    },
    {
      "slash": "/workflow:review",
      "file_path": ".claude/commands/workflow/review.md",
      "score": 58,
      "why": [
        "Adjacent phase in the common workflow chain before completion",
        "Contains patterns for next-step selection and session state expectations"
      ]
    }
  ],
  "selected": {
    "slash": "/workflow:session:complete",
    "file_path": ".claude/commands/workflow/session/complete.md",
    "reason": "Closest direct match (same intent, phases, artifacts, and args)."
  }
}

apply_patch(auto_approved=true) exited 0 in 117ms:
Success. Updated the following files:
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
A .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..dec45c745884eec87fbb4a3707eb7987be1aaeab
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
@@ -0,0 +1,25 @@
+# Fix Plan: workflow:complete
+
+## Scope: Docs (P0)
+
+- Create `.claude/commands/workflow/complete.md`.
+- Keep it thin: explicitly delegate to `/workflow:session:complete` and forward args `[-y|--yes] [--detailed]`.
+- Include core sections: Overview, Usage, Inputs, Outputs/Artifacts, Execution Process (high level), Error Handling, Examples.
+
+## Scope: Index/Discovery (P1)
+
+- Add alias entry for `/workflow:complete` in `.claude/skills/ccw-help/command.json`.
+- If required by the help system, regenerate derived indexes under `.claude/skills/ccw-help/index/`.
+- Optional: switch dashboard help flow node label from `/workflow:session:complete` to `/workflow:complete` in `ccw/src/templates/dashboard-js/views/help.js`.
+
+## Scope: Validation (P0)
+
+- Run deterministic evidence verification:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`
+
+## Verify Steps (No-Guess)
+
+- Confirm whether `.claude/commands/workflow/complete.md` should be new (alias) or a rename of the session command.
+- Confirm whether UI/help should prefer the alias (search for literal `'/workflow:session:complete'` references under `ccw/src/`).
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..2ef02974bed12167d3c1b9be3e7cc306bb16df53
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
@@ -0,0 +1,52 @@
+# Gap Report: workflow:complete
+
+## Reference
+
+- Selected reference: /workflow:session:complete (`.claude/commands/workflow/session/complete.md`)
+
+## P0 Gaps (Must Fix)
+
+- Decide whether `/workflow:complete` is a pure alias (recommended) or a duplicate of the full completion procedure. If alias, the doc must explicitly delegate to `/workflow:session:complete` and avoid duplicating long bash blocks.
+- Confirm allowed-tools for the alias doc are consistent with CCW conventions for workflow commands (at minimum, must not omit tools needed by the described behavior).
+- Ensure all key implementation pointers are evidence-based (Existing vs Planned) with dual-source evidence (docs + `ccw/src/**` anchors) and pass deterministic verification.
+
+## P1 Gaps (Should Fix)
+
+- Update discovery surfaces so users find `/workflow:complete`:
+  - command registry/index (ccw-help)
+  - dashboard help/flow graph (if it should prefer the alias)
+  - command reference docs (if present)
+- Clarify resume semantics: how `.archiving` marker is used to allow safe retry after failure.
+
+## P2 Gaps (Optional)
+
+- Add a short "Quick Reference" section in the alias doc with the minimal invocations + expected outputs.
+- If `--detailed` is supported, define what additional details are emitted (extra manifest fields vs extra console output).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ARCHIVE_BASE = '.workflow/archives'; | `Test-Path .claude/commands/workflow/complete.md` | new alias command doc |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md` | oracle reference |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path ccw/src/tools/session-manager.ts` | implementation surface for session archive |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js` | may need UI label switch to `/workflow:complete` |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | add alias entry (and regenerate derived indexes if required) |
+
+## Implementation Hints (Tooling/Server)
+
+- `ccw/src/tools/session-manager.ts` already defines workflow session locations (`.workflow/active`, `.workflow/archives`) and includes an archive operation; prefer reusing it if/when the completion flow is moved from doc-only to tool-backed execution.
+
+## Proposed Fix Plan (Minimal)
+
+1) Docs (P0)
+   - Create `.claude/commands/workflow/complete.md` with CCW frontmatter + core sections.
+   - State explicitly: delegates to `/workflow:session:complete` and forwards `[-y|--yes] [--detailed]` args.
+
+2) Indexing / Discovery (P1)
+   - Add `/workflow:complete` to `.claude/skills/ccw-help/command.json` (and any derived index JSONs, if this repo requires regeneration).
+   - Decide whether `ccw/src/templates/dashboard-js/views/help.js` should display `/workflow:complete` instead of `/workflow:session:complete`.
+
+3) Validation (P0)
+   - Run evidence gate on the updated doc + gap report outputs.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..475f58d9fd82cc5789a3481dfef63fb1fc7f25c8
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,38 @@
+# Agent Outline: workflow:complete
+
+## Purpose
+
+Implement and/or evolve the slash command `/workflow:complete` as a thin alias for session completion, aligned with existing CCW workflow session lifecycle behavior.
+
+## Execution Model
+
+- Default: incremental, testable changes (docs + indexes first)
+- Prefer reuse over duplication: delegate to `/workflow:session:complete` instead of copying large scripts
+- Use repo searches (ACE-tool / rg) to confirm exact existing paths and anchors before marking anything `Existing`
+
+## State & Artifacts
+
+- Workflow state:
+  - Active sessions: `.workflow/active/`
+  - Archives: `.workflow/archives/`
+- Required outputs:
+  - New command doc: `.claude/commands/workflow/complete.md`
+  - Any index/registry updates that surface the new alias (help + command indexes)
+
+## Tooling
+
+- Allowed tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+- Non-negotiables:
+  - no unrelated changes
+  - keep pointers evidence-based (Existing vs Planned + dual-source evidence)
+
+## Validation Strategy
+
+- P0 gates:
+  - frontmatter completeness + core sections present
+  - allowed-tools is plausible for described behavior (or explicitly delegates)
+  - no broken artifact references
+  - evidence tables pass deterministic verification
+- Deterministic check:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<generated md>`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c575a33c3ec2425876dc2b4ce4f66962eb9238a9
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,108 @@
+---
+name: complete
+description: Mark active workflow session as complete (archive it, update manifest, remove active flag).
+argument-hint: "[-y|--yes] [--detailed]"
+allowed-tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+group: workflow
+---
+
+# Complete Workflow Session (/workflow:complete)
+
+## Overview
+
+- Goal: Close out the active workflow session safely and leave an archived record + updated manifest.
+- Command: `/workflow:complete`
+- Relationship: This is a thin, user-friendly alias for `/workflow:session:complete`.
+
+## Usage
+
+```bash
+/workflow:complete [-y|--yes] [--detailed]
+```
+
+## Inputs
+
+- Required inputs:
+  - An active workflow session directory under `.workflow/active/` (typically `WFS-*`).
+- Optional inputs:
+  - `-y` / `--yes`: auto mode (minimize prompts; skip optional follow-ups).
+  - `--detailed`: include more detailed manifest/lesson output (if supported).
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/archives/<SESSION_ID>/` (moved session)
+  - `.workflow/archives/manifest.json` (append archive entry)
+  - `.workflow/project-tech.json` (optional update)
+  - `.workflow/active/<SESSION_ID>/.archiving` (temporary marker; removed on success)
+- Reads:
+  - `.workflow/active/<SESSION_ID>/workflow-session.json`
+  - `.workflow/active/<SESSION_ID>/IMPL_PLAN.md`
+  - `.workflow/active/<SESSION_ID>/.tasks/*.json`
+  - `.workflow/active/<SESSION_ID>/.summaries/*.md`
+  - `.workflow/active/<SESSION_ID>/.review/dimensions/*.json` (optional)
+  - `.workflow/archives/manifest.json` (or initialize as `[]`)
+
+## Implementation Pointers
+
+- Command doc (to create): `.claude/commands/workflow/complete.md`
+- Oracle reference (do not copy verbatim): `.claude/commands/workflow/session/complete.md`
+- Likely code locations:
+  - `ccw/src/tools/session-manager.ts` (session archive + lifecycle helpers)
+  - `ccw/src/templates/dashboard-js/views/help.js` (workflow flow graph lists completion command)
+  - `.claude/skills/ccw-help/command.json` (command registry/index)
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path .claude/commands/workflow/complete.md` | add alias command doc (`/workflow:complete`) |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md`; `rg "^# Complete Workflow Session" .claude/commands/workflow/session/complete.md` | oracle reference for phases/artifacts |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path ccw/src/tools/session-manager.ts`; `rg "function executeArchive" ccw/src/tools/session-manager.ts` | existing implementation surface for archiving sessions |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js`; `rg "label: '/workflow:session:complete'" ccw/src/templates/dashboard-js/views/help.js` | help/UI flow references completion command; may switch to alias |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | registry entry may need add `/workflow:complete` |
+
+## Execution Process
+
+1) Resolve the active workflow session
+   - Locate the active session directory under `.workflow/active/` (expect `WFS-*`).
+   - If none found: stop with a clear error.
+   - If multiple found: ask user to select (unless `--yes`, then pick the most recent deterministically).
+
+2) Create/resume an archiving marker
+   - If `.archiving` marker exists, treat as resume mode.
+   - Otherwise create `.archiving` to mark the process as in-progress.
+
+3) Generate archive metadata (read-only)
+   - Read minimal session metadata from `workflow-session.json` and `IMPL_PLAN.md`.
+   - Compute basic counts from `.tasks/` + `.summaries/` (and optional `.review/`).
+
+4) Archive atomically
+   - Ensure `.workflow/archives/<SESSION_ID>/` exists.
+   - Move session from `.workflow/active/<SESSION_ID>/` to `.workflow/archives/<SESSION_ID>/`.
+   - Update `.workflow/archives/manifest.json`: read (or `[]`), append new archive entry, write.
+   - Remove `.archiving` marker after success.
+
+5) Optional project registry update
+   - If `.workflow/project-tech.json` exists, append a completed feature entry that links back to `<SESSION_ID>`.
+
+6) Post-archive follow-up (always)
+   - If `--yes`: skip optional follow-ups.
+   - Otherwise: ask whether to run the next-step capture (e.g., `/workflow:session:solidify`).
+
+## Error Handling
+
+- No active session found: explain expected location `.workflow/active/WFS-*`.
+- Multiple active sessions: prompt user to select; default deterministically in `--yes` mode.
+- Manifest missing or invalid JSON: initialize as `[]` (or fail with recovery instructions if unrecoverable).
+- Partial failure after marker set: keep `.archiving` and provide resume instructions.
+- Move/rename failure: stop and report the failing path(s); do not remove `.archiving`.
+
+## Examples
+
+```bash
+/workflow:complete
+/workflow:complete --yes
+/workflow:complete --detailed
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..6c36ad25971c8bdd91a1dfb28a6034cf2c379ddd
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
@@ -0,0 +1,60 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:session:complete",
+      "file_path": ".claude/commands/workflow/session/complete.md",
+      "score": 100,
+      "why": [
+        "Same lifecycle action (archive active session, update manifests)",
+        "Same arguments surface ([-y|--yes] [--detailed])",
+        "Directly describes the intended phases + artifacts"
+      ]
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 82,
+      "why": [
+        "Same group; calls completion as a final step",
+        "Similar auto/interactive mode behavior with follow-up choice"
+      ]
+    },
+    {
+      "slash": "/workflow:session:solidify",
+      "file_path": ".claude/commands/workflow/session/solidify.md",
+      "score": 74,
+      "why": [
+        "Directly adjacent follow-up to completion (capture learnings)",
+        "Provides patterns for optional post-archive prompting"
+      ]
+    },
+    {
+      "slash": "/workflow:clean",
+      "file_path": ".claude/commands/workflow/clean.md",
+      "score": 63,
+      "why": [
+        "Touches workflow folder hygiene and session lifecycle references",
+        "Contains safety and recovery patterns for destructive operations"
+      ]
+    },
+    {
+      "slash": "/workflow:review",
+      "file_path": ".claude/commands/workflow/review.md",
+      "score": 58,
+      "why": [
+        "Adjacent phase in the common workflow chain before completion",
+        "Contains patterns for next-step selection and session state expectations"
+      ]
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:session:complete",
+    "file_path": ".claude/commands/workflow/session/complete.md",
+    "reason": "Closest direct match (same intent, phases, artifacts, and args)."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..4ded2982283a8a43933b8b459368f4c04b2f112d
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
@@ -0,0 +1,59 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete",
+    "description": "Mark active workflow session as complete (archive it, update manifest, remove active flag).",
+    "argument_hint": "[-y|--yes] [--detailed]",
+    "allowed_tools": [
+      "Skill(*)",
+      "AskUserQuestion(*)",
+      "Read(*)",
+      "Write(*)",
+      "Bash(*)"
+    ]
+  },
+  "intent": {
+    "type": "manage",
+    "interaction": "single-shot",
+    "primary_user_value": "Close out the active workflow session safely and leave an archived record + updated manifest."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/",
+      ".workflow/active/<WFS-*>/workflow-session.json",
+      ".workflow/active/<WFS-*>/IMPL_PLAN.md",
+      ".workflow/active/<WFS-*>/.tasks/*.json",
+      ".workflow/active/<WFS-*>/.summaries/*.md",
+      ".workflow/active/<WFS-*>/.review/dimensions/*.json (optional)",
+      ".workflow/archives/manifest.json (or initialize as [])",
+      ".workflow/project-tech.json (optional)"
+    ],
+    "writes": [
+      ".workflow/active/<WFS-*>/.archiving (temporary marker; supports resume)",
+      ".workflow/archives/<WFS-*>/ (moved session)",
+      ".workflow/archives/manifest.json (append archive entry)",
+      ".workflow/project-tech.json (optional update)",
+      ".workflow/archives/<WFS-*>/.archiving (removed on success)"
+    ]
+  },
+  "constraints": {
+    "max_rounds": 1,
+    "time_budget_seconds": 300,
+    "must_not": [
+      "Do not delete/move anything outside .workflow/ without explicit user confirmation",
+      "Do not rely on network access",
+      "Do not claim success unless archive move + manifest update complete",
+      "Do not mark pointers as Existing unless verifiable in-repo"
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Frontmatter contains name, description, allowed-tools, group, argument-hint",
+      "Allowed-tools covers described behavior (or delegates via Skill) without unsupported tools",
+      "Core sections present (Overview, Usage, Inputs, Execution Process, Outputs/Artifacts, Error Handling)",
+      "No broken artifact references (paths created by the command or explicitly optional/pre-existing)",
+      "Evidence tables: pointers labeled Existing/Planned with dual-source evidence (docs + ccw/src anchors)"
+    ]
+  }
+}
+

file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..dec45c745884eec87fbb4a3707eb7987be1aaeab
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
@@ -0,0 +1,25 @@
+# Fix Plan: workflow:complete
+
+## Scope: Docs (P0)
+
+- Create `.claude/commands/workflow/complete.md`.
+- Keep it thin: explicitly delegate to `/workflow:session:complete` and forward args `[-y|--yes] [--detailed]`.
+- Include core sections: Overview, Usage, Inputs, Outputs/Artifacts, Execution Process (high level), Error Handling, Examples.
+
+## Scope: Index/Discovery (P1)
+
+- Add alias entry for `/workflow:complete` in `.claude/skills/ccw-help/command.json`.
+- If required by the help system, regenerate derived indexes under `.claude/skills/ccw-help/index/`.
+- Optional: switch dashboard help flow node label from `/workflow:session:complete` to `/workflow:complete` in `ccw/src/templates/dashboard-js/views/help.js`.
+
+## Scope: Validation (P0)
+
+- Run deterministic evidence verification:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`
+
+## Verify Steps (No-Guess)
+
+- Confirm whether `.claude/commands/workflow/complete.md` should be new (alias) or a rename of the session command.
+- Confirm whether UI/help should prefer the alias (search for literal `'/workflow:session:complete'` references under `ccw/src/`).
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..2ef02974bed12167d3c1b9be3e7cc306bb16df53
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
@@ -0,0 +1,52 @@
+# Gap Report: workflow:complete
+
+## Reference
+
+- Selected reference: /workflow:session:complete (`.claude/commands/workflow/session/complete.md`)
+
+## P0 Gaps (Must Fix)
+
+- Decide whether `/workflow:complete` is a pure alias (recommended) or a duplicate of the full completion procedure. If alias, the doc must explicitly delegate to `/workflow:session:complete` and avoid duplicating long bash blocks.
+- Confirm allowed-tools for the alias doc are consistent with CCW conventions for workflow commands (at minimum, must not omit tools needed by the described behavior).
+- Ensure all key implementation pointers are evidence-based (Existing vs Planned) with dual-source evidence (docs + `ccw/src/**` anchors) and pass deterministic verification.
+
+## P1 Gaps (Should Fix)
+
+- Update discovery surfaces so users find `/workflow:complete`:
+  - command registry/index (ccw-help)
+  - dashboard help/flow graph (if it should prefer the alias)
+  - command reference docs (if present)
+- Clarify resume semantics: how `.archiving` marker is used to allow safe retry after failure.
+
+## P2 Gaps (Optional)
+
+- Add a short "Quick Reference" section in the alias doc with the minimal invocations + expected outputs.
+- If `--detailed` is supported, define what additional details are emitted (extra manifest fields vs extra console output).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ARCHIVE_BASE = '.workflow/archives'; | `Test-Path .claude/commands/workflow/complete.md` | new alias command doc |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md` | oracle reference |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path ccw/src/tools/session-manager.ts` | implementation surface for session archive |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js` | may need UI label switch to `/workflow:complete` |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | add alias entry (and regenerate derived indexes if required) |
+
+## Implementation Hints (Tooling/Server)
+
+- `ccw/src/tools/session-manager.ts` already defines workflow session locations (`.workflow/active`, `.workflow/archives`) and includes an archive operation; prefer reusing it if/when the completion flow is moved from doc-only to tool-backed execution.
+
+## Proposed Fix Plan (Minimal)
+
+1) Docs (P0)
+   - Create `.claude/commands/workflow/complete.md` with CCW frontmatter + core sections.
+   - State explicitly: delegates to `/workflow:session:complete` and forwards `[-y|--yes] [--detailed]` args.
+
+2) Indexing / Discovery (P1)
+   - Add `/workflow:complete` to `.claude/skills/ccw-help/command.json` (and any derived index JSONs, if this repo requires regeneration).
+   - Decide whether `ccw/src/templates/dashboard-js/views/help.js` should display `/workflow:complete` instead of `/workflow:session:complete`.
+
+3) Validation (P0)
+   - Run evidence gate on the updated doc + gap report outputs.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..475f58d9fd82cc5789a3481dfef63fb1fc7f25c8
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,38 @@
+# Agent Outline: workflow:complete
+
+## Purpose
+
+Implement and/or evolve the slash command `/workflow:complete` as a thin alias for session completion, aligned with existing CCW workflow session lifecycle behavior.
+
+## Execution Model
+
+- Default: incremental, testable changes (docs + indexes first)
+- Prefer reuse over duplication: delegate to `/workflow:session:complete` instead of copying large scripts
+- Use repo searches (ACE-tool / rg) to confirm exact existing paths and anchors before marking anything `Existing`
+
+## State & Artifacts
+
+- Workflow state:
+  - Active sessions: `.workflow/active/`
+  - Archives: `.workflow/archives/`
+- Required outputs:
+  - New command doc: `.claude/commands/workflow/complete.md`
+  - Any index/registry updates that surface the new alias (help + command indexes)
+
+## Tooling
+
+- Allowed tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+- Non-negotiables:
+  - no unrelated changes
+  - keep pointers evidence-based (Existing vs Planned + dual-source evidence)
+
+## Validation Strategy
+
+- P0 gates:
+  - frontmatter completeness + core sections present
+  - allowed-tools is plausible for described behavior (or explicitly delegates)
+  - no broken artifact references
+  - evidence tables pass deterministic verification
+- Deterministic check:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<generated md>`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c575a33c3ec2425876dc2b4ce4f66962eb9238a9
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,108 @@
+---
+name: complete
+description: Mark active workflow session as complete (archive it, update manifest, remove active flag).
+argument-hint: "[-y|--yes] [--detailed]"
+allowed-tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+group: workflow
+---
+
+# Complete Workflow Session (/workflow:complete)
+
+## Overview
+
+- Goal: Close out the active workflow session safely and leave an archived record + updated manifest.
+- Command: `/workflow:complete`
+- Relationship: This is a thin, user-friendly alias for `/workflow:session:complete`.
+
+## Usage
+
+```bash
+/workflow:complete [-y|--yes] [--detailed]
+```
+
+## Inputs
+
+- Required inputs:
+  - An active workflow session directory under `.workflow/active/` (typically `WFS-*`).
+- Optional inputs:
+  - `-y` / `--yes`: auto mode (minimize prompts; skip optional follow-ups).
+  - `--detailed`: include more detailed manifest/lesson output (if supported).
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/archives/<SESSION_ID>/` (moved session)
+  - `.workflow/archives/manifest.json` (append archive entry)
+  - `.workflow/project-tech.json` (optional update)
+  - `.workflow/active/<SESSION_ID>/.archiving` (temporary marker; removed on success)
+- Reads:
+  - `.workflow/active/<SESSION_ID>/workflow-session.json`
+  - `.workflow/active/<SESSION_ID>/IMPL_PLAN.md`
+  - `.workflow/active/<SESSION_ID>/.tasks/*.json`
+  - `.workflow/active/<SESSION_ID>/.summaries/*.md`
+  - `.workflow/active/<SESSION_ID>/.review/dimensions/*.json` (optional)
+  - `.workflow/archives/manifest.json` (or initialize as `[]`)
+
+## Implementation Pointers
+
+- Command doc (to create): `.claude/commands/workflow/complete.md`
+- Oracle reference (do not copy verbatim): `.claude/commands/workflow/session/complete.md`
+- Likely code locations:
+  - `ccw/src/tools/session-manager.ts` (session archive + lifecycle helpers)
+  - `ccw/src/templates/dashboard-js/views/help.js` (workflow flow graph lists completion command)
+  - `.claude/skills/ccw-help/command.json` (command registry/index)
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path .claude/commands/workflow/complete.md` | add alias command doc (`/workflow:complete`) |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md`; `rg "^# Complete Workflow Session" .claude/commands/workflow/session/complete.md` | oracle reference for phases/artifacts |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path ccw/src/tools/session-manager.ts`; `rg "function executeArchive" ccw/src/tools/session-manager.ts` | existing implementation surface for archiving sessions |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js`; `rg "label: '/workflow:session:complete'" ccw/src/templates/dashboard-js/views/help.js` | help/UI flow references completion command; may switch to alias |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | registry entry may need add `/workflow:complete` |
+
+## Execution Process
+
+1) Resolve the active workflow session
+   - Locate the active session directory under `.workflow/active/` (expect `WFS-*`).
+   - If none found: stop with a clear error.
+   - If multiple found: ask user to select (unless `--yes`, then pick the most recent deterministically).
+
+2) Create/resume an archiving marker
+   - If `.archiving` marker exists, treat as resume mode.
+   - Otherwise create `.archiving` to mark the process as in-progress.
+
+3) Generate archive metadata (read-only)
+   - Read minimal session metadata from `workflow-session.json` and `IMPL_PLAN.md`.
+   - Compute basic counts from `.tasks/` + `.summaries/` (and optional `.review/`).
+
+4) Archive atomically
+   - Ensure `.workflow/archives/<SESSION_ID>/` exists.
+   - Move session from `.workflow/active/<SESSION_ID>/` to `.workflow/archives/<SESSION_ID>/`.
+   - Update `.workflow/archives/manifest.json`: read (or `[]`), append new archive entry, write.
+   - Remove `.archiving` marker after success.
+
+5) Optional project registry update
+   - If `.workflow/project-tech.json` exists, append a completed feature entry that links back to `<SESSION_ID>`.
+
+6) Post-archive follow-up (always)
+   - If `--yes`: skip optional follow-ups.
+   - Otherwise: ask whether to run the next-step capture (e.g., `/workflow:session:solidify`).
+
+## Error Handling
+
+- No active session found: explain expected location `.workflow/active/WFS-*`.
+- Multiple active sessions: prompt user to select; default deterministically in `--yes` mode.
+- Manifest missing or invalid JSON: initialize as `[]` (or fail with recovery instructions if unrecoverable).
+- Partial failure after marker set: keep `.archiving` and provide resume instructions.
+- Move/rename failure: stop and report the failing path(s); do not remove `.archiving`.
+
+## Examples
+
+```bash
+/workflow:complete
+/workflow:complete --yes
+/workflow:complete --detailed
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..6c36ad25971c8bdd91a1dfb28a6034cf2c379ddd
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
@@ -0,0 +1,60 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:session:complete",
+      "file_path": ".claude/commands/workflow/session/complete.md",
+      "score": 100,
+      "why": [
+        "Same lifecycle action (archive active session, update manifests)",
+        "Same arguments surface ([-y|--yes] [--detailed])",
+        "Directly describes the intended phases + artifacts"
+      ]
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 82,
+      "why": [
+        "Same group; calls completion as a final step",
+        "Similar auto/interactive mode behavior with follow-up choice"
+      ]
+    },
+    {
+      "slash": "/workflow:session:solidify",
+      "file_path": ".claude/commands/workflow/session/solidify.md",
+      "score": 74,
+      "why": [
+        "Directly adjacent follow-up to completion (capture learnings)",
+        "Provides patterns for optional post-archive prompting"
+      ]
+    },
+    {
+      "slash": "/workflow:clean",
+      "file_path": ".claude/commands/workflow/clean.md",
+      "score": 63,
+      "why": [
+        "Touches workflow folder hygiene and session lifecycle references",
+        "Contains safety and recovery patterns for destructive operations"
+      ]
+    },
+    {
+      "slash": "/workflow:review",
+      "file_path": ".claude/commands/workflow/review.md",
+      "score": 58,
+      "why": [
+        "Adjacent phase in the common workflow chain before completion",
+        "Contains patterns for next-step selection and session state expectations"
+      ]
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:session:complete",
+    "file_path": ".claude/commands/workflow/session/complete.md",
+    "reason": "Closest direct match (same intent, phases, artifacts, and args)."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..4ded2982283a8a43933b8b459368f4c04b2f112d
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
@@ -0,0 +1,59 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete",
+    "description": "Mark active workflow session as complete (archive it, update manifest, remove active flag).",
+    "argument_hint": "[-y|--yes] [--detailed]",
+    "allowed_tools": [
+      "Skill(*)",
+      "AskUserQuestion(*)",
+      "Read(*)",
+      "Write(*)",
+      "Bash(*)"
+    ]
+  },
+  "intent": {
+    "type": "manage",
+    "interaction": "single-shot",
+    "primary_user_value": "Close out the active workflow session safely and leave an archived record + updated manifest."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/",
+      ".workflow/active/<WFS-*>/workflow-session.json",
+      ".workflow/active/<WFS-*>/IMPL_PLAN.md",
+      ".workflow/active/<WFS-*>/.tasks/*.json",
+      ".workflow/active/<WFS-*>/.summaries/*.md",
+      ".workflow/active/<WFS-*>/.review/dimensions/*.json (optional)",
+      ".workflow/archives/manifest.json (or initialize as [])",
+      ".workflow/project-tech.json (optional)"
+    ],
+    "writes": [
+      ".workflow/active/<WFS-*>/.archiving (temporary marker; supports resume)",
+      ".workflow/archives/<WFS-*>/ (moved session)",
+      ".workflow/archives/manifest.json (append archive entry)",
+      ".workflow/project-tech.json (optional update)",
+      ".workflow/archives/<WFS-*>/.archiving (removed on success)"
+    ]
+  },
+  "constraints": {
+    "max_rounds": 1,
+    "time_budget_seconds": 300,
+    "must_not": [
+      "Do not delete/move anything outside .workflow/ without explicit user confirmation",
+      "Do not rely on network access",
+      "Do not claim success unless archive move + manifest update complete",
+      "Do not mark pointers as Existing unless verifiable in-repo"
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Frontmatter contains name, description, allowed-tools, group, argument-hint",
+      "Allowed-tools covers described behavior (or delegates via Skill) without unsupported tools",
+      "Core sections present (Overview, Usage, Inputs, Execution Process, Outputs/Artifacts, Error Handling)",
+      "No broken artifact references (paths created by the command or explicitly optional/pre-existing)",
+      "Evidence tables: pointers labeled Existing/Planned with dual-source evidence (docs + ccw/src anchors)"
+    ]
+  }
+}
+


thinking
**Running verification processes**

I'm gearing up to run the verification checks on the generated outline and the gap report. Iâ€™ll use a node script for this, executing it through a shell command. My goal is to ensure everything checks out properly. I want to make sure Iâ€™m following the right procedures so that the evidence generated is validated accurately. It's crucial for keeping everything in order! Let's get this done.
exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md' in C:\Project\Claude-Code-Workflow succeeded in 339ms:
OK: evidence verification passed
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..dec45c745884eec87fbb4a3707eb7987be1aaeab
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
@@ -0,0 +1,25 @@
+# Fix Plan: workflow:complete
+
+## Scope: Docs (P0)
+
+- Create `.claude/commands/workflow/complete.md`.
+- Keep it thin: explicitly delegate to `/workflow:session:complete` and forward args `[-y|--yes] [--detailed]`.
+- Include core sections: Overview, Usage, Inputs, Outputs/Artifacts, Execution Process (high level), Error Handling, Examples.
+
+## Scope: Index/Discovery (P1)
+
+- Add alias entry for `/workflow:complete` in `.claude/skills/ccw-help/command.json`.
+- If required by the help system, regenerate derived indexes under `.claude/skills/ccw-help/index/`.
+- Optional: switch dashboard help flow node label from `/workflow:session:complete` to `/workflow:complete` in `ccw/src/templates/dashboard-js/views/help.js`.
+
+## Scope: Validation (P0)
+
+- Run deterministic evidence verification:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`
+
+## Verify Steps (No-Guess)
+
+- Confirm whether `.claude/commands/workflow/complete.md` should be new (alias) or a rename of the session command.
+- Confirm whether UI/help should prefer the alias (search for literal `'/workflow:session:complete'` references under `ccw/src/`).
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..2ef02974bed12167d3c1b9be3e7cc306bb16df53
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
@@ -0,0 +1,52 @@
+# Gap Report: workflow:complete
+
+## Reference
+
+- Selected reference: /workflow:session:complete (`.claude/commands/workflow/session/complete.md`)
+
+## P0 Gaps (Must Fix)
+
+- Decide whether `/workflow:complete` is a pure alias (recommended) or a duplicate of the full completion procedure. If alias, the doc must explicitly delegate to `/workflow:session:complete` and avoid duplicating long bash blocks.
+- Confirm allowed-tools for the alias doc are consistent with CCW conventions for workflow commands (at minimum, must not omit tools needed by the described behavior).
+- Ensure all key implementation pointers are evidence-based (Existing vs Planned) with dual-source evidence (docs + `ccw/src/**` anchors) and pass deterministic verification.
+
+## P1 Gaps (Should Fix)
+
+- Update discovery surfaces so users find `/workflow:complete`:
+  - command registry/index (ccw-help)
+  - dashboard help/flow graph (if it should prefer the alias)
+  - command reference docs (if present)
+- Clarify resume semantics: how `.archiving` marker is used to allow safe retry after failure.
+
+## P2 Gaps (Optional)
+
+- Add a short "Quick Reference" section in the alias doc with the minimal invocations + expected outputs.
+- If `--detailed` is supported, define what additional details are emitted (extra manifest fields vs extra console output).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ARCHIVE_BASE = '.workflow/archives'; | `Test-Path .claude/commands/workflow/complete.md` | new alias command doc |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md` | oracle reference |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path ccw/src/tools/session-manager.ts` | implementation surface for session archive |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js` | may need UI label switch to `/workflow:complete` |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | add alias entry (and regenerate derived indexes if required) |
+
+## Implementation Hints (Tooling/Server)
+
+- `ccw/src/tools/session-manager.ts` already defines workflow session locations (`.workflow/active`, `.workflow/archives`) and includes an archive operation; prefer reusing it if/when the completion flow is moved from doc-only to tool-backed execution.
+
+## Proposed Fix Plan (Minimal)
+
+1) Docs (P0)
+   - Create `.claude/commands/workflow/complete.md` with CCW frontmatter + core sections.
+   - State explicitly: delegates to `/workflow:session:complete` and forwards `[-y|--yes] [--detailed]` args.
+
+2) Indexing / Discovery (P1)
+   - Add `/workflow:complete` to `.claude/skills/ccw-help/command.json` (and any derived index JSONs, if this repo requires regeneration).
+   - Decide whether `ccw/src/templates/dashboard-js/views/help.js` should display `/workflow:complete` instead of `/workflow:session:complete`.
+
+3) Validation (P0)
+   - Run evidence gate on the updated doc + gap report outputs.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..475f58d9fd82cc5789a3481dfef63fb1fc7f25c8
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,38 @@
+# Agent Outline: workflow:complete
+
+## Purpose
+
+Implement and/or evolve the slash command `/workflow:complete` as a thin alias for session completion, aligned with existing CCW workflow session lifecycle behavior.
+
+## Execution Model
+
+- Default: incremental, testable changes (docs + indexes first)
+- Prefer reuse over duplication: delegate to `/workflow:session:complete` instead of copying large scripts
+- Use repo searches (ACE-tool / rg) to confirm exact existing paths and anchors before marking anything `Existing`
+
+## State & Artifacts
+
+- Workflow state:
+  - Active sessions: `.workflow/active/`
+  - Archives: `.workflow/archives/`
+- Required outputs:
+  - New command doc: `.claude/commands/workflow/complete.md`
+  - Any index/registry updates that surface the new alias (help + command indexes)
+
+## Tooling
+
+- Allowed tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+- Non-negotiables:
+  - no unrelated changes
+  - keep pointers evidence-based (Existing vs Planned + dual-source evidence)
+
+## Validation Strategy
+
+- P0 gates:
+  - frontmatter completeness + core sections present
+  - allowed-tools is plausible for described behavior (or explicitly delegates)
+  - no broken artifact references
+  - evidence tables pass deterministic verification
+- Deterministic check:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<generated md>`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c575a33c3ec2425876dc2b4ce4f66962eb9238a9
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,108 @@
+---
+name: complete
+description: Mark active workflow session as complete (archive it, update manifest, remove active flag).
+argument-hint: "[-y|--yes] [--detailed]"
+allowed-tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+group: workflow
+---
+
+# Complete Workflow Session (/workflow:complete)
+
+## Overview
+
+- Goal: Close out the active workflow session safely and leave an archived record + updated manifest.
+- Command: `/workflow:complete`
+- Relationship: This is a thin, user-friendly alias for `/workflow:session:complete`.
+
+## Usage
+
+```bash
+/workflow:complete [-y|--yes] [--detailed]
+```
+
+## Inputs
+
+- Required inputs:
+  - An active workflow session directory under `.workflow/active/` (typically `WFS-*`).
+- Optional inputs:
+  - `-y` / `--yes`: auto mode (minimize prompts; skip optional follow-ups).
+  - `--detailed`: include more detailed manifest/lesson output (if supported).
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/archives/<SESSION_ID>/` (moved session)
+  - `.workflow/archives/manifest.json` (append archive entry)
+  - `.workflow/project-tech.json` (optional update)
+  - `.workflow/active/<SESSION_ID>/.archiving` (temporary marker; removed on success)
+- Reads:
+  - `.workflow/active/<SESSION_ID>/workflow-session.json`
+  - `.workflow/active/<SESSION_ID>/IMPL_PLAN.md`
+  - `.workflow/active/<SESSION_ID>/.tasks/*.json`
+  - `.workflow/active/<SESSION_ID>/.summaries/*.md`
+  - `.workflow/active/<SESSION_ID>/.review/dimensions/*.json` (optional)
+  - `.workflow/archives/manifest.json` (or initialize as `[]`)
+
+## Implementation Pointers
+
+- Command doc (to create): `.claude/commands/workflow/complete.md`
+- Oracle reference (do not copy verbatim): `.claude/commands/workflow/session/complete.md`
+- Likely code locations:
+  - `ccw/src/tools/session-manager.ts` (session archive + lifecycle helpers)
+  - `ccw/src/templates/dashboard-js/views/help.js` (workflow flow graph lists completion command)
+  - `.claude/skills/ccw-help/command.json` (command registry/index)
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path .claude/commands/workflow/complete.md` | add alias command doc (`/workflow:complete`) |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md`; `rg "^# Complete Workflow Session" .claude/commands/workflow/session/complete.md` | oracle reference for phases/artifacts |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path ccw/src/tools/session-manager.ts`; `rg "function executeArchive" ccw/src/tools/session-manager.ts` | existing implementation surface for archiving sessions |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js`; `rg "label: '/workflow:session:complete'" ccw/src/templates/dashboard-js/views/help.js` | help/UI flow references completion command; may switch to alias |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | registry entry may need add `/workflow:complete` |
+
+## Execution Process
+
+1) Resolve the active workflow session
+   - Locate the active session directory under `.workflow/active/` (expect `WFS-*`).
+   - If none found: stop with a clear error.
+   - If multiple found: ask user to select (unless `--yes`, then pick the most recent deterministically).
+
+2) Create/resume an archiving marker
+   - If `.archiving` marker exists, treat as resume mode.
+   - Otherwise create `.archiving` to mark the process as in-progress.
+
+3) Generate archive metadata (read-only)
+   - Read minimal session metadata from `workflow-session.json` and `IMPL_PLAN.md`.
+   - Compute basic counts from `.tasks/` + `.summaries/` (and optional `.review/`).
+
+4) Archive atomically
+   - Ensure `.workflow/archives/<SESSION_ID>/` exists.
+   - Move session from `.workflow/active/<SESSION_ID>/` to `.workflow/archives/<SESSION_ID>/`.
+   - Update `.workflow/archives/manifest.json`: read (or `[]`), append new archive entry, write.
+   - Remove `.archiving` marker after success.
+
+5) Optional project registry update
+   - If `.workflow/project-tech.json` exists, append a completed feature entry that links back to `<SESSION_ID>`.
+
+6) Post-archive follow-up (always)
+   - If `--yes`: skip optional follow-ups.
+   - Otherwise: ask whether to run the next-step capture (e.g., `/workflow:session:solidify`).
+
+## Error Handling
+
+- No active session found: explain expected location `.workflow/active/WFS-*`.
+- Multiple active sessions: prompt user to select; default deterministically in `--yes` mode.
+- Manifest missing or invalid JSON: initialize as `[]` (or fail with recovery instructions if unrecoverable).
+- Partial failure after marker set: keep `.archiving` and provide resume instructions.
+- Move/rename failure: stop and report the failing path(s); do not remove `.archiving`.
+
+## Examples
+
+```bash
+/workflow:complete
+/workflow:complete --yes
+/workflow:complete --detailed
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..6c36ad25971c8bdd91a1dfb28a6034cf2c379ddd
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
@@ -0,0 +1,60 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:session:complete",
+      "file_path": ".claude/commands/workflow/session/complete.md",
+      "score": 100,
+      "why": [
+        "Same lifecycle action (archive active session, update manifests)",
+        "Same arguments surface ([-y|--yes] [--detailed])",
+        "Directly describes the intended phases + artifacts"
+      ]
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 82,
+      "why": [
+        "Same group; calls completion as a final step",
+        "Similar auto/interactive mode behavior with follow-up choice"
+      ]
+    },
+    {
+      "slash": "/workflow:session:solidify",
+      "file_path": ".claude/commands/workflow/session/solidify.md",
+      "score": 74,
+      "why": [
+        "Directly adjacent follow-up to completion (capture learnings)",
+        "Provides patterns for optional post-archive prompting"
+      ]
+    },
+    {
+      "slash": "/workflow:clean",
+      "file_path": ".claude/commands/workflow/clean.md",
+      "score": 63,
+      "why": [
+        "Touches workflow folder hygiene and session lifecycle references",
+        "Contains safety and recovery patterns for destructive operations"
+      ]
+    },
+    {
+      "slash": "/workflow:review",
+      "file_path": ".claude/commands/workflow/review.md",
+      "score": 58,
+      "why": [
+        "Adjacent phase in the common workflow chain before completion",
+        "Contains patterns for next-step selection and session state expectations"
+      ]
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:session:complete",
+    "file_path": ".claude/commands/workflow/session/complete.md",
+    "reason": "Closest direct match (same intent, phases, artifacts, and args)."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..4ded2982283a8a43933b8b459368f4c04b2f112d
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
@@ -0,0 +1,59 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete",
+    "description": "Mark active workflow session as complete (archive it, update manifest, remove active flag).",
+    "argument_hint": "[-y|--yes] [--detailed]",
+    "allowed_tools": [
+      "Skill(*)",
+      "AskUserQuestion(*)",
+      "Read(*)",
+      "Write(*)",
+      "Bash(*)"
+    ]
+  },
+  "intent": {
+    "type": "manage",
+    "interaction": "single-shot",
+    "primary_user_value": "Close out the active workflow session safely and leave an archived record + updated manifest."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/",
+      ".workflow/active/<WFS-*>/workflow-session.json",
+      ".workflow/active/<WFS-*>/IMPL_PLAN.md",
+      ".workflow/active/<WFS-*>/.tasks/*.json",
+      ".workflow/active/<WFS-*>/.summaries/*.md",
+      ".workflow/active/<WFS-*>/.review/dimensions/*.json (optional)",
+      ".workflow/archives/manifest.json (or initialize as [])",
+      ".workflow/project-tech.json (optional)"
+    ],
+    "writes": [
+      ".workflow/active/<WFS-*>/.archiving (temporary marker; supports resume)",
+      ".workflow/archives/<WFS-*>/ (moved session)",
+      ".workflow/archives/manifest.json (append archive entry)",
+      ".workflow/project-tech.json (optional update)",
+      ".workflow/archives/<WFS-*>/.archiving (removed on success)"
+    ]
+  },
+  "constraints": {
+    "max_rounds": 1,
+    "time_budget_seconds": 300,
+    "must_not": [
+      "Do not delete/move anything outside .workflow/ without explicit user confirmation",
+      "Do not rely on network access",
+      "Do not claim success unless archive move + manifest update complete",
+      "Do not mark pointers as Existing unless verifiable in-repo"
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Frontmatter contains name, description, allowed-tools, group, argument-hint",
+      "Allowed-tools covers described behavior (or delegates via Skill) without unsupported tools",
+      "Core sections present (Overview, Usage, Inputs, Execution Process, Outputs/Artifacts, Error Handling)",
+      "No broken artifact references (paths created by the command or explicitly optional/pre-existing)",
+      "Evidence tables: pointers labeled Existing/Planned with dual-source evidence (docs + ccw/src anchors)"
+    ]
+  }
+}
+

exec
"C:\\Program Files\\PowerShell\\7\\pwsh.exe" -Command '[Console]::InputEncoding  = [Text.UTF8Encoding]::new($false)
[Console]::OutputEncoding = [Text.UTF8Encoding]::new($false)
chcp 65001 > $null

Get-ChildItem .workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs | Select-Object Name,Length' in C:\Project\Claude-Code-Workflow succeeded in 331ms:

[32;1mName                      [0m[32;1m Length[0m
[32;1m----                      [0m [32;1m------[0m
fix-plan.md                  1477
gap-report.md                4135
generated-agent-outline.md   1389
generated-slash-outline.md   6073
references.json              1854
spec.json                    2283

file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..dec45c745884eec87fbb4a3707eb7987be1aaeab
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
@@ -0,0 +1,25 @@
+# Fix Plan: workflow:complete
+
+## Scope: Docs (P0)
+
+- Create `.claude/commands/workflow/complete.md`.
+- Keep it thin: explicitly delegate to `/workflow:session:complete` and forward args `[-y|--yes] [--detailed]`.
+- Include core sections: Overview, Usage, Inputs, Outputs/Artifacts, Execution Process (high level), Error Handling, Examples.
+
+## Scope: Index/Discovery (P1)
+
+- Add alias entry for `/workflow:complete` in `.claude/skills/ccw-help/command.json`.
+- If required by the help system, regenerate derived indexes under `.claude/skills/ccw-help/index/`.
+- Optional: switch dashboard help flow node label from `/workflow:session:complete` to `/workflow:complete` in `ccw/src/templates/dashboard-js/views/help.js`.
+
+## Scope: Validation (P0)
+
+- Run deterministic evidence verification:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`
+
+## Verify Steps (No-Guess)
+
+- Confirm whether `.claude/commands/workflow/complete.md` should be new (alias) or a rename of the session command.
+- Confirm whether UI/help should prefer the alias (search for literal `'/workflow:session:complete'` references under `ccw/src/`).
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..2ef02974bed12167d3c1b9be3e7cc306bb16df53
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
@@ -0,0 +1,52 @@
+# Gap Report: workflow:complete
+
+## Reference
+
+- Selected reference: /workflow:session:complete (`.claude/commands/workflow/session/complete.md`)
+
+## P0 Gaps (Must Fix)
+
+- Decide whether `/workflow:complete` is a pure alias (recommended) or a duplicate of the full completion procedure. If alias, the doc must explicitly delegate to `/workflow:session:complete` and avoid duplicating long bash blocks.
+- Confirm allowed-tools for the alias doc are consistent with CCW conventions for workflow commands (at minimum, must not omit tools needed by the described behavior).
+- Ensure all key implementation pointers are evidence-based (Existing vs Planned) with dual-source evidence (docs + `ccw/src/**` anchors) and pass deterministic verification.
+
+## P1 Gaps (Should Fix)
+
+- Update discovery surfaces so users find `/workflow:complete`:
+  - command registry/index (ccw-help)
+  - dashboard help/flow graph (if it should prefer the alias)
+  - command reference docs (if present)
+- Clarify resume semantics: how `.archiving` marker is used to allow safe retry after failure.
+
+## P2 Gaps (Optional)
+
+- Add a short "Quick Reference" section in the alias doc with the minimal invocations + expected outputs.
+- If `--detailed` is supported, define what additional details are emitted (extra manifest fields vs extra console output).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ARCHIVE_BASE = '.workflow/archives'; | `Test-Path .claude/commands/workflow/complete.md` | new alias command doc |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md` | oracle reference |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path ccw/src/tools/session-manager.ts` | implementation surface for session archive |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js` | may need UI label switch to `/workflow:complete` |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | add alias entry (and regenerate derived indexes if required) |
+
+## Implementation Hints (Tooling/Server)
+
+- `ccw/src/tools/session-manager.ts` already defines workflow session locations (`.workflow/active`, `.workflow/archives`) and includes an archive operation; prefer reusing it if/when the completion flow is moved from doc-only to tool-backed execution.
+
+## Proposed Fix Plan (Minimal)
+
+1) Docs (P0)
+   - Create `.claude/commands/workflow/complete.md` with CCW frontmatter + core sections.
+   - State explicitly: delegates to `/workflow:session:complete` and forwards `[-y|--yes] [--detailed]` args.
+
+2) Indexing / Discovery (P1)
+   - Add `/workflow:complete` to `.claude/skills/ccw-help/command.json` (and any derived index JSONs, if this repo requires regeneration).
+   - Decide whether `ccw/src/templates/dashboard-js/views/help.js` should display `/workflow:complete` instead of `/workflow:session:complete`.
+
+3) Validation (P0)
+   - Run evidence gate on the updated doc + gap report outputs.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..475f58d9fd82cc5789a3481dfef63fb1fc7f25c8
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,38 @@
+# Agent Outline: workflow:complete
+
+## Purpose
+
+Implement and/or evolve the slash command `/workflow:complete` as a thin alias for session completion, aligned with existing CCW workflow session lifecycle behavior.
+
+## Execution Model
+
+- Default: incremental, testable changes (docs + indexes first)
+- Prefer reuse over duplication: delegate to `/workflow:session:complete` instead of copying large scripts
+- Use repo searches (ACE-tool / rg) to confirm exact existing paths and anchors before marking anything `Existing`
+
+## State & Artifacts
+
+- Workflow state:
+  - Active sessions: `.workflow/active/`
+  - Archives: `.workflow/archives/`
+- Required outputs:
+  - New command doc: `.claude/commands/workflow/complete.md`
+  - Any index/registry updates that surface the new alias (help + command indexes)
+
+## Tooling
+
+- Allowed tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+- Non-negotiables:
+  - no unrelated changes
+  - keep pointers evidence-based (Existing vs Planned + dual-source evidence)
+
+## Validation Strategy
+
+- P0 gates:
+  - frontmatter completeness + core sections present
+  - allowed-tools is plausible for described behavior (or explicitly delegates)
+  - no broken artifact references
+  - evidence tables pass deterministic verification
+- Deterministic check:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<generated md>`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c575a33c3ec2425876dc2b4ce4f66962eb9238a9
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,108 @@
+---
+name: complete
+description: Mark active workflow session as complete (archive it, update manifest, remove active flag).
+argument-hint: "[-y|--yes] [--detailed]"
+allowed-tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+group: workflow
+---
+
+# Complete Workflow Session (/workflow:complete)
+
+## Overview
+
+- Goal: Close out the active workflow session safely and leave an archived record + updated manifest.
+- Command: `/workflow:complete`
+- Relationship: This is a thin, user-friendly alias for `/workflow:session:complete`.
+
+## Usage
+
+```bash
+/workflow:complete [-y|--yes] [--detailed]
+```
+
+## Inputs
+
+- Required inputs:
+  - An active workflow session directory under `.workflow/active/` (typically `WFS-*`).
+- Optional inputs:
+  - `-y` / `--yes`: auto mode (minimize prompts; skip optional follow-ups).
+  - `--detailed`: include more detailed manifest/lesson output (if supported).
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/archives/<SESSION_ID>/` (moved session)
+  - `.workflow/archives/manifest.json` (append archive entry)
+  - `.workflow/project-tech.json` (optional update)
+  - `.workflow/active/<SESSION_ID>/.archiving` (temporary marker; removed on success)
+- Reads:
+  - `.workflow/active/<SESSION_ID>/workflow-session.json`
+  - `.workflow/active/<SESSION_ID>/IMPL_PLAN.md`
+  - `.workflow/active/<SESSION_ID>/.tasks/*.json`
+  - `.workflow/active/<SESSION_ID>/.summaries/*.md`
+  - `.workflow/active/<SESSION_ID>/.review/dimensions/*.json` (optional)
+  - `.workflow/archives/manifest.json` (or initialize as `[]`)
+
+## Implementation Pointers
+
+- Command doc (to create): `.claude/commands/workflow/complete.md`
+- Oracle reference (do not copy verbatim): `.claude/commands/workflow/session/complete.md`
+- Likely code locations:
+  - `ccw/src/tools/session-manager.ts` (session archive + lifecycle helpers)
+  - `ccw/src/templates/dashboard-js/views/help.js` (workflow flow graph lists completion command)
+  - `.claude/skills/ccw-help/command.json` (command registry/index)
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path .claude/commands/workflow/complete.md` | add alias command doc (`/workflow:complete`) |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md`; `rg "^# Complete Workflow Session" .claude/commands/workflow/session/complete.md` | oracle reference for phases/artifacts |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path ccw/src/tools/session-manager.ts`; `rg "function executeArchive" ccw/src/tools/session-manager.ts` | existing implementation surface for archiving sessions |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js`; `rg "label: '/workflow:session:complete'" ccw/src/templates/dashboard-js/views/help.js` | help/UI flow references completion command; may switch to alias |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | registry entry may need add `/workflow:complete` |
+
+## Execution Process
+
+1) Resolve the active workflow session
+   - Locate the active session directory under `.workflow/active/` (expect `WFS-*`).
+   - If none found: stop with a clear error.
+   - If multiple found: ask user to select (unless `--yes`, then pick the most recent deterministically).
+
+2) Create/resume an archiving marker
+   - If `.archiving` marker exists, treat as resume mode.
+   - Otherwise create `.archiving` to mark the process as in-progress.
+
+3) Generate archive metadata (read-only)
+   - Read minimal session metadata from `workflow-session.json` and `IMPL_PLAN.md`.
+   - Compute basic counts from `.tasks/` + `.summaries/` (and optional `.review/`).
+
+4) Archive atomically
+   - Ensure `.workflow/archives/<SESSION_ID>/` exists.
+   - Move session from `.workflow/active/<SESSION_ID>/` to `.workflow/archives/<SESSION_ID>/`.
+   - Update `.workflow/archives/manifest.json`: read (or `[]`), append new archive entry, write.
+   - Remove `.archiving` marker after success.
+
+5) Optional project registry update
+   - If `.workflow/project-tech.json` exists, append a completed feature entry that links back to `<SESSION_ID>`.
+
+6) Post-archive follow-up (always)
+   - If `--yes`: skip optional follow-ups.
+   - Otherwise: ask whether to run the next-step capture (e.g., `/workflow:session:solidify`).
+
+## Error Handling
+
+- No active session found: explain expected location `.workflow/active/WFS-*`.
+- Multiple active sessions: prompt user to select; default deterministically in `--yes` mode.
+- Manifest missing or invalid JSON: initialize as `[]` (or fail with recovery instructions if unrecoverable).
+- Partial failure after marker set: keep `.archiving` and provide resume instructions.
+- Move/rename failure: stop and report the failing path(s); do not remove `.archiving`.
+
+## Examples
+
+```bash
+/workflow:complete
+/workflow:complete --yes
+/workflow:complete --detailed
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..6c36ad25971c8bdd91a1dfb28a6034cf2c379ddd
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
@@ -0,0 +1,60 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:session:complete",
+      "file_path": ".claude/commands/workflow/session/complete.md",
+      "score": 100,
+      "why": [
+        "Same lifecycle action (archive active session, update manifests)",
+        "Same arguments surface ([-y|--yes] [--detailed])",
+        "Directly describes the intended phases + artifacts"
+      ]
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 82,
+      "why": [
+        "Same group; calls completion as a final step",
+        "Similar auto/interactive mode behavior with follow-up choice"
+      ]
+    },
+    {
+      "slash": "/workflow:session:solidify",
+      "file_path": ".claude/commands/workflow/session/solidify.md",
+      "score": 74,
+      "why": [
+        "Directly adjacent follow-up to completion (capture learnings)",
+        "Provides patterns for optional post-archive prompting"
+      ]
+    },
+    {
+      "slash": "/workflow:clean",
+      "file_path": ".claude/commands/workflow/clean.md",
+      "score": 63,
+      "why": [
+        "Touches workflow folder hygiene and session lifecycle references",
+        "Contains safety and recovery patterns for destructive operations"
+      ]
+    },
+    {
+      "slash": "/workflow:review",
+      "file_path": ".claude/commands/workflow/review.md",
+      "score": 58,
+      "why": [
+        "Adjacent phase in the common workflow chain before completion",
+        "Contains patterns for next-step selection and session state expectations"
+      ]
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:session:complete",
+    "file_path": ".claude/commands/workflow/session/complete.md",
+    "reason": "Closest direct match (same intent, phases, artifacts, and args)."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..4ded2982283a8a43933b8b459368f4c04b2f112d
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
@@ -0,0 +1,59 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete",
+    "description": "Mark active workflow session as complete (archive it, update manifest, remove active flag).",
+    "argument_hint": "[-y|--yes] [--detailed]",
+    "allowed_tools": [
+      "Skill(*)",
+      "AskUserQuestion(*)",
+      "Read(*)",
+      "Write(*)",
+      "Bash(*)"
+    ]
+  },
+  "intent": {
+    "type": "manage",
+    "interaction": "single-shot",
+    "primary_user_value": "Close out the active workflow session safely and leave an archived record + updated manifest."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/",
+      ".workflow/active/<WFS-*>/workflow-session.json",
+      ".workflow/active/<WFS-*>/IMPL_PLAN.md",
+      ".workflow/active/<WFS-*>/.tasks/*.json",
+      ".workflow/active/<WFS-*>/.summaries/*.md",
+      ".workflow/active/<WFS-*>/.review/dimensions/*.json (optional)",
+      ".workflow/archives/manifest.json (or initialize as [])",
+      ".workflow/project-tech.json (optional)"
+    ],
+    "writes": [
+      ".workflow/active/<WFS-*>/.archiving (temporary marker; supports resume)",
+      ".workflow/archives/<WFS-*>/ (moved session)",
+      ".workflow/archives/manifest.json (append archive entry)",
+      ".workflow/project-tech.json (optional update)",
+      ".workflow/archives/<WFS-*>/.archiving (removed on success)"
+    ]
+  },
+  "constraints": {
+    "max_rounds": 1,
+    "time_budget_seconds": 300,
+    "must_not": [
+      "Do not delete/move anything outside .workflow/ without explicit user confirmation",
+      "Do not rely on network access",
+      "Do not claim success unless archive move + manifest update complete",
+      "Do not mark pointers as Existing unless verifiable in-repo"
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Frontmatter contains name, description, allowed-tools, group, argument-hint",
+      "Allowed-tools covers described behavior (or delegates via Skill) without unsupported tools",
+      "Core sections present (Overview, Usage, Inputs, Execution Process, Outputs/Artifacts, Error Handling)",
+      "No broken artifact references (paths created by the command or explicitly optional/pre-existing)",
+      "Evidence tables: pointers labeled Existing/Planned with dual-source evidence (docs + ccw/src anchors)"
+    ]
+  }
+}
+


thinking
**Finalizing command identity**

I need to make sure that the command identity is correct: this includes the group workflow, complete name, and description as specified. In the outlines, Iâ€™ve included an alias for session completion to keep things consistent. Now, I can deliver the final response. Since it's straightforward, I don't need to use any planning tools here. Everything seems to be in order!
codex
Wrote CMD-049 outputs under `.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/`:

- `spec.json`
- `references.json`
- `generated-slash-outline.md`
- `generated-agent-outline.md`
- `gap-report.md`
- `fix-plan.md`

Evidence gate: `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=...generated-slash-outline.md --file=...gap-report.md` passes (OK).
file update:
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
new file mode 100644
index 0000000000000000000000000000000000000000..dec45c745884eec87fbb4a3707eb7987be1aaeab
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/fix-plan.md
@@ -0,0 +1,25 @@
+# Fix Plan: workflow:complete
+
+## Scope: Docs (P0)
+
+- Create `.claude/commands/workflow/complete.md`.
+- Keep it thin: explicitly delegate to `/workflow:session:complete` and forward args `[-y|--yes] [--detailed]`.
+- Include core sections: Overview, Usage, Inputs, Outputs/Artifacts, Execution Process (high level), Error Handling, Examples.
+
+## Scope: Index/Discovery (P1)
+
+- Add alias entry for `/workflow:complete` in `.claude/skills/ccw-help/command.json`.
+- If required by the help system, regenerate derived indexes under `.claude/skills/ccw-help/index/`.
+- Optional: switch dashboard help flow node label from `/workflow:session:complete` to `/workflow:complete` in `ccw/src/templates/dashboard-js/views/help.js`.
+
+## Scope: Validation (P0)
+
+- Run deterministic evidence verification:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md`
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md`
+
+## Verify Steps (No-Guess)
+
+- Confirm whether `.claude/commands/workflow/complete.md` should be new (alias) or a rename of the session command.
+- Confirm whether UI/help should prefer the alias (search for literal `'/workflow:session:complete'` references under `ccw/src/`).
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
new file mode 100644
index 0000000000000000000000000000000000000000..2ef02974bed12167d3c1b9be3e7cc306bb16df53
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/gap-report.md
@@ -0,0 +1,52 @@
+# Gap Report: workflow:complete
+
+## Reference
+
+- Selected reference: /workflow:session:complete (`.claude/commands/workflow/session/complete.md`)
+
+## P0 Gaps (Must Fix)
+
+- Decide whether `/workflow:complete` is a pure alias (recommended) or a duplicate of the full completion procedure. If alias, the doc must explicitly delegate to `/workflow:session:complete` and avoid duplicating long bash blocks.
+- Confirm allowed-tools for the alias doc are consistent with CCW conventions for workflow commands (at minimum, must not omit tools needed by the described behavior).
+- Ensure all key implementation pointers are evidence-based (Existing vs Planned) with dual-source evidence (docs + `ccw/src/**` anchors) and pass deterministic verification.
+
+## P1 Gaps (Should Fix)
+
+- Update discovery surfaces so users find `/workflow:complete`:
+  - command registry/index (ccw-help)
+  - dashboard help/flow graph (if it should prefer the alias)
+  - command reference docs (if present)
+- Clarify resume semantics: how `.archiving` marker is used to allow safe retry after failure.
+
+## P2 Gaps (Optional)
+
+- Add a short "Quick Reference" section in the alias doc with the minimal invocations + expected outputs.
+- If `--detailed` is supported, define what additional details are emitted (extra manifest fields vs extra console output).
+
+## Implementation Pointers (Evidence)
+
+| Pointer | Status | Evidence | Verify | Notes |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ARCHIVE_BASE = '.workflow/archives'; | `Test-Path .claude/commands/workflow/complete.md` | new alias command doc |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md` | oracle reference |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path ccw/src/tools/session-manager.ts` | implementation surface for session archive |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js` | may need UI label switch to `/workflow:complete` |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | add alias entry (and regenerate derived indexes if required) |
+
+## Implementation Hints (Tooling/Server)
+
+- `ccw/src/tools/session-manager.ts` already defines workflow session locations (`.workflow/active`, `.workflow/archives`) and includes an archive operation; prefer reusing it if/when the completion flow is moved from doc-only to tool-backed execution.
+
+## Proposed Fix Plan (Minimal)
+
+1) Docs (P0)
+   - Create `.claude/commands/workflow/complete.md` with CCW frontmatter + core sections.
+   - State explicitly: delegates to `/workflow:session:complete` and forwards `[-y|--yes] [--detailed]` args.
+
+2) Indexing / Discovery (P1)
+   - Add `/workflow:complete` to `.claude/skills/ccw-help/command.json` (and any derived index JSONs, if this repo requires regeneration).
+   - Decide whether `ccw/src/templates/dashboard-js/views/help.js` should display `/workflow:complete` instead of `/workflow:session:complete`.
+
+3) Validation (P0)
+   - Run evidence gate on the updated doc + gap report outputs.
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..475f58d9fd82cc5789a3481dfef63fb1fc7f25c8
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-agent-outline.md
@@ -0,0 +1,38 @@
+# Agent Outline: workflow:complete
+
+## Purpose
+
+Implement and/or evolve the slash command `/workflow:complete` as a thin alias for session completion, aligned with existing CCW workflow session lifecycle behavior.
+
+## Execution Model
+
+- Default: incremental, testable changes (docs + indexes first)
+- Prefer reuse over duplication: delegate to `/workflow:session:complete` instead of copying large scripts
+- Use repo searches (ACE-tool / rg) to confirm exact existing paths and anchors before marking anything `Existing`
+
+## State & Artifacts
+
+- Workflow state:
+  - Active sessions: `.workflow/active/`
+  - Archives: `.workflow/archives/`
+- Required outputs:
+  - New command doc: `.claude/commands/workflow/complete.md`
+  - Any index/registry updates that surface the new alias (help + command indexes)
+
+## Tooling
+
+- Allowed tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+- Non-negotiables:
+  - no unrelated changes
+  - keep pointers evidence-based (Existing vs Planned + dual-source evidence)
+
+## Validation Strategy
+
+- P0 gates:
+  - frontmatter completeness + core sections present
+  - allowed-tools is plausible for described behavior (or explicitly delegates)
+  - no broken artifact references
+  - evidence tables pass deterministic verification
+- Deterministic check:
+  - `node .codex/skills/slash-command-outliner/scripts/verify-evidence.js --file=<generated md>`
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
new file mode 100644
index 0000000000000000000000000000000000000000..c575a33c3ec2425876dc2b4ce4f66962eb9238a9
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/generated-slash-outline.md
@@ -0,0 +1,108 @@
+---
+name: complete
+description: Mark active workflow session as complete (archive it, update manifest, remove active flag).
+argument-hint: "[-y|--yes] [--detailed]"
+allowed-tools: Skill(*), AskUserQuestion(*), Read(*), Write(*), Bash(*)
+group: workflow
+---
+
+# Complete Workflow Session (/workflow:complete)
+
+## Overview
+
+- Goal: Close out the active workflow session safely and leave an archived record + updated manifest.
+- Command: `/workflow:complete`
+- Relationship: This is a thin, user-friendly alias for `/workflow:session:complete`.
+
+## Usage
+
+```bash
+/workflow:complete [-y|--yes] [--detailed]
+```
+
+## Inputs
+
+- Required inputs:
+  - An active workflow session directory under `.workflow/active/` (typically `WFS-*`).
+- Optional inputs:
+  - `-y` / `--yes`: auto mode (minimize prompts; skip optional follow-ups).
+  - `--detailed`: include more detailed manifest/lesson output (if supported).
+
+## Outputs / Artifacts
+
+- Writes:
+  - `.workflow/archives/<SESSION_ID>/` (moved session)
+  - `.workflow/archives/manifest.json` (append archive entry)
+  - `.workflow/project-tech.json` (optional update)
+  - `.workflow/active/<SESSION_ID>/.archiving` (temporary marker; removed on success)
+- Reads:
+  - `.workflow/active/<SESSION_ID>/workflow-session.json`
+  - `.workflow/active/<SESSION_ID>/IMPL_PLAN.md`
+  - `.workflow/active/<SESSION_ID>/.tasks/*.json`
+  - `.workflow/active/<SESSION_ID>/.summaries/*.md`
+  - `.workflow/active/<SESSION_ID>/.review/dimensions/*.json` (optional)
+  - `.workflow/archives/manifest.json` (or initialize as `[]`)
+
+## Implementation Pointers
+
+- Command doc (to create): `.claude/commands/workflow/complete.md`
+- Oracle reference (do not copy verbatim): `.claude/commands/workflow/session/complete.md`
+- Likely code locations:
+  - `ccw/src/tools/session-manager.ts` (session archive + lifecycle helpers)
+  - `ccw/src/templates/dashboard-js/views/help.js` (workflow flow graph lists completion command)
+  - `.claude/skills/ccw-help/command.json` (command registry/index)
+
+### Evidence (Existing vs Planned)
+
+| Pointer | Status | Evidence (docs + TS) | Verify | Why |
+|---|---|---|---|---|
+| `.claude/commands/workflow/complete.md` | Planned | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / const ACTIVE_BASE = '.workflow/active'; | `Test-Path .claude/commands/workflow/complete.md` | add alias command doc (`/workflow:complete`) |
+| `.claude/commands/workflow/session/complete.md` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path .claude/commands/workflow/session/complete.md`; `rg "^# Complete Workflow Session" .claude/commands/workflow/session/complete.md` | oracle reference for phases/artifacts |
+| `ccw/src/tools/session-manager.ts` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/tools/session-manager.ts` / function executeArchive(params: Params): any { | `Test-Path ccw/src/tools/session-manager.ts`; `rg "function executeArchive" ccw/src/tools/session-manager.ts` | existing implementation surface for archiving sessions |
+| `ccw/src/templates/dashboard-js/views/help.js` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path ccw/src/templates/dashboard-js/views/help.js`; `rg "label: '/workflow:session:complete'" ccw/src/templates/dashboard-js/views/help.js` | help/UI flow references completion command; may switch to alias |
+| `.claude/skills/ccw-help/command.json` | Existing | docs: `.claude/commands/workflow/session/complete.md` / Complete Workflow Session (/workflow:session:complete) ; ts: `ccw/src/templates/dashboard-js/views/help.js` / label: '/workflow:session:complete' | `Test-Path .claude/skills/ccw-help/command.json` | registry entry may need add `/workflow:complete` |
+
+## Execution Process
+
+1) Resolve the active workflow session
+   - Locate the active session directory under `.workflow/active/` (expect `WFS-*`).
+   - If none found: stop with a clear error.
+   - If multiple found: ask user to select (unless `--yes`, then pick the most recent deterministically).
+
+2) Create/resume an archiving marker
+   - If `.archiving` marker exists, treat as resume mode.
+   - Otherwise create `.archiving` to mark the process as in-progress.
+
+3) Generate archive metadata (read-only)
+   - Read minimal session metadata from `workflow-session.json` and `IMPL_PLAN.md`.
+   - Compute basic counts from `.tasks/` + `.summaries/` (and optional `.review/`).
+
+4) Archive atomically
+   - Ensure `.workflow/archives/<SESSION_ID>/` exists.
+   - Move session from `.workflow/active/<SESSION_ID>/` to `.workflow/archives/<SESSION_ID>/`.
+   - Update `.workflow/archives/manifest.json`: read (or `[]`), append new archive entry, write.
+   - Remove `.archiving` marker after success.
+
+5) Optional project registry update
+   - If `.workflow/project-tech.json` exists, append a completed feature entry that links back to `<SESSION_ID>`.
+
+6) Post-archive follow-up (always)
+   - If `--yes`: skip optional follow-ups.
+   - Otherwise: ask whether to run the next-step capture (e.g., `/workflow:session:solidify`).
+
+## Error Handling
+
+- No active session found: explain expected location `.workflow/active/WFS-*`.
+- Multiple active sessions: prompt user to select; default deterministically in `--yes` mode.
+- Manifest missing or invalid JSON: initialize as `[]` (or fail with recovery instructions if unrecoverable).
+- Partial failure after marker set: keep `.archiving` and provide resume instructions.
+- Move/rename failure: stop and report the failing path(s); do not remove `.archiving`.
+
+## Examples
+
+```bash
+/workflow:complete
+/workflow:complete --yes
+/workflow:complete --detailed
+```
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
new file mode 100644
index 0000000000000000000000000000000000000000..6c36ad25971c8bdd91a1dfb28a6034cf2c379ddd
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/references.json
@@ -0,0 +1,60 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete"
+  },
+  "candidates": [
+    {
+      "slash": "/workflow:session:complete",
+      "file_path": ".claude/commands/workflow/session/complete.md",
+      "score": 100,
+      "why": [
+        "Same lifecycle action (archive active session, update manifests)",
+        "Same arguments surface ([-y|--yes] [--detailed])",
+        "Directly describes the intended phases + artifacts"
+      ]
+    },
+    {
+      "slash": "/workflow:execute",
+      "file_path": ".claude/commands/workflow/execute.md",
+      "score": 82,
+      "why": [
+        "Same group; calls completion as a final step",
+        "Similar auto/interactive mode behavior with follow-up choice"
+      ]
+    },
+    {
+      "slash": "/workflow:session:solidify",
+      "file_path": ".claude/commands/workflow/session/solidify.md",
+      "score": 74,
+      "why": [
+        "Directly adjacent follow-up to completion (capture learnings)",
+        "Provides patterns for optional post-archive prompting"
+      ]
+    },
+    {
+      "slash": "/workflow:clean",
+      "file_path": ".claude/commands/workflow/clean.md",
+      "score": 63,
+      "why": [
+        "Touches workflow folder hygiene and session lifecycle references",
+        "Contains safety and recovery patterns for destructive operations"
+      ]
+    },
+    {
+      "slash": "/workflow:review",
+      "file_path": ".claude/commands/workflow/review.md",
+      "score": 58,
+      "why": [
+        "Adjacent phase in the common workflow chain before completion",
+        "Contains patterns for next-step selection and session state expectations"
+      ]
+    }
+  ],
+  "selected": {
+    "slash": "/workflow:session:complete",
+    "file_path": ".claude/commands/workflow/session/complete.md",
+    "reason": "Closest direct match (same intent, phases, artifacts, and args)."
+  }
+}
+
diff --git a/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
new file mode 100644
index 0000000000000000000000000000000000000000..4ded2982283a8a43933b8b459368f4c04b2f112d
--- /dev/null
+++ b/.workflow/.cycle/cycle-auto-20260205T010617-slashcmdoutliner-codex.progress/llm/CMD-049/specs/outputs/spec.json
@@ -0,0 +1,59 @@
+{
+  "command": {
+    "group": "workflow",
+    "name": "complete",
+    "description": "Mark active workflow session as complete (archive it, update manifest, remove active flag).",
+    "argument_hint": "[-y|--yes] [--detailed]",
+    "allowed_tools": [
+      "Skill(*)",
+      "AskUserQuestion(*)",
+      "Read(*)",
+      "Write(*)",
+      "Bash(*)"
+    ]
+  },
+  "intent": {
+    "type": "manage",
+    "interaction": "single-shot",
+    "primary_user_value": "Close out the active workflow session safely and leave an archived record + updated manifest."
+  },
+  "artifacts": {
+    "reads": [
+      ".workflow/active/",
+      ".workflow/active/<WFS-*>/workflow-session.json",
+      ".workflow/active/<WFS-*>/IMPL_PLAN.md",
+      ".workflow/active/<WFS-*>/.tasks/*.json",
+      ".workflow/active/<WFS-*>/.summaries/*.md",
+      ".workflow/active/<WFS-*>/.review/dimensions/*.json (optional)",
+      ".workflow/archives/manifest.json (or initialize as [])",
+      ".workflow/project-tech.json (optional)"
+    ],
+    "writes": [
+      ".workflow/active/<WFS-*>/.archiving (temporary marker; supports resume)",
+      ".workflow/archives/<WFS-*>/ (moved session)",
+      ".workflow/archives/manifest.json (append archive entry)",
+      ".workflow/project-tech.json (optional update)",
+      ".workflow/archives/<WFS-*>/.archiving (removed on success)"
+    ]
+  },
+  "constraints": {
+    "max_rounds": 1,
+    "time_budget_seconds": 300,
+    "must_not": [
+      "Do not delete/move anything outside .workflow/ without explicit user confirmation",
+      "Do not rely on network access",
+      "Do not claim success unless archive move + manifest update complete",
+      "Do not mark pointers as Existing unless verifiable in-repo"
+    ]
+  },
+  "acceptance": {
+    "p0": [
+      "Frontmatter contains name, description, allowed-tools, group, argument-hint",
+      "Allowed-tools covers described behavior (or delegates via Skill) without unsupported tools",
+      "Core sections present (Overview, Usage, Inputs, Execution Process, Outputs/Artifacts, Error Handling)",
+      "No broken artifact references (paths created by the command or explicitly optional/pre-existing)",
+      "Evidence tables: pointers labeled Existing/Planned with dual-source evidence (docs + ccw/src anchors)"
+    ]
+  }
+}
+

tokens used
164,247
