# Requirement (non-leaky): /workflow:debug-with-file

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/debug-with-file.md`

## Command Identity

- group: workflow
- name: debug-with-file
- description: Interactive hypothesis-driven debugging with documented exploration, understanding evolution, and Gemini-assisted correction
- argument-hint: [-y|--yes] \"bug description or error message\"
- allowed-tools: TodoWrite(*), Task(*), AskUserQuestion(*), Read(*), Grep(*), Glob(*), Bash(*), Edit(*), Write(*)

## Structure Hints (Headings Only)

  - Auto Mode
- Workflow Debug-With-File Command (/workflow:debug-with-file)
  - Overview
  - Usage
- Arguments
  - Execution Process
  - Implementation
    - Session Setup & Mode Detection
    - Explore Mode
- Understanding Document
  - Exploration Timeline
    - Iteration 1 - Initial Exploration (${timestamp})
      - Current Understanding
      - Evidence from Code Search
      - Next Steps
  - Current Consolidated Understanding
      - Hypotheses Generated (Gemini-Assisted)
    - Analyze Mode
    - Iteration ${n} - Evidence Analysis (${timestamp})
      - Log Analysis Results
      - Corrected Understanding
      - New Insights
      - Gemini Analysis
      - Root Cause Identified
      - Next Steps
  - Current Consolidated Understanding (Updated)
  - Current Consolidated Understanding
    - What We Know
    - What Was Disproven
    - Current Investigation Focus
    - Remaining Questions
    - Fix & Verification
    - Iteration ${n} - Resolution (${timestamp})
      - Fix Applied
      - Verification Results
      - Lessons Learned
      - Key Insights for Future
  - Session Folder Structure
  - Understanding Document Template
- Understanding Document
  - Exploration Timeline
    - Iteration 1 - Initial Exploration (2025-01-21 10:00)
      - Current Understanding
      - Evidence from Code Search
      - Hypotheses Generated (Gemini-Assisted)
    - Iteration 2 - Evidence Analysis (2025-01-21 10:15)
      - Log Analysis Results
      - Corrected Understanding
      - Gemini Analysis
  - Current Consolidated Understanding
    - What We Know
    - What Was Disproven
    - Current Investigation Focus
    - Remaining Questions
  - Iteration Flow
  - Gemini Integration Points
    - 1. Hypothesis Generation (Explore Mode)
    - 2. Evidence Analysis (Analyze Mode)
    - 3. New Hypothesis Generation (After All Rejected)
  - Error Correction Mechanism
    - Correction Format in understanding.md
      - Corrected Understanding
    - Consolidation Rules
  - Current Consolidated Understanding
  - Current Consolidated Understanding
    - What We Know
    - What Was Disproven
    - Current Investigation Focus
  - Post-Completion Expansion
  - Error Handling
  - Comparison with /workflow:debug
  - Usage Recommendations (Requires User Confirmation)

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
