# Requirement (non-leaky): /workflow:design-sync

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/ui-design/design-sync.md`

## Command Identity

- group: workflow
- name: design-sync
- description: Synchronize finalized design system references to brainstorming artifacts, preparing them for /workflow:plan consumption
- argument-hint: --session <session_id> [--selected-prototypes "<list>"]
- allowed-tools: Read(*), Write(*), Edit(*), TodoWrite(*), Glob(*), Bash(*)

## Structure Hints (Headings Only)

- Design Sync Command
  - Overview
  - Core Philosophy
  - Execution Process
  - Execution Protocol
    - Phase 1: Session & Artifact Validation
- Validate session
- Verify design artifacts in latest design run
- Detect design system structure
- Prototype selection
    - Phase 1.1: Memory Check (Skip if Already Updated)
- Check if role analysis documents contains current design run reference
    - Phase 2: Load Target Artifacts Only
- Load target brainstorming artifacts (files to be updated)
- Optional: Read prototype notes for descriptions (minimal context)
- Note: Do NOT read design-tokens.json, style-guide.md, or prototype HTML. Only verify existence and generate @ references.
    - Phase 3: Update Synthesis Specification
  - UI/UX Guidelines
    - Design System Reference
    - Implementation Requirements
    - Reference Prototypes
    - Design System Assets
- Option 1: Edit existing section
- Option 2: Append if section doesn't exist
    - Phase 4A: Update Relevant Role Analysis Documents
- Always update ui-designer
- Conditionally update other roles
  - Design System Implementation Reference
  - Animation & Interaction Reference
  - Layout Structure Reference
  - Prototype Validation Reference
    - Phase 4B: Create UI Designer Design System Reference
- UI Designer Design System Reference
  - Design System Integration
  - Implementation Guidelines
  - Reference Prototypes
  - Token System
    - Phase 5: Update Context Package
- 1. Read existing package
- 2. Update brainstorm_artifacts (role analyses now contain @ design references)
- 3. Add design_system_references field
- 4. Optional: Add animations and layouts if they exist
- 5. Update metadata
- 6. Write back
    - Phase 6: Completion
  - Output Structure
  - Integration with /workflow:plan
  - Error Handling
  - Validation Checks
  - Key Features
  - Integration Points

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
