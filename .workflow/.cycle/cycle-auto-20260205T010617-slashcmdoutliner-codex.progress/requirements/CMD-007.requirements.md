# Requirement (non-leaky): /cli:codex-review

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/cli/codex-review.md`

## Command Identity

- group: cli
- name: codex-review
- description: Interactive code review using Codex CLI via ccw endpoint with configurable review target, model, and custom instructions
- argument-hint: [--uncommitted|--base <branch>|--commit <sha>] [--model <model>] [--title <title>] [prompt]
- allowed-tools: Bash(*), AskUserQuestion(*), Read(*)

## Structure Hints (Headings Only)

- Codex Review Command (/cli:codex-review)
  - Overview
  - Prompt Template Format
  - EXECUTION INSTRUCTIONS - START HERE
    - Step 1: Parse Arguments
    - Step 2: Interactive Parameter Selection
    - Step 3: Build Prompt and Command
    - Step 4: Execute via CCW CLI
- Base structure
- Variables from user selection
- Build target flag
- Build model flag (only if not default)
- Build title flag (if provided)
- Execute
    - Step 5: Execute and Display Results
  - Quick Usage Examples
    - Direct Execution (No Interaction)
- Review uncommitted changes with default settings
- Review against main branch
- Review specific commit
- Review with custom model
- Review with security focus
- Full options
    - Interactive Mode
- Start interactive selection (guided flow)
  - Focus Area Mapping
  - Error Handling
    - No Changes to Review
    - Invalid Branch
- Show available branches
    - Invalid Commit
- Show recent commits
  - Integration Notes
  - Validation Constraints
- ✓ Valid: prompt only (reviews uncommitted by default)
- ✓ Valid: target flag only (no prompt)
- ✗ Invalid: target flag with prompt (will fail)

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
