# Requirement (non-leaky): /ccw-test

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/ccw-test.md`

## Command Identity

- group: (none)
- name: ccw-test
- description: Test coordinator - analyze testing needs, select test strategy, execute test workflow in main process
- argument-hint: [--mode gen|fix|verify|tdd] [--yes|-y] \"test description\"
- allowed-tools: Skill(*), TodoWrite(*), AskUserQuestion(*), Read(*), Bash(*)

## Structure Hints (Headings Only)

- CCW-Test Command - Test Coordinator
  - Core Concept: Test Units (测试单元)
  - Execution Model
  - 5-Phase Workflow
    - Phase 1: Analyze Testing Needs
      - Mode Detection (Priority Order)
    - Phase 1.5: Testing Clarification (if needed)
    - Phase 2: Select Test Strategy & Build Command Chain
      - Command Chain Mapping
    - Phase 3: User Confirmation
    - Phase 4: Setup TODO Tracking & Status File
    - Phase 5: Execute Test Chain
      - For All Modes (Sequential Execution)
      - For Fix Mode (Auto-Iteration)
      - Error Handling Pattern
      - Test Metrics Update
  - Execution Flow Summary
  - Test Pipeline Examples
  - State Management
    - Dual Tracking System
  - Key Design Principles
  - Usage
- Auto-select mode
- Explicit mode selection
- Custom configuration
- Auto mode (skip confirmations)
  - Mode Selection Decision Tree

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
