# Requirement (non-leaky): /workflow:lite-execute

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/lite-execute.md`

## Command Identity

- group: workflow
- name: lite-execute
- description: Execute tasks based on in-memory plan, prompt description, or file content
- argument-hint: [-y|--yes] [--in-memory] [\"task description\"|file-path]
- allowed-tools: TodoWrite(*), Task(*), Bash(*)

## Structure Hints (Headings Only)

- Workflow Lite-Execute Command (/workflow:lite-execute)
  - Overview
  - Usage
    - Command Syntax
- Flags
- Arguments
  - Input Modes
    - Mode 1: In-Memory Plan
    - Mode 2: Prompt Description
    - Mode 3: File Content
  - Execution Process
  - Detailed Execution Steps
    - Step 1: Initialize Execution Tracking
    - Step 2: Task Grouping & Batch Creation
    - Step 3: Launch Execution
    - Unified Task Prompt Builder
  - ${t.title}
    - Modification Points
    - Why this approach (Medium/High)
    - How to do it
    - Code skeleton (High)
    - Reference
    - Risk mitigations (High)
    - Done when
- 使用统一的 buildExecutionPrompt，切换 tool 和 mode
    - Step 4: Progress Tracking
    - Step 5: Code Review (Optional)
- Method 1: Agent Review (current agent)
- - Read plan.json: ${executionContext.session.artifacts.plan}
- - Apply unified review criteria (see Shared Prompt Template)
- - Report findings directly
- Method 2: Gemini Review (recommended)
- CONTEXT includes: @**/* @${plan.json} [@${exploration.json}]
- Method 3: Qwen Review (alternative)
- Same prompt as Gemini, different execution engine
- Method 4: Codex Review (git-aware) - Two mutually exclusive options:
- Option A: With custom prompt (reviews uncommitted by default)
- Use for complex reviews with specific focus areas
- Option B: Target flag only (no prompt allowed)
- Quick review of uncommitted changes without custom instructions
- ⚠️ IMPORTANT: -p prompt and target flags (--uncommitted/--base/--commit) are MUTUALLY EXCLUSIVE
    - Step 6: Update Development Index
  - Best Practices
  - Error Handling
  - Data Structures
    - executionContext (Input - Mode 1)
    - executionResult (Output)
  - Post-Completion Expansion
- Lookup previous execution
- Resume with new fixed ID for retry

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
