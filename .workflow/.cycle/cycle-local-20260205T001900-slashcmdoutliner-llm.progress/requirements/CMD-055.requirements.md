# Requirement (non-leaky): /workflow:tdd-verify

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/tdd-verify.md`

## Command Identity

- group: workflow
- name: tdd-verify
- description: Verify TDD workflow compliance against Red-Green-Refactor cycles. Generates quality report with coverage analysis and quality gate recommendation. Orchestrates sub-commands for comprehensive validation.
- argument-hint: [optional: --session WFS-session-id]
- allowed-tools: Skill(*), TodoWrite(*), Read(*), Write(*), Bash(*), Glob(*)

## Structure Hints (Headings Only)

- TDD Verification Command (/workflow:tdd-verify)
  - Goal
  - Operating Constraints
  - Coordinator Role
  - Core Responsibilities
  - Execution Process
  - 4-Phase Execution
    - Phase 1: Session Discovery & Validation
- Derive paths
- Check task files exist
- Check summaries exist (optional but recommended for full analysis)
    - Phase 2: Task Chain Structure Validation
- Single-pass JSON extraction using jq
- Load all tasks and extract structured data
- Extract all task IDs
- Extract dependencies for IMPL tasks
- Extract dependencies for REFACTOR tasks
- Extract meta fields
- Output as JSON
    - Phase 3: Coverage & Cycle Analysis
- Check required outputs exist
    - Phase 4: Compliance Report Generation
  - TodoWrite Pattern (Optional)
  - Validation Logic
    - Chain Validation Algorithm
    - Quality Gate Criteria
  - Output Files
  - Error Handling
    - Session Discovery Errors
    - Validation Errors
    - Analysis Errors
  - Integration & Usage
    - Command Chain
    - Basic Usage
- Auto-detect active session
- Specify session
    - When to Use
  - TDD Compliance Report Structure
- TDD Compliance Report - {Session ID}
  - Executive Summary
    - Quality Gate Decision
    - Recommendation
  - Chain Analysis
    - Feature 1: {Feature Name}
    - Feature 2: {Feature Name}
    - Chain Validation Summary
  - Test Coverage Analysis
    - Coverage Metrics
    - Coverage Gaps
  - TDD Cycle Validation
    - Red Phase (Write Failing Test)
    - Green Phase (Make Test Pass)
    - Refactor Phase (Improve Quality)
  - Best Practices Assessment
    - Strengths
    - Areas for Improvement
  - Detailed Findings by Severity
    - Critical Issues ({count})
    - High Priority Issues ({count})
    - Medium Priority Issues ({count})
    - Low Priority Issues ({count})
  - Recommendations
    - Required Fixes (Before Merge)
    - Recommended Improvements
    - Optional Enhancements
  - Metrics Summary

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
