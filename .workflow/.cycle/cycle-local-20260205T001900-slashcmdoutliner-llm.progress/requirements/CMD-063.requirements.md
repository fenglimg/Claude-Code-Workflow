# Requirement (non-leaky): /workflow:tdd-coverage-analysis

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/tools/tdd-coverage-analysis.md`

## Command Identity

- group: workflow
- name: tdd-coverage-analysis
- description: Analyze test coverage and TDD cycle execution with Red-Green-Refactor compliance verification
- argument-hint: --session WFS-session-id
- allowed-tools: Read(*), Write(*), Bash(*)

## Structure Hints (Headings Only)

- TDD Coverage Analysis Command
  - Overview
  - Core Responsibilities
  - Execution Process
  - Execution Lifecycle
    - Phase 1: Extract Test Tasks
    - Phase 2: Run Test Suite
- Node.js/JavaScript
- Python
- Other frameworks (detect from project)
    - Phase 3: Parse Coverage Data
    - Phase 4: Verify TDD Cycle
- Check TEST task summary
- Check IMPL task summary
- Check REFACTOR task summary
    - Phase 5: Generate Analysis Report
- TDD Cycle Analysis - {Session ID}
  - Coverage Metrics
  - Coverage Details
    - Covered
    - Uncovered
  - TDD Cycle Verification
    - Feature 1: {Feature Name}
    - Feature 2: {Feature Name}
  - TDD Compliance Summary
  - Gaps Identified
  - Recommendations
  - Output Files
  - Test Framework Detection
- Check for test frameworks
  - TDD Cycle Verification Algorithm
  - Coverage Metrics Calculation
- Parse coverage from test-results.json
- Calculate overall score
  - Error Handling
    - Test Execution Errors
    - Cycle Verification Errors
  - Integration & Usage
    - Command Chain
    - Basic Usage
    - Expected Output
  - Coverage Results
  - TDD Cycle Verification

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
