# Requirement (non-leaky): /workflow:synthesis

## Source

- Command doc (oracle, do not paste full contents into spec): `.claude/commands/workflow/brainstorm/synthesis.md`

## Command Identity

- group: workflow
- name: synthesis
- description: Clarify and refine role analyses through intelligent Q&A and targeted updates with synthesis agent
- argument-hint: [-y|--yes] [optional: --session session-id]
- allowed-tools: Task(conceptual-planning-agent), TodoWrite(*), Read(*), Write(*), Edit(*), Glob(*), AskUserQuestion(*)

## Structure Hints (Headings Only)

  - Auto Mode
  - Overview
  - Quick Reference
    - Phase Summary
    - AskUserQuestion Pattern
  - Task Tracking
  - Execution Phases
    - Phase 1: Discovery & Validation
    - Phase 2: Role Discovery & Path Preparation
    - Phase 3A: Analysis & Enhancement Agent
  - Agent Mission
  - Input
  - Flow Control Steps
  - Output Format
    - Phase 4: User Interaction
      - Step 1: Enhancement Selection
      - Step 2: Clarification Questions
    - Question Guidelines
      - Step 3: Build Update Plan
    - Phase 5: Parallel Document Update Agents
  - Agent Mission
  - Input
  - Flow Control Steps
  - Output
    - Phase 6: Finalization
      - Step 1: Update Context Package
      - Step 2: Update Session Metadata
      - Step 3: Completion Report
  - âœ… Clarification Complete
    - Next Steps
  - Output
  - Clarifications
    - Session {date}
  - {Existing Sections}
  - Quality Checklist

## Hard Constraints (P0)

- Do not claim a pointer is `Existing` unless it is verifiable in the repo now.
- Evidence must be dual-source: docs (.claude/commands/**.md) + ts (ccw/src/**).
- If unsure, mark as `Planned` and add a concrete `Verify` step.
